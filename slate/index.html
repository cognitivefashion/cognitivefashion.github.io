<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>IBM Research AI for Fashion API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.svg" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="python">python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://cognitivefashion.github.io/'>Project Website</a></li>
            <li><a href='https://github.com/cognitivefashion/cf-sdk-python'>Python SDK</a></li>
            <li><a href='mailto:viraykar@in.ibm.com;jaikhari@in.ibm.com?Subject=AI%20%20for%20Fashion'>Contact</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="ibm-research-ai-for-fashion">IBM Research AI for Fashion</h1>

<p>The <a href="https://cognitivefashion.github.io/">IBM Research AI for fashion</a> project aims to build a suite of APIs for the fashion industry primarily leveraging deep learning, natural language processing and computer vision. </p>

<p>The usecases are targeted towards end consumers, online retailers, buyers, merchandisers and designers. Developers/in-house IT team can use these APIs to build their own applications. Central to this is a curated domain specific taxonomy/knowledge graph, fashion related content and text/image annotators tuned to the domain of fashion. </p>

<p><a href="https://github.com/cognitivefashion/cf-sdk-python">Python SDK</a></p>

<aside class="notice">
Our <b>fashion taxonomy</b> is a semi-automatically curated comprehensive hierarchical fashion taxonomy for apparel, footwear, and accessories along with their attributes and relations. The taxonomy is curated from several fashion resources and then hand tuned by domain experts. All the APIs below leverage this fashion taxonomy. Fashion evolves constantly and hence IBM fashion taxonomy is dynamically updated at regular intervals to include the current fashion terms and trends. The user will always have access to the latest fashion taxonomy when using any of these APIs.
</aside>

<h1 id="authentication">Authentication</h1>
<pre class="highlight shell tab-shell"><code><span class="c"># Pass the API key in the header.</span>
curl <span class="s1">'api_endpoint_here'</span> -H <span class="s2">"X-Api-Key: your_api_key"</span>

<span class="c"># If you are making a GET request, </span>
<span class="c"># you may also pass in the API key as a parameter.</span>
curl <span class="s2">"api_endpoint_here"</span>?api_key<span class="o">=</span>your_api_key
</code></pre><pre class="highlight python tab-python"><code><span class="c"># We will use the requests HTTP library for python for all the examples.</span>
<span class="c"># http://docs.python-requests.org</span>

<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">'api_endpoint_here'</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="s">'your_api_key'</span><span class="p">}</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="c"># If you are making a GET request, </span>
<span class="c"># you may also pass in the API key as a parameter.</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'api_endpoint_here'</span>
<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s">'api_key'</span><span class="p">:</span> <span class="s">'your_api_key'</span><span class="p">}</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">params</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Make sure to replace <code class="prettyprint">your_api_key</code> with your API key.</p>
</blockquote>

<p>Cognitive Fashion uses API keys to allow access to the API. The API key has to be included in all API requests to the server. </p>

<p>The preferred way is to include it in a header that looks like the following:</p>

<p><code class="prettyprint">curl &quot;api_endpoint_here&quot; -H &quot;X-Api-Key: your_api_key&quot;</code></p>

<p>If you are making a <code class="prettyprint">GET</code> request, you may also pass in the API key as a parameter:</p>

<p><code class="prettyprint">curl &quot;api_endpoint_here&quot;?api_key=your_api_key</code></p>

<aside class="notice">
You must replace <code>your_api_key</code> with your personal API key.
</aside>

<h1 id="data-collection">Data collection</h1>
<pre class="highlight shell tab-shell"><code><span class="c"># Set X-Data-Collection-Opt-Out to true in the header.</span>
curl <span class="s1">'api_endpoint_here'</span> -H  <span class="s2">"X-Data-Collection-Opt-Out: true"</span>

<span class="c"># If you are making a GET request, </span>
<span class="c"># you may also set the data_collection_opt_out parameter to true.</span>
curl <span class="s2">"api_endpoint_here"</span>?data_collection_opt_out<span class="o">=</span><span class="nb">true</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">'api_endpoint_here'</span>

<span class="c"># Set X-Data-Collection-Opt-Out to true in the header.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'your_api_key'</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'true'</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">'api_endpoint_here'</span>

<span class="c"># If you are making a GET request, you may also set the </span>
<span class="c"># data_collection_opt_out parameter to true.</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">params</span><span class="p">[</span><span class="s">'api_key'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'your_api_key'</span>
<span class="n">params</span><span class="p">[</span><span class="s">'data_collection_opt_out'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'true'</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
</code></pre>
<p>By default, most APIs log requests and their results. For example, the visual search API by default will save the user uploaded image. Logging is done only to improve the accuracy of the APIs. The logged data is not shared or made public. However, you have the option of opting out. To prevent the service from accessing your data for further API improvements, set the <code class="prettyprint">X-Data-Collection-Opt-Out</code> header parameter to <code class="prettyprint">true</code>. For example, for visual search API this will delete the user uploaded image from our servers as soon as the computations are done.</p>

<p>The preferred way is to include it in a header that looks like the following:</p>

<p><code class="prettyprint">curl &#39;api_endpoint_here&#39; -H  &quot;X-Data-Collection-Opt-Out: true&quot;</code></p>

<p>If you are making a GET request, you may also set the <code class="prettyprint">data_collection_opt_out</code> parameter to <code class="prettyprint">true</code>.</p>

<p><code class="prettyprint">curl &quot;api_endpoint_here&quot;?data_collection_opt_out=true</code></p>

<h1 id="fashion-quote">Fashion quote</h1>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header.</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="c"># Define the API end point.</span>
<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/fashion_quote'</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"quote"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Simplicity is the keynote of all true elegance."</span><span class="p">,</span><span class="w">
 </span><span class="s2">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Coco Chanel"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint gets a random quote about fashion. Think of this as our <code class="prettyprint">Hello, world!</code> albiet a more interesting one which you can actually use on your websites.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/fashion_quote</code></p>

          <h1 id="catalog">Catalog</h1>

<p>The APIs come in two flavors. Some APIs are simple and do not require access to the product catalog. However we have another bunch of powerful APIs which operate on top of the client catalog. The first step is to upload the product catalog. These are some end points for uploading, accessing, modifying and deleting  a product catalog.</p>

<h2 id="product-json-format">Product JSON Format</h2>

<blockquote>
<p>Sample json document for catalog ingestion corresponding to this <a href="http://www.abof.com/product/109FA16AWWWDR9D03Y10-109F-Women-Brown-&amp;-Yellow-Printed-Dress">product</a>.</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"109FA16AWWWDR9D03Y10"</span><span class="p">,</span><span class="w"> 
 </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.abof.com/product/109FA16AWWWDR9D03Y10-109F-Women-Brown-&amp;-Yellow-Printed-Dress"</span><span class="p">,</span><span class="w"> 
 </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-12"</span><span class="p">,</span><span class="w"> 
 </span><span class="s2">"out_of_stock"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"109f women brown &amp; yellow printed dress"</span><span class="p">,</span><span class="w"> 
 </span><span class="s2">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dress"</span><span class="p">,</span><span class="w"> 
 </span><span class="s2">"visual_search_category"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"dress"</span><span class="p">],</span><span class="w">
 </span><span class="s2">"taxonomy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"women;dress"</span><span class="p">,</span><span class="w"> 
 </span><span class="s2">"gender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"female"</span><span class="p">,</span><span class="w">  
 </span><span class="s2">"age_group"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="s2">"teenager"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"adult"</span><span class="w">
 </span><span class="p">],</span><span class="w"> 
 </span><span class="s2">"images"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"1"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"camera_focus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"full"</span><span class="p">,</span><span class="w"> 
   </span><span class="s2">"pose"</span><span class="p">:</span><span class="w"> </span><span class="s2">"front"</span><span class="p">,</span><span class="w"> 
   </span><span class="s2">"ignore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2016/109FA16AWWWDR9D03Y10/Front_Large.jpg"</span><span class="p">,</span><span class="w"> 
   </span><span class="s2">"model_worn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yes"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"primary"</span><span class="w">
  </span><span class="p">},</span><span class="w"> 
  </span><span class="s2">"3"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"camera_focus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"detail"</span><span class="p">,</span><span class="w"> 
   </span><span class="s2">"pose"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNK"</span><span class="p">,</span><span class="w"> 
   </span><span class="s2">"ignore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yes"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2016/109FA16AWWWDR9D03Y10/Detail_Large.jpg"</span><span class="p">,</span><span class="w"> 
   </span><span class="s2">"model_worn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"secondary"</span><span class="w">
  </span><span class="p">},</span><span class="w"> 
  </span><span class="s2">"2"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"camera_focus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"full"</span><span class="p">,</span><span class="w"> 
   </span><span class="s2">"pose"</span><span class="p">:</span><span class="w"> </span><span class="s2">"right"</span><span class="p">,</span><span class="w"> 
   </span><span class="s2">"ignore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2016/109FA16AWWWDR9D03Y10/Right_Large.jpg"</span><span class="p">,</span><span class="w"> 
   </span><span class="s2">"model_worn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yes"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"secondary"</span><span class="w">
  </span><span class="p">},</span><span class="w"> 
  </span><span class="s2">"4"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"camera_focus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"full"</span><span class="p">,</span><span class="w"> 
   </span><span class="s2">"pose"</span><span class="p">:</span><span class="w"> </span><span class="s2">"back"</span><span class="p">,</span><span class="w"> 
   </span><span class="s2">"ignore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2016/109FA16AWWWDR9D03Y10/Back_Large.jpg"</span><span class="p">,</span><span class="w"> 
   </span><span class="s2">"model_worn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yes"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"secondary"</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">},</span><span class="w"> 
 </span><span class="s2">"color"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="s2">"copper"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"brown"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"yellow"</span><span class="w">
 </span><span class="p">],</span><span class="w"> 
 </span><span class="s2">"pattern"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="s2">"printed"</span><span class="w">
 </span><span class="p">],</span><span class="w"> 
 </span><span class="s2">"fabric"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="s2">"polyester"</span><span class="w">
 </span><span class="p">],</span><span class="w"> 
 </span><span class="s2">"brand"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="s2">"109f"</span><span class="w">
 </span><span class="p">],</span><span class="w"> 
 </span><span class="s2">"occasion"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="s2">"brunch"</span><span class="w">
 </span><span class="p">],</span><span class="w">  
 </span><span class="s2">"season"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="s2">"summer"</span><span class="w">
 </span><span class="p">],</span><span class="w"> 
 </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="s2">"round neck"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"sleeveless"</span><span class="w">
 </span><span class="p">],</span><span class="w"> 
 </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Brown and yellow printed dress, has a round neck with tie-up detail on one shoulder, sleeveless, elasticized detail along the waistline, side slits"</span><span class="p">,</span><span class="w"> 
 </span><span class="s2">"style_tip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Club this dress with a pair of sandals. Add on a statement neckpiece for a stylish allure."</span><span class="p">,</span><span class="w"> 
 </span><span class="s2">"available_sizes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="s2">"XS"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"S"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"M"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"L"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"XL"</span><span class="w">
 </span><span class="p">],</span><span class="w"> 
 </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">2199.0</span><span class="p">,</span><span class="w"> 
 </span><span class="s2">"sale_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">1100.0</span><span class="p">,</span><span class="w"> 
 </span><span class="s2">"sale_percentage"</span><span class="p">:</span><span class="w"> </span><span class="mf">50.0</span><span class="p">,</span><span class="w">
 </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INR"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>We refer to any <strong>apparel</strong>, <strong>accessory</strong>, or <strong>shoes</strong> as a <strong>product</strong> in the table below. A product in a catalog is represented as a json object with fields specified below. Ingesting the catalog means uploading these json files for all products in the catalog via an API call.</p>

<p>Try to populate as much information available for each product into these fields in the json document. Except for the fields in bold (<strong>id</strong>, <strong>gender</strong>, <strong>name</strong> (for natural language search), <strong>images</strong>(for visual search and visual browse)) all of these are optional. However the the performance of the natural language search is heavily dependent on the richness of these structured fields and is recommended that you provide as much information as possible.</p>

<table><thead>
<tr>
<th>field</th>
<th>type</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>string</td>
<td>A unique identifier for the product for which there is a product page and a set of product images associated with it.</td>
</tr>
<tr>
<td>url</td>
<td>string</td>
<td>The corresponding url of the product page.</td>
</tr>
<tr>
<td>date</td>
<td>string</td>
<td>The date when the item was entered into the catalog, in <code class="prettyprint">YYYY-MM-DD</code> format.</td>
</tr>
<tr>
<td>out_of_stock</td>
<td>string</td>
<td>Can either be <code class="prettyprint">yes</code> or <code class="prettyprint">no</code>. This is the field that need to be changed to <code class="prettyprint">yes</code> when a product goes out of stock. By default all search queries will not return out-of-stock products. Note that typically out of stock is at the SKU level. Ideally make this <code class="prettyprint">yes</code>  only when all SKUs for this product are out of stock.</td>
</tr>
<tr>
<td></td>
<td></td>
<td><em>You will typically use this when the product will be replenished. If you think the product will be discontinued and not available again you can delete that product entirely.</em></td>
</tr>
<tr>
<td><strong>name</strong></td>
<td>string</td>
<td>The name of the product. This is generally a free text brief description of the product.</td>
</tr>
<tr>
<td>category</td>
<td>string</td>
<td>The product category.</td>
</tr>
<tr>
<td>visual_search_category</td>
<td>list string</td>
<td>A list of categories(or buckets) this product belongs to. This field is used to support category based visual search. A separate visual search index will be built with images from a particular category. While in most cases this will be same as <code class="prettyprint">category</code> field in principle this field can be differnet. For example, <code class="prettyprint">shirts</code> could be the <code class="prettyprint">category</code> while the <code class="prettyprint">visual_search_category</code> could be <code class="prettyprint">women shirts</code>. The field can also support multiple category values. For example, <code class="prettyprint">data[&#39;visual_search_category&#39;] = [&#39;tops&#39;,&#39;blouses&#39;]</code>. This means that the images corresponding to this product will be included in the visual search index for both <code class="prettyprint">tops</code> and <code class="prettyprint">blouses</code>.</td>
</tr>
<tr>
<td>taxonomy</td>
<td>string</td>
<td>The complete product taxonomy if known, separated via <code class="prettyprint">;</code>.</td>
</tr>
<tr>
<td><strong>gender</strong></td>
<td>string</td>
<td>The gender for which the product is intended for, can be <code class="prettyprint">male</code>, <code class="prettyprint">female</code> or <code class="prettyprint">unisex</code>.</td>
</tr>
<tr>
<td>age_group</td>
<td>list string</td>
<td>The age group for which the product is intended for. Some suggested tags : <code class="prettyprint">baby</code>, <code class="prettyprint">kid</code>, <code class="prettyprint">teenager</code>, <code class="prettyprint">adult</code>.</td>
</tr>
<tr>
<td><strong>images</strong></td>
<td>list of dict</td>
<td>A list of images available for the product with <code class="prettyprint">image_id</code> as the key and the following fields in the dict.</td>
</tr>
<tr>
<td></td>
<td>image_id</td>
<td>The image id (string).</td>
</tr>
<tr>
<td></td>
<td>image_url</td>
<td>The image url. The actual image will be downloaded from this url to build the visual search index. The image format can be in JPEG,PNG,BMP, or GIF.</td>
</tr>
<tr>
<td></td>
<td>ignore</td>
<td>You can use this field to select what kind of images should be used for visual browse/search.  If <code class="prettyprint">yes</code> then the image will not be downloaded and excluded from visual browse/search. In the example on the right, we ignore all images which have close-up of some details in the product.</td>
</tr>
<tr>
<td></td>
<td>model_worn</td>
<td>If <code class="prettyprint">yes</code> then the image corresponds to the model wearing the particular product. If <code class="prettyprint">no</code> refers to image of the the product only. Use <code class="prettyprint">UNK</code> if not known.</td>
</tr>
<tr>
<td></td>
<td>pose</td>
<td>Refers to the pose/orientation in which the image is taken. Can take one of the following values: <code class="prettyprint">front</code>, <code class="prettyprint">back</code>, <code class="prettyprint">left</code>, <code class="prettyprint">right</code>, <code class="prettyprint">top</code>, <code class="prettyprint">UNK</code>.</td>
</tr>
<tr>
<td></td>
<td>camera_focus</td>
<td>Which part of the model the camera is focussed on. Can take one of the following values: <code class="prettyprint">full</code> (complete view of the model, entire body), <code class="prettyprint">top</code> (upper part of the model above the waist, used in shirts etc.), <code class="prettyprint">bottom</code> (lower part of the model below the waist, used in trousers etc.), <code class="prettyprint">portrait</code> (model face, normally up to the shoulder), <code class="prettyprint">detail</code> (a close-up of some details in the product), <code class="prettyprint">outfit</code> (complete view of the model, entire body along with other apparel and accessories), <code class="prettyprint">UNK</code>.</td>
</tr>
<tr>
<td></td>
<td>image_type</td>
<td>Can be either <code class="prettyprint">primary</code> or <code class="prettyprint">secondary</code>. You can use this field also to categorize images.</td>
</tr>
<tr>
<td></td>
<td></td>
<td><em>The fields <code class="prettyprint">ignore</code>,<code class="prettyprint">model_worn</code>, <code class="prettyprint">pose</code>, <code class="prettyprint">camera_focus</code>, and <code class="prettyprint">image_type</code> are optional.</em></td>
</tr>
<tr>
<td>color</td>
<td>list of string</td>
<td>A list of colors terms that describe the colors in the product.</td>
</tr>
<tr>
<td>pattern</td>
<td>list of string</td>
<td>A list of pattern terms that describe the pattern on the fabric.</td>
</tr>
<tr>
<td>fabric</td>
<td>list of string</td>
<td>A list of terms that describe the fabric used in the product.</td>
</tr>
<tr>
<td>brand</td>
<td>list of string</td>
<td>A list of terms that describe the brand name of the product.</td>
</tr>
<tr>
<td>occasion</td>
<td>list of string</td>
<td>A list of terms that describe occasion for which this product can be worn.</td>
</tr>
<tr>
<td>season</td>
<td>list of string</td>
<td>A list of terms that describe the season for which this product can be worn.</td>
</tr>
<tr>
<td>attributes</td>
<td>list of string</td>
<td>A list of terms that describe other attributes like sleeve length, collar etc. of the product.</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>A detailed free text description of the product if available.</td>
</tr>
<tr>
<td>style_tip</td>
<td>string</td>
<td>A detailed free text style tip if available. Typically this suggests what to pair this with.</td>
</tr>
<tr>
<td>available_sizes</td>
<td>list of string</td>
<td>A list of available sizes for the product.</td>
</tr>
<tr>
<td>price</td>
<td>float</td>
<td>The regular list price of the product.</td>
</tr>
<tr>
<td>sale_price</td>
<td>float</td>
<td>The sale price of the product if the product is on sale. If the product is not on sale make this equal to the regular price.</td>
</tr>
<tr>
<td></td>
<td></td>
<td><em>Note that the natural language search by default will use the sale_price field  for the queries that deal with price.</em></td>
</tr>
<tr>
<td>sale_percentage</td>
<td>float</td>
<td>The sale percentage. This is useful for queries related to sale percentages.</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>The currency used, specified as a 3 letter <a href="http://www.xe.com/iso4217.php">ISO 4217</a> currency code.</td>
</tr>
<tr>
<td></td>
<td></td>
<td><em>The catalog can have products in different currencies, and we will normalize the price internally for serving the query results.</em> (Not yet available)</td>
</tr>
</tbody></table>

<h2 id="add-product-to-a-catalog">Add product to a catalog</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Add product to a catalog.    </span>
<span class="c"># POST /v1/catalog/{catalog_name}/products/{id}</span>
<span class="c"># params - download_images</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API URL</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># HEADERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># API key</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span>
<span class="c"># Data collection opt out.</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># OPTIONAL QUERY PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># download_images : str, optional (default: 'true') </span>
<span class="c"># By default all the images in the json will be downloaded.  </span>
<span class="c"># Set this to 'false' if you do not want to download the images.  </span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">params</span><span class="p">[</span><span class="s">'download_images'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'true'</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># PATH PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># ADD A BUNCH OF PRODUCTS</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="c"># Some sample data where each product in the catalog is in a json format.</span>
<span class="n">catalog_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">props</span><span class="p">[</span><span class="s">'catalog_folder'</span><span class="p">],</span><span class="s">'jsons'</span><span class="p">)</span>
<span class="n">json_filenames</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">catalog_folder</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">f</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">'.'</span><span class="p">)]</span>

<span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">json_filenames</span><span class="p">:</span>
    <span class="c"># Load the json file.</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">catalog_folder</span><span class="p">,</span><span class="n">filename</span><span class="p">),</span><span class="s">'r'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

    <span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/products/</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">,</span><span class="n">data</span><span class="p">[</span><span class="s">'id'</span><span class="p">])</span>

    <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                             <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                             <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">),</span>
                             <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

    <span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
    <span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"560.34"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
 </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABOFA15AWWWTP1101602"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"n_images"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
 </span><span class="s2">"n_images_downloaded"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
 </span><span class="s2">"n_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
 </span><span class="s2">"n_images_error"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
 </span><span class="s2">"n_images_existing"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
 </span><span class="s2">"images_error"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Add a product json to a catalog and download the images. </p>

<p>Anytime you add a json to a catalog for the first time a new catalog will be automatically created with the name specified in the parameters <code class="prettyprint">catalog_name</code>. The same <code class="prettyprint">catalog_name</code> will have to be used for other end points.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">POST /v1/catalog/{catalog_name}/products/{id}</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>path</td>
<td>(<strong>Required</strong>) The product id.</td>
<td></td>
</tr>
<tr>
<td>data</td>
<td>application/json</td>
<td>(<strong>Required</strong>) The json object file in the the format specified <a href="#product-json-format">earlier</a>.</td>
<td></td>
</tr>
<tr>
<td>download_images</td>
<td>query</td>
<td>By default all the images specified in the json will be downloaded. Set this to <code class="prettyprint">false</code> if you do not want to download the images. This is mainly useful when we have a local copy of the images or are not using visual search.</td>
<td><code class="prettyprint">true</code></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>id</td>
<td>The product id.</td>
</tr>
<tr>
<td>version</td>
<td>The version number. Every update will be assigned a new version number.</td>
</tr>
<tr>
<td>n_images</td>
<td>The total number of images in the json file.</td>
</tr>
<tr>
<td>n_images_downloaded</td>
<td>The actual number of images successfully downloaded.</td>
</tr>
<tr>
<td>n_images_ignored</td>
<td>The total number of images ignored (as specified by the field <code class="prettyprint">ignore</code> in <code class="prettyprint">images</code> in the product json.).</td>
</tr>
<tr>
<td>n_images_error</td>
<td>The number of images for which there was some error in downloading.</td>
</tr>
<tr>
<td>n_images_existing</td>
<td>The number of images which were already downloaded.</td>
</tr>
<tr>
<td>images_error</td>
<td>The is of the images for which there was some error in downloading.</td>
</tr>
</tbody></table>

<aside class="notice">
Note that the image download happens only once. Even if you post the json once again the image will not be downloaded again unless there is a change in the image url. 
</aside>

<h2 id="get-product-from-a-catalog">Get product from a catalog</h2>
<pre class="highlight python tab-python"><code><span class="c">#-----------------------------------------------------------------------------</span>
<span class="c"># Get product from a catalog.  </span>
<span class="c"># GET /v1/catalog/{catalog_name}/products/{id}</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API URL</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># HEADERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># API key</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span>
<span class="c"># Data collection opt out.</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># OPTIONAL QUERY PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># PATH PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="c"># product id</span>
<span class="nb">id</span> <span class="o">=</span> <span class="s">'SKLTS16AMCWSH8SH20'</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API END POINT</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/products/</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">,</span><span class="nb">id</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                        <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                        <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># ACCESSING IMAGES.</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="k">for</span> <span class="n">image_id</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="s">'data'</span><span class="p">][</span><span class="s">'images'</span><span class="p">]:</span>
    <span class="n">image_url</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="s">'data'</span><span class="p">][</span><span class="s">'images'</span><span class="p">][</span><span class="n">image_id</span><span class="p">][</span><span class="s">'image_url'</span><span class="p">]</span>
    <span class="n">image_filename</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="s">'data'</span><span class="p">][</span><span class="s">'images'</span><span class="p">][</span><span class="n">image_id</span><span class="p">][</span><span class="s">'image_filename'</span><span class="p">]</span>
    <span class="n">image_location</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/images/</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">,</span><span class="n">image_filename</span><span class="p">)</span>
    <span class="n">image_url_local</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s?api_key=</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">image_location</span><span class="p">),</span><span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">])</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'</span><span class="si">%</span><span class="s">s </span><span class="si">%</span><span class="s">s </span><span class="se">\n</span><span class="s"> </span><span class="si">%</span><span class="s">s </span><span class="se">\n</span><span class="s"> </span><span class="si">%</span><span class="s">s </span><span class="se">\n</span><span class="s"> </span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span><span class="n">image_id</span><span class="p">,</span>
                                     <span class="n">image_filename</span><span class="p">,</span>
                                     <span class="n">image_url</span><span class="p">,</span>
                                     <span class="n">image_url_local</span><span class="p">)</span>
    <span class="p">)</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.99"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20DRA16FWCWFT9010970"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
 </span><span class="s2">"found"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
 </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"color"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
   </span><span class="s2">"copper"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"taxonomy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"women;footwear;sandals-heels"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"age_group"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
   </span><span class="s2">"teenager"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"adult"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INR"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"images"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"1"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"camera_focus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pose"</span><span class="p">:</span><span class="w"> </span><span class="s2">"front"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ignore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/20DRA16FWCWFT9010970/Front_Large.jpg"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"model_worn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yes"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20DRA16FWCWFT9010970_1_front_UNK.jpg"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"3"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"camera_focus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pose"</span><span class="p">:</span><span class="w"> </span><span class="s2">"right"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ignore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/20DRA16FWCWFT9010970/Right_Large.jpg"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"model_worn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yes"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20DRA16FWCWFT9010970_3_right_UNK.jpg"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"2"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"camera_focus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pose"</span><span class="p">:</span><span class="w"> </span><span class="s2">"left"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ignore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/20DRA16FWCWFT9010970/Left_Large.jpg"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"model_worn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yes"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20DRA16FWCWFT9010970_2_left_UNK.jpg"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"5"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"camera_focus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pose"</span><span class="p">:</span><span class="w"> </span><span class="s2">"top"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ignore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/20DRA16FWCWFT9010970/Top_Large.jpg"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"model_worn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yes"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20DRA16FWCWFT9010970_5_top_UNK.jpg"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"4"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"camera_focus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"detail"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pose"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ignore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yes"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/20DRA16FWCWFT9010970/Detail_Large.jpg"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"model_worn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yes"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20DRA16FWCWFT9010970_4_UNK_detail.jpg"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"6"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"camera_focus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"full"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pose"</span><span class="p">:</span><span class="w"> </span><span class="s2">"front"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ignore"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yes"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/20DRA16FWCWFT9010970/Look_Large.jpg"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"model_worn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yes"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20DRA16FWCWFT9010970_6_front_full.jpg"</span><span class="w">
   </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"available_sizes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
   </span><span class="s2">"36"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"37"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"38"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"39"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"40"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"41"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"style_tip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"For a comfortable and stylish look, team these sandals with a pair of shorts and a T-shirt. Add on a watch to complete the look."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20DRA16FWCWFT9010970"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"flats"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fabric"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
   </span><span class="s2">"upper: faux suede, sole: tpr"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"pattern"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNK"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"sale_percentage"</span><span class="p">:</span><span class="w"> </span><span class="mf">9.966555183946488</span><span class="p">,</span><span class="w">
  </span><span class="s2">"sale_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">1346.0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20dresses"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pointy-toed brown sandals with low top styling, has a faux suede upper, stylized lace-ups across the mid-foot that connects to form an ankle loop, patterned outsole"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"season"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNK"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">1495.0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"occasion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNK"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-12"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20dresses women brown sandals"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.abof.com/product/20DRA16FWCWFT9010970-20Dresses-Women-Brown-Sandals"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"gender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"female"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNK"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"out_of_stock"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no"</span><span class="w">
 </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get the product json from a catalog.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/catalog/{catalog_name}/products/{id}</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
</tr>
<tr>
<td>id</td>
<td>path</td>
<td>(<strong>Required</strong>) The product id.</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>id</td>
<td>The product id.</td>
</tr>
<tr>
<td>version</td>
<td>The version number. Every update will be assigned a new version number.</td>
</tr>
<tr>
<td>data</td>
<td>The product json.</td>
</tr>
</tbody></table>

<h2 id="delete-product-from-a-catalog">Delete product from a catalog</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Delete product from a catalog.</span>
<span class="c"># DELETE /v1/catalog/{catalog_name}/products/{id}</span>
<span class="c"># params - delete_images</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API URL</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># HEADERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># API key</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span>
<span class="c"># Data collection opt out.</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># OPTIONAL QUERY PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># delete_images : str, optional (default: 'false') </span>
<span class="c">#</span>
<span class="c"># Set this to 'true' if you want to delete the images.  </span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">params</span><span class="p">[</span><span class="s">'delete_images'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'false'</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># PATH PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="c"># product id</span>
<span class="nb">id</span> <span class="o">=</span> <span class="s">'SKLTS16AMCWSH8SH20'</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API END POINT</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/products/</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">,</span><span class="nb">id</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                           <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                           <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4.01"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
 </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SKLTS16AMCWSH8SH20"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Delete the product from a catalog.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">DELETE /v1/catalog/{catalog_name}/products/{id}</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>path</td>
<td>(<strong>Required</strong>) The product id.</td>
<td></td>
</tr>
<tr>
<td>delete_images</td>
<td>query</td>
<td>By default when you delete a product the images are not deleted. Set this to <code class="prettyprint">true</code> if you want to delete the images.</td>
<td><code class="prettyprint">false</code></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>id</td>
<td>The product id.</td>
</tr>
<tr>
<td>version</td>
<td>The version number.</td>
</tr>
<tr>
<td>deleted</td>
<td>This will be true if the product was successfully deleted.</td>
</tr>
</tbody></table>

<h2 id="update-product-in-a-catalog">Update product in a catalog</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Update product in a catalog.  </span>
<span class="c"># PUT  /v1/catalog/{catalog_name}/products/{id}</span>
<span class="c"># params - download_images</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API URL</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># HEADERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># API key</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span>
<span class="c"># Data collection opt out.</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># OPTIONAL QUERY PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># download_images : str, optional (default: 'true') </span>
<span class="c"># By default all the images in the json will be downloaded.  </span>
<span class="c"># Set this to 'false' if you do not want to download the images.  </span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">params</span><span class="p">[</span><span class="s">'download_images'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'true'</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># PATH PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="c"># product id</span>
<span class="nb">id</span> <span class="o">=</span> <span class="s">'SKLTS16AMCWSH8SH20'</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Data</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">data</span><span class="p">[</span><span class="s">'out_of_stock'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'yes'</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API END POINT</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/products/</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">,</span><span class="nb">id</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                        <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                        <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                        <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12.83"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
 </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20DRA16FWCWFT9010970"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Update the product in a catalog. This is useful to make partial/full updates to a product in the catalog. For example</p>

<ul>
<li>A product goes out-of-stock and you can just change the <code class="prettyprint">out_of_stock</code> field in the product json to <code class="prettyprint">yes</code> to reflect this change. </li>
<li>There is a sale for the product and and you can update the <code class="prettyprint">sale_price</code> and <code class="prettyprint">sale_percentage</code> fields.</li>
<li>The product image has changes and you can update the <code class="prettyprint">image_url</code>.</li>
</ul>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">PUT /v1/catalog/{catalog_name}/products/{id}</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>path</td>
<td>(<strong>Required</strong>) The product id.</td>
<td></td>
</tr>
<tr>
<td>data</td>
<td>application/json</td>
<td>(<strong>Required</strong>) The json object file in the the format specified <a href="#product-json-format">earlier</a> containing only the modifications.</td>
<td></td>
</tr>
<tr>
<td>download_images</td>
<td>query</td>
<td>By default all the images specified in the json will be downloaded. Set this to <code class="prettyprint">false</code> if you do not want to download the images.</td>
<td><code class="prettyprint">true</code></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>id</td>
<td>The product id.</td>
</tr>
<tr>
<td>version</td>
<td>The version number. Every new update creates a new version number.</td>
</tr>
</tbody></table>

          <h2 id="add-metadata-to-a-catalog">Add metadata to a catalog</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Add metadata to a catalog.    </span>
<span class="c"># POST /v1/catalog/{catalog_name}</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API URL</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># HEADERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># API key</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span>
<span class="c"># Data collection opt out.</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># OPTIONAL QUERY PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># PATH PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Metadata</span>
<span class="c"># Post any metadata you want to track for the catalog. Suggested fields</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">data</span><span class="o">=</span><span class="p">{}</span>
<span class="c">#A friendly name for display purposes.</span>
<span class="n">data</span><span class="p">[</span><span class="s">'friendly_name'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'sample'</span> 
<span class="c"># The url of the hero image.</span>
<span class="n">data</span><span class="p">[</span><span class="s">'hero_image_url'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'https://cognitivefashion.github.io/img/portfolio/logo_cf.svg'</span> 
<span class="c"># A brief description.</span>
<span class="n">data</span><span class="p">[</span><span class="s">'description'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'A sample catalog to test IBM Research AI for Fashion APIs.'</span> 

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API END POINT</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'v1/catalog/</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                         <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                         <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.87"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"catalog_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample_catalog"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"friendly_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A sample catalog to test IBM Research AI for Fashion APIs."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"hero_image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cognitivefashion.github.io/img/portfolio/logo_cf.svg"</span><span class="w">
 </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Add any extrat metadata to a catalog  </p>

<p>You can add any meta data you want to track. Suggested fields could include</p>

<ul>
<li><code class="prettyprint">friendly_name</code> - A friendly name for display purposes.</li>
<li><code class="prettyprint">hero_image_url</code> - The url of the hero image.</li>
<li><code class="prettyprint">description</code> - A brief description.</li>
</ul>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">POST /v1/catalog/{catalog_name}</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>path</td>
<td>(<strong>Required</strong>) The product id.</td>
<td></td>
</tr>
<tr>
<td>data</td>
<td>application/json</td>
<td>(<strong>Required</strong>) The json object file containing the metadata as key value pairs.</td>
<td></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>catalog_name</td>
<td>The catalog name.</td>
</tr>
<tr>
<td>metadata</td>
<td>The uploaded metadata.</td>
</tr>
</tbody></table>

<h2 id="get-info-about-a-catalog">Get info about a catalog</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get info about a product catalog.  </span>
<span class="c"># GET /v1/catalog/{catalog_name}</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API URL</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># HEADERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># API key</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span>
<span class="c"># Data collection opt out.</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># OPTIONAL QUERY PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># PATH PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API END POINT</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'v1/catalog/</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                        <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                        <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"num_of_products"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9.22"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"num_of_images"</span><span class="p">:</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w">
 </span><span class="s2">"catalog_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample_catalog"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"friendly_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A sample catalog to test IBM Research AI for Fashion APIs."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"hero_image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cognitivefashion.github.io/img/portfolio/logo_cf.svg"</span><span class="w">
 </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get some info about the product catalog. Currently this returns the number of products, the number of images and the metadata. </p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/catalog/{catalog_name}</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>catalog_name</td>
<td>The catalog name.</td>
</tr>
<tr>
<td>num_of_products</td>
<td>Number of products in the catalog.</td>
</tr>
<tr>
<td>num_of_images</td>
<td>Number of images in the catalog.</td>
</tr>
<tr>
<td>metadata</td>
<td>The metadata.</td>
</tr>
</tbody></table>

<h2 id="delete-a-catalog">Delete a catalog</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Delete a product catalog.</span>
<span class="c"># DELETE /v1/catalog/{catalog_name}</span>
<span class="c"># params : delete_images</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API URL</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># HEADERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># API key</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span>
<span class="c"># Data collection opt out.</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># OPTIONAL QUERY PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># delete_images : str, optional(default: 'true')</span>
<span class="c"># By default deletes all the catalog images unless this is set to 'false'.     </span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">params</span><span class="p">[</span><span class="s">'delete_images'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'false'</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># PATH PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API END POINT</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                           <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                           <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"360.34"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"catalog_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample_catalog"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Delete a product catalog. Also deletes all the downloaded images.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">DELETE /v1/catalog/{catalog_name}</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>delete_images</td>
<td>query</td>
<td>By default deletes all the catalog images unless this is set to <code class="prettyprint">false</code>.</td>
<td><code class="prettyprint">true</code></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>catalog_name</td>
<td>The catalog name.</td>
</tr>
<tr>
<td>deleted</td>
<td>This returns true is the catalog was successfully deleted.</td>
</tr>
</tbody></table>

<h2 id="get-all-catalog-names">Get all catalog names</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get all catalog names. </span>
<span class="c"># GET /v1/catalog_names</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API URL</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># HEADERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># API key</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span>
<span class="c"># Data collection opt out.</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># OPTIONAL QUERY PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># PATH PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API END POINT</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'v1/catalog_names'</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                        <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                        <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"catalog_names"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"sample_catalog"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"sample_catalog_2"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.78"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get all the catalog names.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/catalog_names</code></p>

<h3 id="request">Request</h3>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>catalog_names</td>
<td>The catalog names.</td>
</tr>
</tbody></table>

<h2 id="get-catalog-image">Get catalog image</h2>
<pre class="highlight shell tab-shell"><code>http://api_gateway_url/v1/catalog/sample_catalog/images/SKLTS16AMCWSH8SH20_5.jpg

http://api_gateway_url/v1/catalog/sample_catalog/images/SKLTS16AMCWSH8SH20_5.jpg?top_left_x<span class="o">=</span>100&amp;top_left_y<span class="o">=</span>100&amp;width<span class="o">=</span>64&amp;height<span class="o">=</span>64

</code></pre><pre class="highlight python tab-python"><code><span class="c">#-----------------------------------------------------------------------------</span>
<span class="c"># Get product from a catalog.  </span>
<span class="c"># GET /v1/catalog/{catalog_name}/products/{id}</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API URL</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># HEADERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># API key</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span>
<span class="c"># Data collection opt out.</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># OPTIONAL QUERY PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># PATH PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="c"># product id</span>
<span class="nb">id</span> <span class="o">=</span> <span class="s">'SKLTS16AMCWSH8SH20'</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API END POINT</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/products/</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">,</span><span class="nb">id</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                        <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                        <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># ACCESSING IMAGES.</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="k">for</span> <span class="n">image_id</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="s">'data'</span><span class="p">][</span><span class="s">'images'</span><span class="p">]:</span>
    <span class="n">image_url</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="s">'data'</span><span class="p">][</span><span class="s">'images'</span><span class="p">][</span><span class="n">image_id</span><span class="p">][</span><span class="s">'image_url'</span><span class="p">]</span>
    <span class="n">image_filename</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="s">'data'</span><span class="p">][</span><span class="s">'images'</span><span class="p">][</span><span class="n">image_id</span><span class="p">][</span><span class="s">'image_filename'</span><span class="p">]</span>
    <span class="n">image_location</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/images/</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">,</span><span class="n">image_filename</span><span class="p">)</span>
    <span class="n">image_url_local</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s?api_key=</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">image_location</span><span class="p">),</span><span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">])</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'</span><span class="si">%</span><span class="s">s </span><span class="si">%</span><span class="s">s </span><span class="se">\n</span><span class="s"> </span><span class="si">%</span><span class="s">s </span><span class="se">\n</span><span class="s"> </span><span class="si">%</span><span class="s">s </span><span class="se">\n</span><span class="s"> </span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span><span class="n">image_id</span><span class="p">,</span>
                                     <span class="n">image_filename</span><span class="p">,</span>
                                     <span class="n">image_url</span><span class="p">,</span>
                                     <span class="n">image_url_local</span><span class="p">)</span>
    <span class="p">)</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code></code></pre>
<p>Get an image in the catalog.</p>

<p>You can also pass the bounding box in the parameters to return a crop.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/catalog/{catalog_name}/images/{image_name}</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
</tr>
<tr>
<td>image_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The image name.</td>
</tr>
<tr>
<td>top_left_x</td>
<td>The x co-ordinate of the top left corner of the bounding box.</td>
<td></td>
</tr>
<tr>
<td>top_left_y</td>
<td>The y co-ordinate of the top left corner of the bounding box.</td>
<td></td>
</tr>
<tr>
<td>width</td>
<td>The width of the bounding box.</td>
<td></td>
</tr>
<tr>
<td>height</td>
<td>The height of the bounding box.</td>
<td></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

          <h2 id="basic-text-search">Basic Text Search</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Basic text search</span>
<span class="c"># GET /v1/catalog/{catalog_name}/text_search</span>
<span class="c"># params : query_text, max_number_of_results</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API URL</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># HEADERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># API key</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span>
<span class="c"># Data collection opt out.</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># OPTIONAL QUERY PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># query_text : string</span>
<span class="c">#   the search query</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">params</span><span class="p">[</span><span class="s">'query_text'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'skult'</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># max_number_of_results : int</span>
<span class="c">#   maximum number of results to return</span>
<span class="c">#   (defaults to 12)    </span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">params</span><span class="p">[</span><span class="s">'max_number_of_results'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">12</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># PATH PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API END POINT</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/text_search'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                        <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                        <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get more info about the relevant results</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="k">for</span> <span class="n">product</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s">'products'</span><span class="p">]:</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">product</span><span class="p">[</span><span class="s">'id'</span><span class="p">]</span>
    <span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/products/</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">,</span><span class="nb">id</span><span class="p">)</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'</span><span class="si">%</span><span class="s">s </span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s">'data'</span><span class="p">][</span><span class="s">'name'</span><span class="p">]))</span>

</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"41.15"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"products"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABOFA15AMCWJG10448"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABOFA15AMCWJG10449"</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Search the product catalog using a simple text query (e.g. <code class="prettyprint">joggers</code>).</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/catalog/{catalog_name}/text_search</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>query_text</td>
<td>query</td>
<td>(<strong>Required</strong>) The text query. (e.g. <code class="prettyprint">joggers</code>)</td>
<td></td>
</tr>
<tr>
<td>max_number_of_results</td>
<td>query</td>
<td>The maximum number of results to return.</td>
<td>12</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td><strong>products</strong></td>
<td>A sorted list of products in the catalog relevant to the query.</td>
</tr>
<tr>
<td>id</td>
<td>The id of the product.</td>
</tr>
</tbody></table>

          <h1 id="visual-search">Visual Search</h1>

<p>A collection of APIs for enabling a better search experience using the catalog images. Visual search helps a consumer discover exact match or show similar fashion products based on image search. These APIs support the following two variants:</p>

<ol>
<li><p><strong>Visual Search</strong> (<em>Search the look</em>) Consumer can upload any fashion image of his/her liking and visual search will show visually similar products that exist in the catalog. </p></li>
<li><p><strong>Visual Browse</strong> (<em>Show me more like this</em>) A user clicks on an existing apparel/accessory image in the catalog and visual browse will fetch and display visually similar looking products from the catalog. This is a more interactive way of browsing the catalog based on visual search. </p></li>
<li><p><strong>Category based Visual Search/Browse</strong> (<em>Search the look in a specific category</em>) The visual search APIs also support searching in a specific category. The user can upload any image and specify the category to search in (for example, show me similar looks like this in the <code class="prettyprint">shirts</code> category). To enable this use <code class="prettyprint">visual_search_category</code> field in the product json. </p></li>
</ol>

<p><code class="prettyprint">visual_search_category</code> - A list of categories(or buckets) this product belongs to (for example, <code class="prettyprint">data[&#39;visual_search_category&#39;] = [&#39;shirts&#39;]</code>). This field is used to support category based visual search. A separate visual search index will be built with images from a particular category. While in most cases this will be same as <code class="prettyprint">category</code> field in principle this field can be differnet. For example, <code class="prettyprint">shirts</code> could be the <code class="prettyprint">category</code> while the <code class="prettyprint">visual_search_category</code> could be <code class="prettyprint">women shirts</code>. The field can also support multiple category values. For example, <code class="prettyprint">data[&#39;visual_search_category&#39;] = [&#39;tops&#39;,&#39;blouses&#39;]</code>. This means that the images corresponding to this product will be included in the visual search index for both <code class="prettyprint">tops</code> and <code class="prettyprint">blouses</code>.</p>

<h2 id="build-visual-search-index">Build visual search index</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Build the visual search index.</span>
<span class="c"># POST /v1/catalog/{catalog_name}/visual_search_index</span>
<span class="c"># params - per_category_index</span>
<span class="c">#          full_index</span>
<span class="c">#          group_by</span>
<span class="c">#          group_by_k </span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API URL</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># HEADERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># API key</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span>
<span class="c"># Data collection opt out</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># OPTIONAL QUERY PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># per_category_index : str, optional (default: 'false')</span>
<span class="c">#</span>
<span class="c"># If this is set to 'true' builds a separate visual search index for each </span>
<span class="c"># category as specified in the field data['visual_search_category'].</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">params</span><span class="p">[</span><span class="s">'per_category_index'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'true'</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># full_index : str, optional (default: 'true')   </span>
<span class="c">#</span>
<span class="c"># If this is set to 'true' builds the the full visual search index along with</span>
<span class="c"># the separate visual search index for each visual search category. By default</span>
<span class="c"># the full visual search index is build alon with the separate index for each</span>
<span class="c"># category. Make this 'false' only if you do not see the need for the full</span>
<span class="c"># visual search index.</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c">#params['full_index'] = 'true'</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># group_by : boolean, optional(default:'false')</span>
<span class="c">#</span>
<span class="c">#    If this is set to True the group_by option is enabled. This</span>
<span class="c">#    groups the results from visual search into distinct groups </span>
<span class="c">#    according to various criteria. Currently the group_by option </span>
<span class="c">#    works only when full_index is set to True. If full_index is </span>
<span class="c">#    False the group_by is disabled.</span>
<span class="c">#</span>
<span class="c"># group_by_k : int, optional(default:5).</span>
<span class="c">#</span>
<span class="c">#    The number of nearest neighbors to use for group_by.</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c">#params['group_by'] = 'false'</span>
<span class="c">#params['group_by_k'] = 5</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># PATH PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API END POINT</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/visual_search_index'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                         <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"started"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.55"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"catalog_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample_catalog"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Build the visual search index.</p>

<p>Before you can start using the visual search and visual browse APIs the visual search index has to be built first. This API computes the feature representations for all the catalog images and then builds a visual search index for fast nearest neighbor retrieval.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">POST /v1/catalog/{catalog_name}/visual_search_index</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>per_category_index</td>
<td>query</td>
<td>If this is set to <code class="prettyprint">true</code> builds a separate visual search index for each category as specified in the field <code class="prettyprint">data[&#39;visual_search_category&#39;]</code>.</td>
<td><code class="prettyprint">false</code></td>
</tr>
<tr>
<td>full_index</td>
<td>query</td>
<td>If this is set to <code class="prettyprint">true</code> builds the the full visual search index along with the separate visual search index for each visual search category. By default the full visual search index is built. Make this <code class="prettyprint">false</code> only if you do not see the need for the full visual search index.</td>
<td><code class="prettyprint">true</code></td>
</tr>
<tr>
<td>group_by</td>
<td>query</td>
<td>If this is set to <code class="prettyprint">true</code> the <code class="prettyprint">group_by</code> option is enabled. This will allow the results from visual search to be grouped into distinct groups  according to various criteria. Currently the <code class="prettyprint">group_by</code> option works only when <code class="prettyprint">full_index</code> is set to <code class="prettyprint">true</code>. If <code class="prettyprint">full_index</code> is <code class="prettyprint">false</code> the <code class="prettyprint">group_by</code> option is disabled.</td>
<td><code class="prettyprint">false</code></td>
</tr>
<tr>
<td>group_by_k</td>
<td>query</td>
<td>The number of nearest neighbors to use for group_by.</td>
<td>5</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>catalog_name</td>
<td>The catalog name.</td>
</tr>
<tr>
<td>started</td>
<td>This is <code class="prettyprint">true</code> if the index building was started. You can query the status of the index building with the GET endpoint.</td>
</tr>
</tbody></table>

<aside class="notice">
This is a one time long running operation. Currently it takes around 250-500 milliseconds to compute the features for one image on a CPU instance. Depending on your catalog size you will have to wait till the index creation is completed to start using the visual search and visual browse APIs. You can query the status of the index creation using the GET endpoint. The index is built when the status changes to `done`
</aside>

<aside class="notice">
Any time you add new product or images to the catalog you will have to rebuild the index. The features for the old images will still be saved and we will be computing the features only for the newly added images. 
</aside>

<aside class="warning">
The current version supports building only one index at the same time and does not allow you to build another index when a current index building process in running. Please wait till the current index creation is completed. 
</aside>

<h2 id="get-visual-search-index-status">Get visual search index status</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get the status of the visual search index. </span>
<span class="c"># GET  /v1/catalog/{catalog_name}/visual_search_index</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API URL</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># HEADERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># API key</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span>
<span class="c"># Data collection opt out.</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># OPTIONAL QUERY PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># PATH PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API END POINT</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/visual_search_index'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                        <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                        <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5.18"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"catalog_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample_catalog"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"done"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-06-21 12:45:32.151198"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"finish_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-06-21 12:45:38.879901"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"num_of_products"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"num_of_products_by_category"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"t-shirt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"dress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"kurta"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"joggers"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"shirt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"num_of_images"</span><span class="p">:</span><span class="w"> </span><span class="s2">"38"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"num_of_images_by_category"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"t-shirt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"dress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"joggers"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"kurta"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"shirt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"feature_computation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"num_of_images_error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_existing"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_processed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"28"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"visual_search_index"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"num_of_images_missing_features"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_indexed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"28"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"visual_search_index_by_category"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"t-shirt"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"num_of_images_missing_features"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_indexed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"kurta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"num_of_images_missing_features"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_indexed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"dress"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"num_of_images_missing_features"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_indexed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"shirt"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"num_of_images_missing_features"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_indexed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"joggers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"num_of_images_missing_features"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_indexed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30"</span><span class="w">
   </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get the status of the visual search index.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/catalog/{catalog_name}/visual_search_index</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>catalog_name</td>
<td>The catalog name.</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td>A json containing various info about the current status of the index building process.</td>
</tr>
<tr>
<td>status</td>
<td>The current status of the index building process. The status can be one of <code class="prettyprint">starting</code>,<code class="prettyprint">computing_features</code>,<code class="prettyprint">building_index</code>,or <code class="prettyprint">done</code>. The index is built when the status becomes <code class="prettyprint">done</code>.</td>
</tr>
<tr>
<td>start_time</td>
<td>The time when the index building started.</td>
</tr>
<tr>
<td>finish_time</td>
<td>The time when the index building finished.</td>
</tr>
<tr>
<td>num_of_products</td>
<td>The total number of products in the catalog.</td>
</tr>
<tr>
<td>num_of_products_by_category</td>
<td>The number of products in the catalog bucketed by <code class="prettyprint">visual_search_category</code>.</td>
</tr>
<tr>
<td>num_of_images</td>
<td>The total number of images in the catalog.</td>
</tr>
<tr>
<td>num_of_images_by_category</td>
<td>The number of images in the catalog bucketed by <code class="prettyprint">visual_search_category</code>.</td>
</tr>
<tr>
<td><strong>feature_computation</strong></td>
<td>Info about feature computation.</td>
</tr>
<tr>
<td>num_of_images_error</td>
<td>The number of images for which there was some error in feature computation.</td>
</tr>
<tr>
<td>num_of_images_ignored</td>
<td>The number of images that were ignored.</td>
</tr>
<tr>
<td>num_of_images_existing</td>
<td>The number of images for which the features were already computed (in case of building a new index with new products being added).</td>
</tr>
<tr>
<td>num_of_images_processed</td>
<td>The total number of images for which the features were computed.</td>
</tr>
<tr>
<td><strong>visual_search_index</strong></td>
<td>Info about the index building.</td>
</tr>
<tr>
<td>num_of_images_missing_features</td>
<td>The number of images for which there was no feature found.</td>
</tr>
<tr>
<td>num_of_images_ignored</td>
<td>The number of images that were ignored.</td>
</tr>
<tr>
<td>num_of_images_index</td>
<td>The total number of images finally indexed.</td>
</tr>
<tr>
<td><strong>visual_search_index_by_category</strong></td>
<td>Same info as <strong>visual_search_index</strong> but bucketed by <code class="prettyprint">visual_search_category</code>.</td>
</tr>
</tbody></table>

<aside class="notice">
The bucketed fields (*_by_category) are present in the response only when the &lsquo;per_category_index&rsquo; parameter is set to &lsquo;true&rsquo; during the index building.
</aside>

<h2 id="delete-visual-search-index">Delete visual search index</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Delete the visual search index. </span>
<span class="c"># DELETE  /v1/catalog/{catalog_name}/visual_search_index</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API URL</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># HEADERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># API key</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span>
<span class="c"># Data collection opt out.</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># OPTIONAL QUERY PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># PATH PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API END POINT</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/visual_search_index'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                           <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                           <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"39.63"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"catalog_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample_catalog"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Delete the visual search index.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">DELETE /v1/catalog/{catalog_name}/visual_search_index</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>catalog_name</td>
<td>The catalog name.</td>
</tr>
<tr>
<td>deleted</td>
<td>This is <code class="prettyprint">true</code> if the index was successfully deleted.</td>
</tr>
</tbody></table>

          <h2 id="visual-browse">Visual Browse</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Visual Browse</span>
<span class="c">#</span>
<span class="c"># Get other visually similar products in the catalog.</span>
<span class="c"># GET /v1/catalog/{catalog_name}/visual_search/{id}/{image_id}</span>
<span class="c"># params - max_number_of_results</span>
<span class="c">#          per_category_index</span>
<span class="c">#          category</span>
<span class="c">#          use_cache</span>
<span class="c">#          sort_option</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API URL</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># HEADERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># API key</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span>
<span class="c"># Data collection opt out.</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># OPTIONAL QUERY PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># max_number_of_results : int, optional (default: 12)</span>
<span class="c">#</span>
<span class="c"># The maximum number of results to return. </span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">params</span><span class="p">[</span><span class="s">'max_number_of_results'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># per_category_index : str, optional (default: 'false')</span>
<span class="c">#</span>
<span class="c"># If this is set to 'true' does visual browse only in the categories specifed </span>
<span class="c"># in the data['visual_search_category'] field. </span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">params</span><span class="p">[</span><span class="s">'per_category_index'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'true'</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># category : str, optional (default: None) </span>
<span class="c">#</span>
<span class="c"># Optionally you can also spaecify a list of categories to search.</span>
<span class="c"># This is specified as a comma separated string, for example, </span>
<span class="c"># `category=tops,blouses`. The categories have to be valid </span>
<span class="c"># categories specified in the data['visual_search_category'] field.</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c">#params['category'] = 'joggers,shirt,dress'</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># use_cache : str, optional (default: 'true')</span>
<span class="c">#</span>
<span class="c"># The first time visual browse is called it caches the results.</span>
<span class="c"># On subsequent calls the API directly retrieves the results from the cache </span>
<span class="c"># unless use_cache='false'.  </span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c">#params['use_cache'] = 'false'</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># sort_option : str, optional (default: 'visual_similarity')</span>
<span class="c">#</span>
<span class="c"># 'visual_similarity'  : Results are sorted by visual similarity.</span>
<span class="c"># 'apparel_similarity' : Re-sorts the results from visual browse using </span>
<span class="c">#                        apparel similarity.</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c">#params['sort_option'] = 'apparel_similarity'</span>


<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># PATH PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="c"># The product id.</span>
<span class="nb">id</span> <span class="o">=</span><span class="s">'ABOFA15AMCWJG10449'</span>

<span class="c"># The image id.</span>
<span class="n">image_id</span> <span class="o">=</span> <span class="s">'1'</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API END POINT</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/visual_browse/</span><span class="si">%</span><span class="s">s/</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">,</span>
                                                     <span class="nb">id</span><span class="p">,</span>
                                                     <span class="n">image_id</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                        <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                        <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">url</span>
<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># FRIENDLY RESPONSE</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="k">for</span> <span class="n">product</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="s">'products'</span><span class="p">]:</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">product</span><span class="p">[</span><span class="s">'id'</span><span class="p">]</span>
    <span class="n">image_id</span> <span class="o">=</span> <span class="n">product</span><span class="p">[</span><span class="s">'image_id'</span><span class="p">]</span>
    <span class="n">score</span> <span class="o">=</span> <span class="n">product</span><span class="p">[</span><span class="s">'similarity'</span><span class="p">]</span>
    <span class="c"># Get the image_url and image_filename by querying the catalog</span>
    <span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/products/</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">,</span><span class="nb">id</span><span class="p">)</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="n">image_url</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s">'data'</span><span class="p">][</span><span class="s">'images'</span><span class="p">][</span><span class="n">image_id</span><span class="p">][</span><span class="s">'image_url'</span><span class="p">]</span>
    <span class="n">image_filename</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s">'data'</span><span class="p">][</span><span class="s">'images'</span><span class="p">][</span><span class="n">image_id</span><span class="p">][</span><span class="s">'image_filename'</span><span class="p">]</span>
    <span class="n">image_location</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/images/</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">,</span><span class="n">image_filename</span><span class="p">)</span>
    <span class="n">image_url_local</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s?api_key=</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">image_location</span><span class="p">),</span><span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">])</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'</span><span class="si">%</span><span class="s">s </span><span class="si">%</span><span class="s">s </span><span class="si">%1.2</span><span class="s">f </span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span><span class="n">image_id</span><span class="p">,</span><span class="n">score</span><span class="p">,</span><span class="n">image_url_local</span><span class="p">))</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.86"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"cache"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
 </span><span class="s2">"per_category_index"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
 </span><span class="s2">"sort_option"</span><span class="p">:</span><span class="w"> </span><span class="s2">"visual_similarity"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"visual_search_category"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="s2">"joggers"</span><span class="w">
 </span><span class="p">],</span><span class="w">
 </span><span class="s2">"products"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"visual_search_category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"joggers"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABOFA15AMCWJG10449"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"similarity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9999680509281461</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"visual_search_category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"joggers"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABOFA15AMCWJG10449"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"similarity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.6284773349761963</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"visual_search_category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"joggers"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABOFA15AMCWJG10449"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"similarity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.6199260652065277</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"visual_search_category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"joggers"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABOFA15AMCWJG10448"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"similarity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.47634875774383545</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"visual_search_category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"joggers"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABOFA15AMCWJG10448"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"similarity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.45831894874572754</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Find other similar images in the product catalog for a given image based on visual appearance.</p>

<aside class="notice">
Note that the visual search index has to be built first before we can use this API.  
</aside>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/catalog/{catalog_name}/visual_browse/{id}/{image_id}</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>path</td>
<td>(<strong>Required</strong>) The product id.</td>
<td></td>
</tr>
<tr>
<td>image_id</td>
<td>path</td>
<td>(<strong>Required</strong>) The image id.</td>
<td></td>
</tr>
<tr>
<td>max_number_of_results</td>
<td>query</td>
<td>The maximum number of results to return.</td>
<td>12</td>
</tr>
<tr>
<td>per_category_index</td>
<td>query</td>
<td>If this is set to <code class="prettyprint">true</code> does visual browse only in the categories specifed  in the <code class="prettyprint">data[&#39;visual_search_category&#39;]</code>` field.</td>
<td><code class="prettyprint">false</code></td>
</tr>
<tr>
<td>category</td>
<td>query</td>
<td>Optionally you can also spaecify a list of categories to search. This is specified as a comma separated string, for example, <code class="prettyprint">category=tops,blouses</code>. The categories have to be valid categories specified in the data[&lsquo;visual_search_category&rsquo;] field.</td>
<td></td>
</tr>
<tr>
<td>use_cache</td>
<td>query</td>
<td>The first time visual browse is called it caches the results. On subsequent requests we directly retrieve the results from the cache unless <code class="prettyprint">use_cache=false</code>.</td>
<td><code class="prettyprint">true</code></td>
</tr>
<tr>
<td>sort_option</td>
<td>query</td>
<td>The sort option to use. Can be either <code class="prettyprint">visual_similarity</code> (Results are sorted by visual similarity.) or <code class="prettyprint">apparel_similarity</code> (Re-sorts the results from visual browse using a combination of visual similarity and textual similarity based on the avaialble meta data.)</td>
<td><code class="prettyprint">visual_similarity</code></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>cache</td>
<td>Indicates whether cache was used or not.</td>
</tr>
<tr>
<td>per_category_index</td>
<td>Indicates whetehr category based visual search was used or not.</td>
</tr>
<tr>
<td>visual_search_category</td>
<td>The list of visual search categories used.</td>
</tr>
<tr>
<td>sort_option</td>
<td>The sort_option used.</td>
</tr>
<tr>
<td><strong>products</strong></td>
<td>A sorted list of other visually similar images. The first item in the list is the specified image.</td>
</tr>
<tr>
<td>image_id</td>
<td>The image id.</td>
</tr>
<tr>
<td>id</td>
<td>The product id.</td>
</tr>
<tr>
<td>similarity</td>
<td>The similarity score in the range from 0(dissimilar)  to 1(similar).</td>
</tr>
<tr>
<td>visual_search_category</td>
<td>The visual search category for the product.</td>
</tr>
</tbody></table>

<aside class="notice">
The first time the API is called the nearest neighbors are retrieved and the results are cached. On subsequent calls the API directly retrieves the results from the cache unless specified not to use the cache. The cache automatically gets invalidated whenever the index gets updated.
</aside>

          <h2 id="visual-search">Visual Search</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get visually similar products in the catalog for an uploaded image.</span>
<span class="c"># POST /v1/catalog/{catalog_name}/visual_search</span>
<span class="c"># params - max_number_of_results</span>
<span class="c">#          per_category_index</span>
<span class="c">#          categories</span>
<span class="c">#          sort_option    </span>
<span class="c">#          visual_search_categories_threshold</span>
<span class="c">#          group_by</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API URL</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># HEADERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># API key</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span>
<span class="c"># Data collection opt out.</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># OPTIONAL QUERY PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># max_number_of_results : int, optional (default: 12)</span>
<span class="c">#</span>
<span class="c"># The maximum number of results to return. </span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">params</span><span class="p">[</span><span class="s">'max_number_of_results'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">25</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># category : str, optional (default: None) </span>
<span class="c">#</span>
<span class="c"># Optionally you can also specify a list of categories to search.</span>
<span class="c"># This is specified as a comma separated string, for example, </span>
<span class="c"># `category=tops,blouses`. The categories have to be valid </span>
<span class="c"># categories specified in the data['visual_search_category'] field.</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c">#params['category'] = 'kurta,dress'</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># per_category_index : str, optional (default: 'false')</span>
<span class="c">#</span>
<span class="c"># If this is set to 'true' first predicts the visual search category for the</span>
<span class="c"># uploaded image and then does visual search with the predicted categories.</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c">#params['per_category_index'] = 'true'</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># visual_search_categories_threshold : float, optional (default: 0.0)</span>
<span class="c">#</span>
<span class="c"># Use the prdictions from the visual search categories classifier</span>
<span class="c"># only if the confidence score is greater than this value. </span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c">#params['visual_search_categories_threshold'] = 0.0</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># reweight_similarity_scores : str, optional (default: 'false')</span>
<span class="c">#</span>
<span class="c"># If true multiplies the visual similarity scores by the (normalized) category </span>
<span class="c"># classifier prediction scores.    </span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c">#params['reweight_similarity_scores'] = 'false'</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># sort_option : str, optional (default: 'visual_similarity')</span>
<span class="c">#</span>
<span class="c"># 'visual_similarity'  : Results are sorted by visual similarity.</span>
<span class="c"># 'apparel_similarity' : Re-sorts the results from using apparel similarity.</span>
<span class="c"># 'color_similarity'   : Re-sorts the results from using color similarity.</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c">#params['sort_option'] = 'apparel_similarity'</span>
<span class="c">#params['sort_option'] = 'color_similarity'</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># - group_by : str, optional (default: None)  </span>
<span class="c">#    This field can be used to group the results from visual search </span>
<span class="c">#    into distinct groups according to various criteria. </span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c">#params['group_by'] = 'color'</span>
<span class="c">#params['group_by'] = 'visual'</span>
<span class="c">#params['group_by'] = 'visual,color'</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># PATH PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API END POINT</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/visual_search'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Three options to pass the image</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="c"># OPTION 1 : Directly post the image</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'Content-Type'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'image/jpeg'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                         <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s">'test_image_3.jpeg'</span><span class="p">,</span><span class="s">'rb'</span><span class="p">))</span>

<span class="s">"""       
# OPTION 2 : Pass the image url
params['image_url'] = 'http://images.abofcdn.com/catalog/images/2015/ABOFA15AMCWJG1044901/Right_Medium.jpg'
response = requests.post(url,
                         headers=headers,
                         params=params)
"""</span>

<span class="s">"""
# OPTION 3 : using multipart
image_filename = 'test_image_2.jpeg'
with open(image_filename,'rb') as images_file:
    response = requests.post(url,
                             headers=headers,
                             params=params,
                             files={'image': (image_filename,images_file,'image/jpeg')})   
"""</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">url</span>
<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>


<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># FRIENDLY RESPONSE</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="n">image_location</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s?api_key=</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">results</span><span class="p">[</span><span class="s">'image_location'</span><span class="p">]),</span>
                                  <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s">'[user uploaded image] </span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">image_location</span><span class="p">))</span>

<span class="k">for</span> <span class="n">product</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="s">'products'</span><span class="p">]:</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">product</span><span class="p">[</span><span class="s">'id'</span><span class="p">]</span>
    <span class="n">image_id</span> <span class="o">=</span> <span class="n">product</span><span class="p">[</span><span class="s">'image_id'</span><span class="p">]</span>
    <span class="n">score</span> <span class="o">=</span> <span class="n">product</span><span class="p">[</span><span class="s">'similarity'</span><span class="p">]</span>
    <span class="c"># Get the image_url and image_filename by querying the catalog</span>
    <span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/products/</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">,</span><span class="nb">id</span><span class="p">)</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="n">image_url</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s">'data'</span><span class="p">][</span><span class="s">'images'</span><span class="p">][</span><span class="n">image_id</span><span class="p">][</span><span class="s">'image_url'</span><span class="p">]</span>
    <span class="n">image_filename</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s">'data'</span><span class="p">][</span><span class="s">'images'</span><span class="p">][</span><span class="n">image_id</span><span class="p">][</span><span class="s">'image_filename'</span><span class="p">]</span>
    <span class="n">image_location</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/images/</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">,</span><span class="n">image_filename</span><span class="p">)</span>
    <span class="n">image_url_local</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s?api_key=</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">image_location</span><span class="p">),</span><span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">])</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'</span><span class="si">%</span><span class="s">s </span><span class="si">%</span><span class="s">s </span><span class="si">%1.2</span><span class="s">f </span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span><span class="n">image_id</span><span class="p">,</span><span class="n">score</span><span class="p">,</span><span class="n">image_url_local</span><span class="p">))</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/c06f93b0-ac6f-4abc-a01f-5a59b139e0fa.jpe"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"sort_option"</span><span class="p">:</span><span class="w"> </span><span class="s2">"visual_similarity"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"563.05"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"per_category_index"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
 </span><span class="s2">"visual_search_category"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="s2">"upper"</span><span class="w">
 </span><span class="p">],</span><span class="w">
 </span><span class="s2">"visual_search_category_predictions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"upper"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9998906529487854</span><span class="p">,</span><span class="w">
  </span><span class="s2">"pant"</span><span class="p">:</span><span class="w"> </span><span class="mf">7.608256959051509e-06</span><span class="p">,</span><span class="w">
  </span><span class="s2">"dress"</span><span class="p">:</span><span class="w"> </span><span class="mf">8.080697318057176e-05</span><span class="p">,</span><span class="w">
  </span><span class="s2">"jeans"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.1917099982383661e-05</span><span class="p">,</span><span class="w">
  </span><span class="s2">"shorts"</span><span class="p">:</span><span class="w"> </span><span class="mf">4.029329622568618e-06</span><span class="w">
 </span><span class="p">},</span><span class="w">
 </span><span class="s2">"products"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"visual_search_category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"upper"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LPJNA16AMDMTE91642"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"similarity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9808963257819414</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"visual_search_category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"upper"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LPJNA16AMDMTE91642"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"similarity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.6712234914302826</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"visual_search_category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"upper"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LPJNA16AMDMTE91662"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"similarity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.6435617506504059</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"visual_search_category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"upper"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LPJNA16AMDMTE91662"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"similarity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5532491207122803</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"visual_search_category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"upper"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SKLTS16AMCWSH8SH20"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"similarity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.534146636724472</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Find other similar images in the product catalog for a given uploaded image based on visual appearance.</p>

<aside class="notice">
Note that the visual search index has to be built first before we can use this API.  
</aside>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">POST /v1/catalog/{catalog_name}/visual_search</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>data</td>
<td>image/jpeg</td>
<td>(<strong>Required</strong>) The image. The image can be in PNG, JPEG, BMP, or GIF.</td>
<td></td>
</tr>
<tr>
<td>max_number_of_results</td>
<td>query</td>
<td>maximum number of results to return</td>
<td>12</td>
</tr>
<tr>
<td>category</td>
<td>query</td>
<td>Optionally you can also specify a list of categories to search. This is specified as a comma separated string, for example, <code class="prettyprint">category=tops,blouses</code>. The categories have to be valid categories specified in the <code class="prettyprint">data[&#39;visual_search_category&#39;]</code>` field.</td>
<td></td>
</tr>
<tr>
<td>per_category_index</td>
<td>query</td>
<td>If this is set to <code class="prettyprint">true</code> first predicts the visual search category for the uploaded image and then does visual search with the predicted categories.</td>
<td><code class="prettyprint">false</code></td>
</tr>
<tr>
<td>visual_search_categories_threshold</td>
<td>query</td>
<td>Use the predictions from the visual search categories classifier only if the confidence score is greater than this value.</td>
<td>0.0</td>
</tr>
<tr>
<td>reweight_similarity_scores</td>
<td>query</td>
<td>If <code class="prettyprint">true</code> multiplies the visual similarity scores by the (normalized) category classifier prediction scores.</td>
<td><code class="prettyprint">false</code></td>
</tr>
<tr>
<td>sort_option</td>
<td>query</td>
<td>The sort option to use. Can be either <code class="prettyprint">visual_similarity</code> (Results are sorted by visual similarity.) or <code class="prettyprint">apparel_similarity</code> (Re-sorts the results using a combination of visual similarity and textual similarity based on the avaialble meta data.) or <code class="prettyprint">color_similarity</code> (Re-sorts the results using a combination of visual similarity and color similarity based on the avaialble meta data.).</td>
<td><code class="prettyprint">visual_similarity</code></td>
</tr>
<tr>
<td>group_by</td>
<td>query</td>
<td>This field can be used to group the results from visual search into distinct groups according to various criteria. This is specfied as a comma separated string, for example, <code class="prettyprint">group_by=color,pattern</code>. This would group results with similar color and pattern into a distinct group. The group is accessed by the field <code class="prettyprint">group_id</code> in the results. Note that the field has to be a valid field avaialble in the product json. There is also a special field called <code class="prettyprint">visual</code> which uses the total visual apprarance to group the reuslts rather than one specific attribute, for example, <code class="prettyprint">group_by=visual,color</code>. In order to use this feature <code class="prettyprint">group_by</code> should also be set to <code class="prettyprint">true</code> when building the visual search index. The final set of returned results are sorted by the group size. This is currently an experimental feature and following are the suggested values to try are <code class="prettyprint">group_by=visual</code>,<code class="prettyprint">group_by=color</code> and <code class="prettyprint">group_by=visual,color</code>.</td>
<td></td>
</tr>
</tbody></table>

<aside class="notice">
The last two parameters (per_category_index  and visual_search_categories_threshold) are to be used when the visual search categories are predicted using the visual search categories classifier.
</aside>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>image_location</td>
<td>The path to the user uploaded image. This is not avaiable if you set the <code class="prettyprint">X-Data-Collection-Opt-Out</code> header parameter to <code class="prettyprint">true</code>.</td>
</tr>
<tr>
<td><strong>products</strong></td>
<td>A sorted list of other visually similar images.</td>
</tr>
<tr>
<td>image_id</td>
<td>The image id.</td>
</tr>
<tr>
<td>id</td>
<td>The product id.</td>
</tr>
<tr>
<td>similarity</td>
<td>The similarity score in the range from 0(dissimilar)  to 1 (similar).</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>image_location</td>
<td>The path to the user uploaded image. This is not avaiable if you set the <code class="prettyprint">X-Data-Collection-Opt-Out</code> header parameter to <code class="prettyprint">true</code>.</td>
</tr>
<tr>
<td>per_category_index</td>
<td>Indicates whetehr category based visual search was used or not.</td>
</tr>
<tr>
<td>visual_search_category</td>
<td>The list of visual search categories used.</td>
</tr>
<tr>
<td>visual_search_category_predictions</td>
<td>The top-5 predictions from the visual search category classifier.</td>
</tr>
<tr>
<td><strong>products</strong></td>
<td>A sorted list of other visually similar images. The first item in the list is the specified image.</td>
</tr>
<tr>
<td>image_id</td>
<td>The image id.</td>
</tr>
<tr>
<td>id</td>
<td>The product id.</td>
</tr>
<tr>
<td>similarity</td>
<td>The similarity score in the range from 0(dissimilar)  to 1(similar).</td>
</tr>
<tr>
<td>visual_search_category</td>
<td>The visual search category for the product.</td>
</tr>
</tbody></table>

          <h1 id="category-visual-search">(Category) Visual Search ++</h1>

<p>Visual search supports a field called <code class="prettyprint">visual_search_category</code> which allows us to build a separate visual search for each category. The earlier set of APIs allows the user to specify this field manually and duing query the user has to specify the category interested in along with the image.</p>

<p>The APIs below use a pre-trained classifier to automatically predict the visual search category based on the product images. During search when the user uploads an image we use the category classifier to automatically predict the category and then do visual search using the appropriate index.</p>

<h2 id="predict-categories">Predict categories</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Predict the visual search categories based on product images</span>
<span class="c"># POST /v1/catalog/{catalog_name}/predict/visual_search_categories</span>
<span class="c"># params - clear_cache</span>
<span class="c">#          ignore_non_primary_images</span>
<span class="c">#          visual_search_categories_threshold</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API URL</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># HEADERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># API key</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span>
<span class="c"># Data collection opt out.</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># OPTIONAL QUERY PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># clear_cache : str, optional (default: false)</span>
<span class="c">#</span>
<span class="c"># If 'visual_search_category' is already present in the product then</span>
<span class="c"># we do not change it unless clear_cache=ture.</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">params</span><span class="p">[</span><span class="s">'clear_cache'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'true'</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># ignore_non_primary_images : str, optional (default: false)</span>
<span class="c">#</span>
<span class="c"># If true uses only the primary images (specified in the field </span>
<span class="c"># data['images'][image_id]['image_type'] = 'primary') and </span>
<span class="c"># ignores all other images.</span>
<span class="c"># If false uses all the available images for the product.</span>
<span class="c"># All images with data['images'][image_id]['ignore'] = 'yes' </span>
<span class="c"># are ignored.</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c">#params['ignore_non_primary_images'] = 'false'</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># visual_search_categories_threshold : float, optional (default: 0.0)</span>
<span class="c">#</span>
<span class="c"># Use the predictions from the visual search categories classifier</span>
<span class="c"># only if the confidence score is greate than this value. </span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c">#params['visual_search_categories_threshold'] = 0.15</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># PATH PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API END POINT</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/predict/visual_search_categories'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                         <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"starting"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"num_of_products"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-06-21 14:52:17.252757"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"prediction"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"num_of_images_error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_existing"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_processed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"finish_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNK"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"num_of_images"</span><span class="p">:</span><span class="w"> </span><span class="s2">"38"</span><span class="w">
 </span><span class="p">},</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.68"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"catalog_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample_catalog"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Predict the visual search categories based on product images</p>

<p>This API uses a pre-trained classifier to automatically predict the visual search category based on the product images. The predicted visual search catgories are populated in the field <code class="prettyprint">data[&#39;visual_search_category&#39;]</code>. Once you ingest the catalog you will call this API to populate the &lsquo;visual_search_category&rsquo; field and then proceed with building the visual search index.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">POST /v1/catalog/{catalog_name}/predict/visual_search_categories</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>clear_cache</td>
<td>query</td>
<td>If <code class="prettyprint">visual_search_category</code> is already present in the product then we do not change it unless <code class="prettyprint">clear_cache=true</code>.</td>
<td><code class="prettyprint">false</code></td>
</tr>
<tr>
<td>ignore_non_primary_images</td>
<td>query</td>
<td>If <code class="prettyprint">true</code> uses only the primary images (specified in the field <code class="prettyprint">data[&#39;images&#39;][image_id][&#39;image_type&#39;] = &#39;primary&#39;</code>) and ignores all other images. If <code class="prettyprint">false</code> uses all the available images for the product. All images with <code class="prettyprint">data[&#39;images&#39;][image_id][&#39;ignore&#39;] = &#39;yes&#39;</code>  are ignored.</td>
<td><code class="prettyprint">false</code></td>
</tr>
<tr>
<td>visual_search_categories_threshold</td>
<td>query</td>
<td>Use the predictions from the visual search categories classifier only if the confidence score is greate than this value.</td>
<td>0.0</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>catalog_name</td>
<td>The catalog name.</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td>A json containing various info about the current status of the prediction.</td>
</tr>
<tr>
<td>status</td>
<td>The current status of the prediction. The status can be one of <code class="prettyprint">starting</code>,<code class="prettyprint">&#39;predicting_visual_search_categories&#39;</code>,or <code class="prettyprint">done</code>. The prediction is done when the status becomes <code class="prettyprint">done</code>.</td>
</tr>
<tr>
<td>start_time</td>
<td>The time when started.</td>
</tr>
<tr>
<td>finish_time</td>
<td>The time when finished.</td>
</tr>
<tr>
<td>num_of_products</td>
<td>The total number of products in the catalog.</td>
</tr>
<tr>
<td>num_of_images</td>
<td>The total number of images in the catalog.</td>
</tr>
<tr>
<td><strong>prediction</strong></td>
<td>Info about prediction.</td>
</tr>
<tr>
<td>num_of_images_error</td>
<td>The number of images for which there was some error.</td>
</tr>
<tr>
<td>num_of_images_ignored</td>
<td>The number of images that were ignored.</td>
</tr>
<tr>
<td>num_of_images_existing</td>
<td>The number of images for which the predictions were already computed (in case of building a new index with new products being added).</td>
</tr>
<tr>
<td>num_of_images_processed</td>
<td>The total number of images for which the predictions were computed.</td>
</tr>
</tbody></table>

<aside class="notice">
This is a one time long running operation. Currently it takes around 250-500 milliseconds for one image on a CPU instance. Depending on your catalog size you will have to wait till prediction is completed to start building the visual search index. You can query the status of the index creation using the GET endpoint. The index is built when the status changes to `done`
</aside>

<aside class="notice">
Any time you add new product or images to the catalog you will have to call this API again to add the predictions for the new products.
</aside>

<h2 id="get-status">Get status</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get the status of the visual search categories prediction</span>
<span class="c"># GET /v1/catalog/{catalog_name}/predict/visual_search_categories</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API URL</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># HEADERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># API key</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span>
<span class="c"># Data collection opt out.</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># OPTIONAL QUERY PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># PATH PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API END POINT</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/predict/visual_search_categories'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                        <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                        <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"done"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"num_of_products"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-06-21 14:52:17.252757"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"prediction"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"num_of_images_error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_existing"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_processed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"28"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"finish_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-06-21 14:52:28.204947"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"num_of_images"</span><span class="p">:</span><span class="w"> </span><span class="s2">"38"</span><span class="w">
 </span><span class="p">},</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.20"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"catalog_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample_catalog"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get the status of the visual search categories prediction</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/catalog/{catalog_name}/predict/visual_search_categories</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>catalog_name</td>
<td>The catalog name.</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td>A json containing various info about the current status of the prediction.</td>
</tr>
<tr>
<td>status</td>
<td>The current status of the prediction. The status can be one of <code class="prettyprint">starting</code>,<code class="prettyprint">&#39;predicting_visual_search_categories&#39;</code>,or <code class="prettyprint">done</code>. The prediction is done when the status becomes <code class="prettyprint">done</code>.</td>
</tr>
<tr>
<td>start_time</td>
<td>The time when started.</td>
</tr>
<tr>
<td>finish_time</td>
<td>The time when finished.</td>
</tr>
<tr>
<td>num_of_products</td>
<td>The total number of products in the catalog.</td>
</tr>
<tr>
<td>num_of_images</td>
<td>The total number of images in the catalog.</td>
</tr>
<tr>
<td><strong>prediction</strong></td>
<td>Info about prediction.</td>
</tr>
<tr>
<td>num_of_images_error</td>
<td>The number of images for which there was some error.</td>
</tr>
<tr>
<td>num_of_images_ignored</td>
<td>The number of images that were ignored.</td>
</tr>
<tr>
<td>num_of_images_existing</td>
<td>The number of images for which the predictions were already computed (in case of building a new index with new products being added).</td>
</tr>
<tr>
<td>num_of_images_processed</td>
<td>The total number of images for which the predictions were computed.</td>
</tr>
</tbody></table>

<h2 id="get-categories">Get categories</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get all visual search categories </span>
<span class="c"># GET /v1/catalog/{catalog_name}/visual_search_categories</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API URL</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># HEADERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># API key</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]</span>
<span class="c"># Data collection opt out.</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Data-Collection-Opt-Out'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># OPTIONAL QUERY PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># PATH PARAMETERS</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># API END POINT</span>
<span class="c">#------------------------------------------------------------------------------</span>
<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/visual_search_categories'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                        <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                        <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6.33"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"counts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"num_of_products"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
  </span><span class="s2">"num_of_products_by_category"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"upper"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
   </span><span class="s2">"outer"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
   </span><span class="s2">"dress"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pant"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"num_of_images"</span><span class="p">:</span><span class="w"> </span><span class="mi">38</span><span class="p">,</span><span class="w">
  </span><span class="s2">"num_of_images_by_category"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"upper"</span><span class="p">:</span><span class="w"> </span><span class="mi">23</span><span class="p">,</span><span class="w">
   </span><span class="s2">"outer"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
   </span><span class="s2">"dress"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pant"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">},</span><span class="w">
 </span><span class="s2">"categories"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="s2">"upper"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"pant"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"dress"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"outer"</span><span class="w">
 </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get all visual search categories </p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/catalog/{catalog_name}/visual_search_categories</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>categories</td>
<td>The visual search categories.</td>
</tr>
<tr>
<td>counts</td>
<td>The counts of the visual search categories.</td>
</tr>
</tbody></table>

          <h1 id="natural-language-search">Natural Language Search</h1>

<p>The Natural Language Search (NLS) for fashion allows the user to search a fashion e-commerce catalog using complex <strong>natural language queries</strong>. Below are a few sample queries that NLS can handle:</p>

<ul>
<li><em>Show me some black graphic print cotton tees under 1k in small size on sale.</em></li>
<li><em>Can you show me some red dresses for my girlfriend for around 100 dollars ?</em></li>
<li><em>Show me some red mandarin collar shirts.</em></li>
<li><em>Show me some edgy longline tees for a party tonight.</em></li>
</ul>

<p>NLS enables the user to query the product catalog in a more natural language as you would have a conversation with seasoned sales assistant. This functionality enables a user to ask his query (requirements) in a more natural manner than the conventional keywords and filter based search. NLS can be seen as replacement for conventional search based on filters and a precursor to a full conversation system. NLS will work on existing product text attributes in product catalog. </p>

<p>Following is a list of some of the features that NLS supports:</p>

<ol>
<li><p><strong>Leverages the underlying IBM Fashion Taxonomy</strong> : NLS is heavily tuned for the fashion domain and leverages the underlying IBM fashion taxonomy. IBM fashion taxonomy is a semi-automatically curated comprehensive hierarchical fashion taxonomy for apparel,footwear, and accessories along with their attributes and relations. The taxonomy is curated from several fashion resources and then hand tuned by domain experts. This enables NLS to a very nuanced understanding of user requirements in the domain of fashion.</p></li>
<li><p><strong>Understands various fashion attributes and user constraints</strong> : NLS is grounded in the fashion taxonomy and can understand various attributes in the query such as gender, category name (apparel,shoes,accessories), color, pattern/print, fabric/material, brand, price, size, occasion, sale/discount other category specific attributes (like sleeves, collar, etc.). NLS  can understand all the constraints on user requirements even when they are expressed in a very natural manner in the form of long complex natural language queries (e.g. Show me red floral dresses for my niece under 1k on sale.).</p></li>
<li><p><strong>Internally handles query synonyms</strong> : IBM Fashion taxonomy is used to map segments of user utterances to nodes in the Fashion taxonomy. This mapping enables understanding of fashion concepts even when they are expressed in many different ways. For example, the user may search for a tee whereas the item may be tagged as a t-shirt in the catalog. NLS understands various synonyms and also common query words for different apparel and accessories.</p></li>
<li><p><strong>Appropriate semantic query back off</strong> : The NLS capability allows showing relevant results to a user query even when there are no enough products that exactly matches with the user requirements. For example, if there are no red floral dresses in the catalog then NLS has a built in back-off strategy that removes attributes (along with color expansion and similar brands substitution) till it finds sufficient number of products. For example, in this case it would first back off to orange/tomato/red floral dresses and then to red dresses and eventually to dresses.</p></li>
<li><p><strong>Color Substitution</strong> : If the user searches for a specific color (say &lsquo;golden colored dresses&rsquo;) and that particular color is not available then we search for other color that look very similar (for example, yellow, yellow green, khaki etc.). The IBM Fashion Taxonomy also includes a detailed taxonomy specific to colors and their corresponding names. Is also provides a notion of visual semantic distance between two colors.</p></li>
<li><p><strong>Brand Substitution</strong> : A similar back-off strategy is incorporated for a limited set of brands. If the user searches for a specific brand (say adidas shoes) and that particular brand is not available then we search for other similar brands (for example, puma shoes). The notion is brand similarity is based on the visual appearance of products and is computed using our visual similarity asset.</p></li>
<li><p><strong>Spelling and phonetic corrections tuned to fashion taxonomy</strong> : Users usually make mistakes when searching with natural language queries. NLS can handles common spelling mistakes in a user query. The spelling correction module is aware of all the fashion related concepts and brands.</p></li>
<li><p><strong>Themes and collections capsules</strong> : NLS offers limited support for search related to themes and collections (e.g. athleisure, monochrome, indigo, ethnic etc. ). We automatically curate the set of apparel, accessories and their attributes that define a fashion theme from various fashion blogs and when the user searches for a theme (say athleisure) then we show items from the catalog that are relevant to that theme.</p></li>
<li><p><strong>Dynamically evolving fashion taxonomy</strong> : Fashion evolves constantly and hence IBM fashion taxonomy is dynamically updated at regular intervals to include the current fashion terms and trends. Since NLS is delivered as a REST API the user will always have access to the latest fashion taxonomy.</p></li>
</ol>

<h2 id="natural-language-search">Natural Language Search</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Natural Language Search </span>
<span class="c"># GET /v1/catalog/{catalog_name}/natural_language_search</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="s">'sample_catalog'</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/natural_language_search'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">params</span><span class="p">[</span><span class="s">'query_text'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'Watson show me some shrigs for my neice'</span>
<span class="c"># Optional parameters.</span>
<span class="n">params</span><span class="p">[</span><span class="s">'max_number_of_results'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">12</span>
<span class="n">params</span><span class="p">[</span><span class="s">'max_number_of_backoffs'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span><span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="c"># Get more info about the relevant results</span>
<span class="k">for</span> <span class="n">product</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s">'products'</span><span class="p">]:</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">product</span><span class="p">[</span><span class="s">'id'</span><span class="p">]</span>
    <span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/products/</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">,</span><span class="nb">id</span><span class="p">)</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'</span><span class="si">%</span><span class="s">s </span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s">'data'</span><span class="p">][</span><span class="s">'name'</span><span class="p">]))</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18.14"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"products"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20DRA16FWCWHL9015309"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"backoff_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20DRA16FWCWPP9014709"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"backoff_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Search the product catalog using a natural language query (e.g. <code class="prettyprint">Show me some black graphic print tees on sale.</code>).</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/catalog/{catalog_name}/natural_language_search</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>query_text</td>
<td>query</td>
<td>(<strong>Required</strong>) The natural language search query. (e.g. <code class="prettyprint">Show me some red graphic print tees under 1k.</code>`)</td>
<td></td>
</tr>
<tr>
<td>max_number_of_results</td>
<td>query</td>
<td>The maximum number of results to return.</td>
<td>12</td>
</tr>
<tr>
<td>max_number_of_backoffs</td>
<td>query</td>
<td>The maximum number of backoffs to use if there are no exact matches. Set this to 0 if you do not want any backoffs.</td>
<td>5</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td><strong>products</strong></td>
<td>A sorted list of products in the catalog relevant to the query.</td>
</tr>
<tr>
<td>id</td>
<td>The id of the product.</td>
</tr>
<tr>
<td>backoff_number</td>
<td>An integer specifying if backoff was used for retrieving this result. (0 corresponds to no backoff, 1 corresponds to backoff once and so on)</td>
</tr>
</tbody></table>

<h2 id="get-elasticsearch-queries">Get elasticsearch queries</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># elasticsearch queries </span>
<span class="c"># GET /v1/natural_language_search/elasticsearch_queries</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/natural_language_search/elasticsearch_queries'</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">params</span><span class="p">[</span><span class="s">'query_text'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'Show me some peach graphic print tees for my neice under 1k on sale.'</span>
<span class="c"># Optional parameters.</span>
<span class="n">params</span><span class="p">[</span><span class="s">'max_number_of_results'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">12</span>
<span class="n">params</span><span class="p">[</span><span class="s">'max_number_of_backoffs'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span><span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6.35"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"elasticsearch_queries"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="s2">"sort"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"sale_price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"order"</span><span class="p">:</span><span class="w"> </span><span class="s2">"desc"</span><span class="p">}}],</span><span class="w"> </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"bool"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"minimum_should_match"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s2">"filter"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"bool"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"must"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"range"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"sale_price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"lte"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">}}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"range"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"sale_price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"gte"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">}}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"terms"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"gender"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"women"</span><span class="p">]}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"term"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"out_of_stock"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no"</span><span class="p">}}]}}],</span><span class="w"> </span><span class="s2">"should"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"multi_match"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"t-shirt"</span><span class="p">,</span><span class="w"> </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"phrase"</span><span class="p">,</span><span class="w"> </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"category^2.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"name^1.0"</span><span class="p">]}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"multi_match"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tee"</span><span class="p">,</span><span class="w"> </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"phrase"</span><span class="p">,</span><span class="w"> </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"category^2.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"name^1.0"</span><span class="p">]}}],</span><span class="w"> </span><span class="s2">"must"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"multi_match"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"red"</span><span class="p">,</span><span class="w"> </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"phrase"</span><span class="p">,</span><span class="w"> </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"color^5.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"name^1.0"</span><span class="p">]}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"bool"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"minimum_should_match"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s2">"should"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"multi_match"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"graphic"</span><span class="p">,</span><span class="w"> </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"phrase"</span><span class="p">,</span><span class="w"> </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"pattern^5.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"name^2.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"description^1.0"</span><span class="p">]}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"multi_match"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"printed"</span><span class="p">,</span><span class="w"> </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"phrase"</span><span class="p">,</span><span class="w"> </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"pattern^5.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"name^2.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"description^1.0"</span><span class="p">]}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"multi_match"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"print"</span><span class="p">,</span><span class="w"> </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"phrase"</span><span class="p">,</span><span class="w"> </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"pattern^5.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"name^2.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"description^1.0"</span><span class="p">]}}]}}]}},</span><span class="w"> </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">},</span><span class="w"> 
  </span><span class="p">{</span><span class="s2">"sort"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"sale_price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"order"</span><span class="p">:</span><span class="w"> </span><span class="s2">"desc"</span><span class="p">}}],</span><span class="w"> </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"bool"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"minimum_should_match"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s2">"filter"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"bool"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"must"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"range"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"sale_price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"lte"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">}}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"range"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"sale_price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"gte"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">}}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"terms"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"gender"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"women"</span><span class="p">]}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"term"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"out_of_stock"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no"</span><span class="p">}}]}}],</span><span class="w"> </span><span class="s2">"should"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"multi_match"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"t-shirt"</span><span class="p">,</span><span class="w"> </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"phrase"</span><span class="p">,</span><span class="w"> </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"category^2.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"name^1.0"</span><span class="p">]}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"multi_match"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tee"</span><span class="p">,</span><span class="w"> </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"phrase"</span><span class="p">,</span><span class="w"> </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"category^2.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"name^1.0"</span><span class="p">]}}],</span><span class="w"> </span><span class="s2">"must"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"bool"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"minimum_should_match"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s2">"should"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"multi_match"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tomato"</span><span class="p">,</span><span class="w"> </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"phrase"</span><span class="p">,</span><span class="w"> </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"color^5.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"name^1.0"</span><span class="p">]}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"multi_match"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"orange"</span><span class="p">,</span><span class="w"> </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"phrase"</span><span class="p">,</span><span class="w"> </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"color^5.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"name^1.0"</span><span class="p">]}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"multi_match"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"red"</span><span class="p">,</span><span class="w"> </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"phrase"</span><span class="p">,</span><span class="w"> </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"color^5.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"name^1.0"</span><span class="p">]}}]}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"bool"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"minimum_should_match"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s2">"should"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"multi_match"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"graphic"</span><span class="p">,</span><span class="w"> </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"phrase"</span><span class="p">,</span><span class="w"> </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"pattern^5.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"name^2.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"description^1.0"</span><span class="p">]}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"multi_match"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"printed"</span><span class="p">,</span><span class="w"> </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"phrase"</span><span class="p">,</span><span class="w"> </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"pattern^5.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"name^2.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"description^1.0"</span><span class="p">]}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"multi_match"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"print"</span><span class="p">,</span><span class="w"> </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"phrase"</span><span class="p">,</span><span class="w"> </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"pattern^5.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"name^2.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"description^1.0"</span><span class="p">]}}]}}]}},</span><span class="w"> </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">},</span><span class="w"> 
  </span><span class="p">{</span><span class="s2">"sort"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"sale_price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"order"</span><span class="p">:</span><span class="w"> </span><span class="s2">"desc"</span><span class="p">}}],</span><span class="w"> </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"bool"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"minimum_should_match"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s2">"filter"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"bool"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"must"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"range"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"sale_price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"lte"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">}}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"range"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"sale_price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"gte"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">}}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"terms"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"gender"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"women"</span><span class="p">]}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"term"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"out_of_stock"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no"</span><span class="p">}}]}}],</span><span class="w"> </span><span class="s2">"must"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"multi_match"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"red"</span><span class="p">,</span><span class="w"> </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"phrase"</span><span class="p">,</span><span class="w"> </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"color^5.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"name^1.0"</span><span class="p">]}}],</span><span class="w"> </span><span class="s2">"should"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"multi_match"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"t-shirt"</span><span class="p">,</span><span class="w"> </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"phrase"</span><span class="p">,</span><span class="w"> </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"category^2.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"name^1.0"</span><span class="p">]}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"multi_match"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tee"</span><span class="p">,</span><span class="w"> </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"phrase"</span><span class="p">,</span><span class="w"> </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"category^2.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"name^1.0"</span><span class="p">]}}]}},</span><span class="w"> </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">},</span><span class="w"> 
  </span><span class="p">{</span><span class="s2">"sort"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"sale_price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"order"</span><span class="p">:</span><span class="w"> </span><span class="s2">"desc"</span><span class="p">}}],</span><span class="w"> </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"bool"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"filter"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"bool"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"must"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"range"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"sale_price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"lte"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">}}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"range"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"sale_price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"gte"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">}}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"terms"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"gender"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"women"</span><span class="p">]}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"term"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"out_of_stock"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no"</span><span class="p">}}]}}],</span><span class="w"> </span><span class="s2">"minimum_should_match"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s2">"should"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"multi_match"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"t-shirt"</span><span class="p">,</span><span class="w"> </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"phrase"</span><span class="p">,</span><span class="w"> </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"category^2.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"name^1.0"</span><span class="p">]}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"multi_match"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tee"</span><span class="p">,</span><span class="w"> </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"phrase"</span><span class="p">,</span><span class="w"> </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"category^2.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"name^1.0"</span><span class="p">]}}]}},</span><span class="w"> </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">},</span><span class="w"> 
  </span><span class="p">{</span><span class="s2">"sort"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"sale_price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"order"</span><span class="p">:</span><span class="w"> </span><span class="s2">"desc"</span><span class="p">}}],</span><span class="w"> </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"bool"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"minimum_should_match"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s2">"filter"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"bool"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"must"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"range"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"sale_price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"lte"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">}}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"range"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"sale_price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"gte"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">}}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"terms"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"gender"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"women"</span><span class="p">]}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"term"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"out_of_stock"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no"</span><span class="p">}}]}}],</span><span class="w"> </span><span class="s2">"should"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"multi_match"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"graphic"</span><span class="p">,</span><span class="w"> </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"phrase"</span><span class="p">,</span><span class="w"> </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"pattern^5.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"name^2.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"description^1.0"</span><span class="p">]}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"multi_match"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"printed"</span><span class="p">,</span><span class="w"> </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"phrase"</span><span class="p">,</span><span class="w"> </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"pattern^5.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"name^2.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"description^1.0"</span><span class="p">]}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"multi_match"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"print"</span><span class="p">,</span><span class="w"> </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"phrase"</span><span class="p">,</span><span class="w"> </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"pattern^5.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"name^2.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"description^1.0"</span><span class="p">]}}],</span><span class="w"> </span><span class="s2">"must"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"multi_match"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"knit shirt"</span><span class="p">,</span><span class="w"> </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"phrase"</span><span class="p">,</span><span class="w"> </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"category^2.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"name^1.0"</span><span class="p">]}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"multi_match"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"red"</span><span class="p">,</span><span class="w"> </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"phrase"</span><span class="p">,</span><span class="w"> </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"color^5.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"name^1.0"</span><span class="p">]}}]}},</span><span class="w"> </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">},</span><span class="w"> 
  </span><span class="p">{</span><span class="s2">"sort"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"sale_price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"order"</span><span class="p">:</span><span class="w"> </span><span class="s2">"desc"</span><span class="p">}}],</span><span class="w"> </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"bool"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"filter"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"bool"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"must"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"range"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"sale_price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"lte"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">}}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"range"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"sale_price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"gte"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">}}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"terms"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"gender"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"women"</span><span class="p">]}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"term"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"out_of_stock"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no"</span><span class="p">}}]}}],</span><span class="w"> </span><span class="s2">"must"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"multi_match"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"knit shirt"</span><span class="p">,</span><span class="w"> </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"phrase"</span><span class="p">,</span><span class="w"> </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"category^2.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"name^1.0"</span><span class="p">]}},</span><span class="w"> </span><span class="p">{</span><span class="s2">"multi_match"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"red"</span><span class="p">,</span><span class="w"> </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"phrase"</span><span class="p">,</span><span class="w"> </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"color^5.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"name^1.0"</span><span class="p">]}}]}},</span><span class="w"> </span><span class="s2">"from"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<aside class="notice">
The next set of natural language search APIs are genric APIs in that they do not depend on the product catalog.
</aside>

<p>Parse any fashion related query (e.g. <code class="prettyprint">Show me some red graphic print tees for my neice under 1k on sale.</code>) in natural language and return a list of elasticsearch queries in the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html">query DSL format</a>.  The queries are ordered from specific to general queries. The suggested usage is to first fire the first query. If there are no sufficient results then fire the next query and so on. The queries use the field names as specified in the <a href="#product-json-format">product JSON format</a>.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/natural_language_search/elasticsearch_queries</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>query_text</td>
<td>query</td>
<td>(<strong>Required</strong>) The natural language search query. (e.g. <code class="prettyprint">Show me some red graphic print tees for my neice under 1k on sale.</code>)</td>
<td></td>
</tr>
<tr>
<td>max_number_of_results</td>
<td>query</td>
<td>The maximum number of results to return.</td>
<td>12</td>
</tr>
<tr>
<td>max_number_of_backoffs</td>
<td>query</td>
<td>The maximum number of backoffs to use if there are no exact matches. Set this to 0 if you do not want any backoffs.</td>
<td>5</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>elasticsearch_queries</td>
<td>A list of elasticsearch queries (ordered from specific to general) in the <a href="(https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html)">query DSL format</a>.</td>
</tr>
</tbody></table>

<h2 id="parse-fashion-query-text">Parse fashion query/text</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Parse fashion query/text. </span>
<span class="c"># GET /v1/natural_language_search/parse</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/natural_language_search/parse'</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">params</span><span class="p">[</span><span class="s">'query_text'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'Show me some red graphic print tees for my neice under 1k on sale.'</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span><span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"parse"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"apparel"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
     </span><span class="s2">"t-shirt"</span><span class="p">,</span><span class="w">
     </span><span class="s2">"tee"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"hypernyms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
     </span><span class="s2">"knit shirt"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tee"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"hyponyms"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"color"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
     </span><span class="p">{</span><span class="w">
      </span><span class="s2">"similar_colors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
       </span><span class="s2">"red"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"tomato"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"orange"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
       </span><span class="s2">"red"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"red"</span><span class="w">
     </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"pattern"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
     </span><span class="p">{</span><span class="w">
      </span><span class="s2">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
       </span><span class="s2">"graphic"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"graphic"</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="p">{</span><span class="w">
      </span><span class="s2">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
       </span><span class="s2">"printed"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"print"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"print"</span><span class="w">
     </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rupee"</span><span class="p">,</span><span class="w">
     </span><span class="s2">"upper_limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
     </span><span class="s2">"lower_limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
     </span><span class="s2">"sale_percentage_lower_limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"remaining_tokens"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
   </span><span class="s2">"gender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"female"</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">],</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.85"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Given any natural language fashion query this endpoint parses the query and returns an intermediate structured parse of the query.</p>

<aside class="notice">
The structured parse is grounded in the fashion taxonomy and can understand various apparel/accessory names and their corresponding attributes like gender, category name (apparel,shoes,accessories), color, pattern/print, fabric/material, brand, price (can handle under, above, around and currency denotations.), size, occasion, sale/discount and other category specific attributes defined by the fashion taxonomy. The structured parse is also enriched using the fashion taxonomy to include synonyms for apparel terms, hyponyms (any its synonyms) for apparel terms, synonyms for attribute terms, hypernyms for query-backoff and other similar color and brand names.
</aside>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/natural_language_search/parse</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>query_text</td>
<td>query</td>
<td>(<strong>Required</strong>) The natural language search query. (e.g. <code class="prettyprint">Show me some red graphic print tees for my neice under 1k on sale.</code>)</td>
<td></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>parse</td>
<td>A list of structured parse of the natural language query grounded in the fashion taxonomy (see the sample json).  For gender agnostic queries returns two parses one for each gender. If the text contains multiple apparel returns one parse for each apparel.</td>
</tr>
</tbody></table>

<h2 id="get-search-terms">Get search terms</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get search terms. </span>
<span class="c"># GET /v1/natural_language_search/search_terms</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/natural_language_search/search_terms'</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">params</span><span class="p">[</span><span class="s">'query_text'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'Show me some red graphic print tees for my neice under 1k on sale.'</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span><span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.13"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"search_terms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"apparel"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"t-shirt"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tee"</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"color"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"red"</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pattern"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"graphic"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"printed"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"print"</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"apparel_hypernyms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"knit shirt"</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"similar_colors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"tomato"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"orange"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"red"</span><span class="w">
   </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Parse a fashion related natural language query and generate search terms for its constituent apparel and various attributes. These search terms are used to compose the final elasticsearch/solr query and includes synonyms and hyponyms for the apparel and attributes.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/natural_language_search/search_terms</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>query_text</td>
<td>query</td>
<td>(<strong>Required</strong>) The natural language search query. (e.g. <code class="prettyprint">Show me some red graphic print tees for my neice under 1k on sale.</code>)</td>
<td></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>search_terms</td>
<td>A list of search terms corresponding to each parse.</td>
</tr>
</tbody></table>

<h2 id="spelling-correction">Spelling Correction</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Spelling correction. </span>
<span class="c"># GET /v1/natural_language_search/spell_correct</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/natural_language_search/spell_correct'</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">params</span><span class="p">[</span><span class="s">'query_text'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'show me some purlep floaral dreses for my wife'</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span><span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.24"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"corrected_text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"show me some purple floral dress for my wife"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Correct any spelling mistakes in the query. This is a lightweight spelling correction module that is tuned to the fasion taxonomy.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/natural_language_search/spell_correct</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>query_text</td>
<td>query</td>
<td>(<strong>Required</strong>) The natural language search query. (e.g. <code class="prettyprint">show me some purlep floaral dreses for my wife.</code>)</td>
<td></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>corrected_text</td>
<td>The text with the spelling corrected.</td>
</tr>
</tbody></table>

          <h1 id="visual-attributes">Visual Attributes</h1>

<p>Given a fashion image (containing apparel,accessories,or footwear) identify the main product <strong>category</strong> along with the different <strong>attributes</strong>. The category and attributes are grounded in a standardized fashion taxonomy. </p>

<p>Some use cases for visual attributes include:</p>

<ul>
<li>Auto-attribution of catalog images.</li>
<li>Catalog enrichment for a better text search.</li>
<li>Post-filtering of visual search results.</li>
</ul>

<aside class="notice">
We differentiate between two kinds of images. Iconic images are mainly single product images where the image is loosely focused only on the main apparel, footwear or accessory. Non-Iconic are mainly multiple product images where the image contains multiple apparel, footwear and accessories. Non-Iconic images are typically full outfit images whereas iconic images are mainly focused on the main product.
</aside>

<h2 id="get-visual-attributes-for-iconic-non-iconic-fashion-images">Get visual attributes for iconic/non-iconic fashion images</h2>

<p>Given a fashion image (containing apparel,accessories,or footwear) identify the detect differnt product <strong>category</strong> along with the different <strong>attributes</strong>. The attributes predicted shall be consistent with the predicted category, e.g. <code class="prettyprint">sleeve length</code> won&rsquo;t be predicted for category <code class="prettyprint">jeans</code>.</p>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get visual attributes for a given iconic/non-iconic image.</span>
<span class="c"># GET /v1/visualattributes</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="c"># Parameters.</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># Optional parameters.</span>
<span class="n">params</span><span class="p">[</span><span class="s">'threshold'</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.2</span>
<span class="c">#params['image_type'] = 'iconic'</span>
<span class="n">params</span><span class="p">[</span><span class="s">'image_type'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'non-iconic'</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/visualattributes'</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="c"># Three options to pass the image</span>

<span class="c"># OPTION 1 : Directly post the image</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'Content-Type'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'image/jpeg'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                         <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s">'test_image_2.jpeg'</span><span class="p">,</span><span class="s">'rb'</span><span class="p">))</span>

<span class="s">"""            
# OPTION 2 : Pass the image url
params['image_url'] = 'http://vg-images.condecdn.net/image/oDXPOxw65EZ/crop/405'
response = requests.post(url,
                         headers=headers,
                         params=params)
"""</span>

<span class="s">"""
# OPTION 3 : using multipart
image_filename = 'test_image_1.jpeg'
with open(image_filename,'rb') as images_file:
    response = requests.post(url,
                             headers=headers,
                             params=params,
                             files={'image': (image_filename,images_file,'image/jpeg')})   
"""</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

<span class="c"># Human friendly repsonse.</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="n">image_location</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s?api_key=</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">results</span><span class="p">[</span><span class="s">'image_location'</span><span class="p">]),</span>
                                  <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s">'[original image] </span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">image_location</span><span class="p">))</span>

<span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="s">'entities'</span><span class="p">]:</span>
    <span class="n">entity_swatch</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s&amp;api_key=</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">entity</span><span class="p">[</span><span class="s">'image_location'</span><span class="p">]),</span>
                                    <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">])</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'[</span><span class="si">%1.2</span><span class="s">f][</span><span class="si">%</span><span class="s">s][</span><span class="si">%</span><span class="s">s]'</span><span class="o">%</span><span class="p">(</span><span class="n">entity</span><span class="p">[</span><span class="s">'category'</span><span class="p">][</span><span class="s">'score'</span><span class="p">][</span><span class="n">entity</span><span class="p">[</span><span class="s">'category'</span><span class="p">][</span><span class="s">'value'</span><span class="p">]],</span>
                                     <span class="n">entity</span><span class="p">[</span><span class="s">'category'</span><span class="p">][</span><span class="s">'value'</span><span class="p">],</span>
                                     <span class="n">entity_swatch</span><span class="p">))</span> 
    <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">entity</span><span class="p">[</span><span class="s">'attributes'</span><span class="p">]:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'[</span><span class="si">%1.2</span><span class="s">f][</span><span class="si">%</span><span class="s">s][</span><span class="si">%</span><span class="s">s]'</span><span class="o">%</span><span class="p">(</span><span class="n">entity</span><span class="p">[</span><span class="s">'attributes'</span><span class="p">][</span><span class="n">attribute</span><span class="p">][</span><span class="s">'score'</span><span class="p">][</span><span class="n">entity</span><span class="p">[</span><span class="s">'attributes'</span><span class="p">][</span><span class="n">attribute</span><span class="p">][</span><span class="s">'value'</span><span class="p">]],</span>
                                 <span class="n">attribute</span><span class="p">,</span>
                                 <span class="n">entity</span><span class="p">[</span><span class="s">'attributes'</span><span class="p">][</span><span class="n">attribute</span><span class="p">][</span><span class="s">'value'</span><span class="p">]))</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2823.04"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/23e67de5-1ac0-487d-9e7f-619e91e685a7.jpe"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"entities"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"category"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"palazzo"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.22113326648841536</span><span class="p">,</span><span class="w">
     </span><span class="s2">"salwar"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.06767382153963641</span><span class="p">,</span><span class="w">
     </span><span class="s2">"pant"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5747724771499634</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pant"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"fusion"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1323334127664566</span><span class="p">,</span><span class="w">
      </span><span class="s2">"maternity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.12990465760231018</span><span class="p">,</span><span class="w">
      </span><span class="s2">"casual"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.13776597380638123</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"casual"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"rise"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"mid rise"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9471921920776367</span><span class="p">,</span><span class="w">
      </span><span class="s2">"high rise"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.003534807590767741</span><span class="p">,</span><span class="w">
      </span><span class="s2">"low rise"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.04925554618239403</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mid rise"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"fabric"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"polyester"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.14030905067920685</span><span class="p">,</span><span class="w">
      </span><span class="s2">"rayon"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10886745154857635</span><span class="p">,</span><span class="w">
      </span><span class="s2">"cotton"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3303784728050232</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cotton"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"fit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"regular"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.8877512812614441</span><span class="p">,</span><span class="w">
      </span><span class="s2">"slim"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05478856340050697</span><span class="p">,</span><span class="w">
      </span><span class="s2">"loose"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.012176275253295898</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"regular"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"color"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"pink"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.13715988397598267</span><span class="p">,</span><span class="w">
      </span><span class="s2">"multicoloured"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.18392638862133026</span><span class="p">,</span><span class="w">
      </span><span class="s2">"red"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2667190730571747</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"red"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"pattern"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"solid"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.8236303329467773</span><span class="p">,</span><span class="w">
      </span><span class="s2">"embellished"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.07058356702327728</span><span class="p">,</span><span class="w">
      </span><span class="s2">"embroidered"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.04244432970881462</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"solid"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"material"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"leather"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1788148432970047</span><span class="p">,</span><span class="w">
      </span><span class="s2">"polyurethane"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.8198845982551575</span><span class="p">,</span><span class="w">
      </span><span class="s2">"cotton"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.000506136566400528</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"polyurethane"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"age_gender"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"boys"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.021265005692839622</span><span class="p">,</span><span class="w">
      </span><span class="s2">"girls"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.28132501244544983</span><span class="p">,</span><span class="w">
      </span><span class="s2">"women"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.6916653513908386</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"women"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"length"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"ankle length"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.06449545174837112</span><span class="p">,</span><span class="w">
      </span><span class="s2">"full length"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.8689517974853516</span><span class="p">,</span><span class="w">
      </span><span class="s2">"regular length"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05531088262796402</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"full length"</span><span class="w">
    </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">292</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5747724771499634</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">155</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">246</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">642</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/23e67de5-1ac0-487d-9e7f-619e91e685a7.jpe?top_left_x=155&amp;top_left_y=246&amp;width=292&amp;height=642"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"category"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"layer_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"person"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.7402761578559875</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"product_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"person"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/23e67de5-1ac0-487d-9e7f-619e91e685a7.jpe?top_left_x=163&amp;top_left_y=5&amp;width=278&amp;height=877"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">278</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.7402761578559875</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">163</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">877</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"category"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"sandal"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.4261542558670044</span><span class="p">,</span><span class="w">
     </span><span class="s2">"sandals"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3518989313999086</span><span class="p">,</span><span class="w">
     </span><span class="s2">"boots"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.054356454120087605</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sandal"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"heel height"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"medium: 2.5-3.5 inch"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"low: 1.5-2.5 inch"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.6993671187192092e-11</span><span class="p">,</span><span class="w">
      </span><span class="s2">"high: above 3.5 inch"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.1122387733042416e-11</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"medium: 2.5-3.5 inch"</span><span class="w">
    </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">111</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.4261542558670044</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">240</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">823</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">63</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/23e67de5-1ac0-487d-9e7f-619e91e685a7.jpe?top_left_x=240&amp;top_left_y=823&amp;width=111&amp;height=63"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"category"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"sandal"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2754097878932953</span><span class="p">,</span><span class="w">
     </span><span class="s2">"pumps"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.09048446886142614</span><span class="p">,</span><span class="w">
     </span><span class="s2">"sandals"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.13116798881638747</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sandal"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"heel height"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"medium: 2.5-3.5 inch"</span><span class="p">:</span><span class="w"> </span><span class="mf">7.981193630257621e-05</span><span class="p">,</span><span class="w">
      </span><span class="s2">"low: 1.5-2.5 inch"</span><span class="p">:</span><span class="w"> </span><span class="mf">5.3353110334396475e-15</span><span class="p">,</span><span class="w">
      </span><span class="s2">"high: above 3.5 inch"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.999920129776001</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"high: above 3.5 inch"</span><span class="w">
    </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">115</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2754097878932953</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">328</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">833</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">55</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/23e67de5-1ac0-487d-9e7f-619e91e685a7.jpe?top_left_x=328&amp;top_left_y=833&amp;width=115&amp;height=55"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"category"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"blouse"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.06075274238587225</span><span class="p">,</span><span class="w">
     </span><span class="s2">"sweater"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05060515634194118</span><span class="p">,</span><span class="w">
     </span><span class="s2">"shirt"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.31577786803245544</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shirt"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"party"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.007760034408420324</span><span class="p">,</span><span class="w">
      </span><span class="s2">"casual"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9074917435646057</span><span class="p">,</span><span class="w">
      </span><span class="s2">"formal"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.07398669421672821</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"casual"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"rise"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"mid rise"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9999979734420776</span><span class="p">,</span><span class="w">
      </span><span class="s2">"high rise"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.1497794903669867e-11</span><span class="p">,</span><span class="w">
      </span><span class="s2">"low rise"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.994056219700724e-06</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mid rise"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"fabric"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"polyester"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10793536901473999</span><span class="p">,</span><span class="w">
      </span><span class="s2">"blend"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.06727375090122223</span><span class="p">,</span><span class="w">
      </span><span class="s2">"cotton"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.4398740828037262</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cotton"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"fit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"relaxed"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.011904584243893623</span><span class="p">,</span><span class="w">
      </span><span class="s2">"regular"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.8485410213470459</span><span class="p">,</span><span class="w">
      </span><span class="s2">"slim"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.11031126230955124</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"regular"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"color"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"pink"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2812502682209015</span><span class="p">,</span><span class="w">
      </span><span class="s2">"green"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1360998898744583</span><span class="p">,</span><span class="w">
      </span><span class="s2">"yellow"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.07928851246833801</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pink"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"pattern"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"solid"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.881832480430603</span><span class="p">,</span><span class="w">
      </span><span class="s2">"printed"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.044556956738233566</span><span class="p">,</span><span class="w">
      </span><span class="s2">"textured"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.029497725889086723</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"solid"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"sleeve style"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"cap sleeves"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9173927307128906</span><span class="p">,</span><span class="w">
      </span><span class="s2">"roll up sleeves"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.08121675252914429</span><span class="p">,</span><span class="w">
      </span><span class="s2">"puff sleeves"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0013715812237933278</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cap sleeves"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"age_gender"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"men"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.018686337396502495</span><span class="p">,</span><span class="w">
      </span><span class="s2">"girls"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.058831632137298584</span><span class="p">,</span><span class="w">
      </span><span class="s2">"women"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9153407216072083</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"women"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"length"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"waist length"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.09034832566976547</span><span class="p">,</span><span class="w">
      </span><span class="s2">"thigh length"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.020926641300320625</span><span class="p">,</span><span class="w">
      </span><span class="s2">"hip length"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.8840341567993164</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hip length"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"sleeve length"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"short sleeves"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0034761312417685986</span><span class="p">,</span><span class="w">
      </span><span class="s2">"3/4th sleeves"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0034854754339903593</span><span class="p">,</span><span class="w">
      </span><span class="s2">"long sleeves"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.9906822443008423</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"long sleeves"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"neck"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"v neck"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2768712639808655</span><span class="p">,</span><span class="w">
      </span><span class="s2">"round neck"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.11630632728338242</span><span class="p">,</span><span class="w">
      </span><span class="s2">"polo neck"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.21823753416538239</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v neck"</span><span class="w">
    </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">204</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.31577786803245544</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">183</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">138</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">233</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/23e67de5-1ac0-487d-9e7f-619e91e685a7.jpe?top_left_x=183&amp;top_left_y=138&amp;width=204&amp;height=233"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"category"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"layer_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"face"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.8626712560653687</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"product_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"face"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/23e67de5-1ac0-487d-9e7f-619e91e685a7.jpe?top_left_x=217&amp;top_left_y=30&amp;width=97&amp;height=104"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">97</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.8626712560653687</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">217</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">104</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6"</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/visualattributes</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td>image/jpeg</td>
<td>(<strong>Required</strong>) The image. The image can be in PNG, JPEG, BMP, or GIF.</td>
<td></td>
</tr>
<tr>
<td>threshold</td>
<td>query</td>
<td>Threshold for detections, ignore entities whose score is below this threshold value.</td>
<td>0.2</td>
</tr>
<tr>
<td>iamge_type</td>
<td>query</td>
<td>Can be either <code class="prettyprint">iconic</code> or <code class="prettyprint">non-iconic</code>.</td>
<td><code class="prettyprint">iconic</code></td>
</tr>
</tbody></table>

<p>Instead of the posting the image data you can also pass an image url.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>image_url</td>
<td>query</td>
<td>(<strong>Required</strong>) The image url.</td>
</tr>
</tbody></table>

<p>You can also pass the image using multipart/form-data with the fieldname <code class="prettyprint">image</code>.</p>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken for prediction in milliseconds.</td>
</tr>
<tr>
<td><strong>entities</strong></td>
<td>A list of detected entities. Each element of the list contains the following fields.</td>
</tr>
<tr>
<td><strong>bounding_box</strong></td>
<td>The bounding box for the deteted entity containing the following fields.</td>
</tr>
<tr>
<td>top_left_x</td>
<td>The x co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>top_left_y</td>
<td>The y co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>width</td>
<td>The width of the bounding box.</td>
</tr>
<tr>
<td>height</td>
<td>The height of the bounding box.</td>
</tr>
<tr>
<td>score</td>
<td>The confidence score.</td>
</tr>
<tr>
<td><strong>category</strong></td>
<td>The top-3 product categories predicted along with their respective confidence levels and the final predicted category.</td>
</tr>
<tr>
<td><strong>attributes</strong></td>
<td>The attributes and their top-3 values predicted along with the respective confidence levels.</td>
</tr>
<tr>
<td><strong>image_location</strong></td>
<td>The image location of the detected entity</td>
</tr>
</tbody></table>

          <h1 id="detectors">Detectors</h1>

<p>A collection of APIs for detecting person, apparel, accessories and footwear in an image.</p>

<h2 id="detect-persons-in-an-image">Detect persons in an image</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Detect persons in a fashion image.</span>
<span class="c"># POST /v1/detect_person</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># Optional parameters.</span>
<span class="n">params</span><span class="p">[</span><span class="s">'model'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'fast'</span> <span class="c"># default</span>
<span class="c">#params['model'] = 'accurate'</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/detect_person'</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="c"># Three options to pass the image</span>

<span class="c"># OPTION 1 : Directly post the image</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'Content-Type'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'image/jpeg'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                         <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s">'test_image_3.jpeg'</span><span class="p">,</span><span class="s">'rb'</span><span class="p">))</span>

<span class="s">"""
# OPTION 2 : Pass the image url
params['image_url'] = 'http://vg-images.condecdn.net/image/oDXPOxw65EZ/crop/405'
response = requests.post(url,
                         headers=headers,
                         params=params)
"""</span>

<span class="s">"""
# OPTION 3 : using multipart
image_filename = 'test_image_3.jpeg'
with open(image_filename,'rb') as images_file:
    response = requests.post(url,
                             headers=headers,
                             params=params,
                             files={'image': (image_filename,images_file,'image/jpeg')})   
"""</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>


<span class="c"># Human friendly repsonse.</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="n">image_location</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s?api_key=</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">results</span><span class="p">[</span><span class="s">'image_location'</span><span class="p">]),</span>
                                  <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s">'[original image] </span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">image_location</span><span class="p">))</span>

<span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="s">'persons'</span><span class="p">]:</span>
    <span class="n">entity_swatch</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s&amp;api_key=</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">entity</span><span class="p">[</span><span class="s">'image_location'</span><span class="p">]),</span>
                                    <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">])</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'[</span><span class="si">%1.2</span><span class="s">f][</span><span class="si">%</span><span class="s">s]'</span><span class="o">%</span><span class="p">(</span><span class="n">entity</span><span class="p">[</span><span class="s">'score'</span><span class="p">],</span><span class="n">entity_swatch</span><span class="p">))</span> 
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1934.55"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/4f394ff2-50fe-482a-a381-8e5f38136b3f.jpe"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"persons"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/4f394ff2-50fe-482a-a381-8e5f38136b3f.jpe?top_left_x=41&amp;top_left_y=14&amp;width=184&amp;height=493"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">41</span><span class="p">,</span><span class="w">
   </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w">
   </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">493</span><span class="p">,</span><span class="w">
   </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">184</span><span class="p">,</span><span class="w">
   </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.737177</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/4f394ff2-50fe-482a-a381-8e5f38136b3f.jpe?top_left_x=177&amp;top_left_y=27&amp;width=170&amp;height=541"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">177</span><span class="p">,</span><span class="w">
   </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">27</span><span class="p">,</span><span class="w">
   </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">541</span><span class="p">,</span><span class="w">
   </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">170</span><span class="p">,</span><span class="w">
   </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.889102</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Detect and find the bounding boxes for all persons in an image.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">POST /v1/detect_person</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td>image/jpeg</td>
<td>(<strong>Required</strong>) The image. The image can be in PNG, JPEG, BMP, or GIF.</td>
<td></td>
</tr>
<tr>
<td>model</td>
<td>query</td>
<td>Model can either be <code class="prettyprint">fast</code> (faster but slightly less accurate model) or <code class="prettyprint">accurate</code> (slower but more accurate model).</td>
<td><code class="prettyprint">fast</code></td>
</tr>
</tbody></table>

<p>Instead of the posting the image data you can also pass an image url.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>image_url</td>
<td>query</td>
<td>(<strong>Required</strong>) The image url.</td>
</tr>
</tbody></table>

<p>You can also pass the image using multipart/form-data with the fieldname <code class="prettyprint">image</code>.</p>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>image_location</td>
<td>The image location of the uploaded image.</td>
</tr>
<tr>
<td><strong>persons</strong></td>
<td>A list of bounding boxes for all detected persons. Each element of the list contains the following fields.</td>
</tr>
<tr>
<td>top_left_x</td>
<td>The x co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>top_left_y</td>
<td>The y co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>width</td>
<td>The width of the bounding box.</td>
</tr>
<tr>
<td>height</td>
<td>The height of the bounding box.</td>
</tr>
<tr>
<td>score</td>
<td>The confidence score (between 0 and 1) that the bounding box contains a person.</td>
</tr>
<tr>
<td>image_location</td>
<td>The image location of the detected person.</td>
</tr>
</tbody></table>

<h2 id="detect-apparel-in-an-image">Detect apparel in an image</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Detect apparel,accessories and footwear in a fashion image.</span>
<span class="c"># POST /v1/detect_apparel</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># Optional parameters.</span>
<span class="n">params</span><span class="p">[</span><span class="s">'threshold'</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.2</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/detect_apparel'</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="c"># Three options to pass the image</span>

<span class="c"># OPTION 1 : Directly post the image</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'Content-Type'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'image/jpeg'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                         <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s">'test_image_2.jpeg'</span><span class="p">,</span><span class="s">'rb'</span><span class="p">))</span>

<span class="s">"""
# OPTION 2 : Pass the image url
params['image_url'] = 'http://vg-images.condecdn.net/image/oDXPOxw65EZ/crop/405'
response = requests.post(url,
                         headers=headers,
                         params=params)
"""</span>

<span class="s">"""
# OPTION 3 : using multipart
image_filename = 'test_image_3.jpeg'
with open(image_filename,'rb') as images_file:
    response = requests.post(url,
                             headers=headers,
                             params=params,
                             files={'image': (image_filename,images_file,'image/jpeg')})   
"""</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>


<span class="c"># Human friendly repsonse.</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="n">image_location</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s?api_key=</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">results</span><span class="p">[</span><span class="s">'image_location'</span><span class="p">]),</span>
                                  <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s">'[original image] </span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">image_location</span><span class="p">))</span>

<span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="s">'entities'</span><span class="p">]:</span>
    <span class="n">entity_swatch</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s&amp;api_key=</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">entity</span><span class="p">[</span><span class="s">'image_location'</span><span class="p">]),</span>
                                    <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">])</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'[</span><span class="si">%1.2</span><span class="s">f][</span><span class="si">%</span><span class="s">s][</span><span class="si">%</span><span class="s">s]'</span><span class="o">%</span><span class="p">(</span><span class="n">entity</span><span class="p">[</span><span class="s">'category'</span><span class="p">][</span><span class="s">'score'</span><span class="p">][</span><span class="n">entity</span><span class="p">[</span><span class="s">'category'</span><span class="p">][</span><span class="s">'value'</span><span class="p">]],</span>
                                     <span class="n">entity</span><span class="p">[</span><span class="s">'category'</span><span class="p">][</span><span class="s">'value'</span><span class="p">],</span>
                                     <span class="n">entity_swatch</span><span class="p">))</span> 
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"259.57"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/2e4e7b35-b8de-493f-8e90-e59080c65d73.jpe"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"entities"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"category"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"layer_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"layer_2_lower_body"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"pant"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5747724771499634</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"product_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"apparel"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pant"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/2e4e7b35-b8de-493f-8e90-e59080c65d73.jpe?top_left_x=168&amp;top_left_y=276&amp;width=266&amp;height=609"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">266</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5747724771499634</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">168</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">276</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">609</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"category"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"layer_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"person"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.7402761578559875</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"product_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"person"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/2e4e7b35-b8de-493f-8e90-e59080c65d73.jpe?top_left_x=175&amp;top_left_y=44&amp;width=254&amp;height=799"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">254</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.7402761578559875</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">175</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">44</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">799</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"category"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"layer_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"footwear"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"sandal"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.4261542558670044</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"product_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"footwear"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sandal"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/2e4e7b35-b8de-493f-8e90-e59080c65d73.jpe?top_left_x=245&amp;top_left_y=825&amp;width=101&amp;height=59"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">101</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.4261542558670044</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">245</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">825</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">59</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"category"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"layer_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"footwear"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"sandal"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2754097878932953</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"product_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"footwear"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sandal"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/2e4e7b35-b8de-493f-8e90-e59080c65d73.jpe?top_left_x=333&amp;top_left_y=835&amp;width=105&amp;height=51"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">105</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2754097878932953</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">333</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">835</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">51</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"category"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"layer_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"layer_2_upper_body"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"shirt"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.31577786803245544</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"product_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"apparel"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shirt"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/2e4e7b35-b8de-493f-8e90-e59080c65d73.jpe?top_left_x=192&amp;top_left_y=148&amp;width=186&amp;height=213"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">186</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.31577786803245544</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">192</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">148</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">213</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"category"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"layer_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="s2">"face"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.8626712560653687</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"product_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"face"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/2e4e7b35-b8de-493f-8e90-e59080c65d73.jpe?top_left_x=221&amp;top_left_y=34&amp;width=89&amp;height=96"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">89</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.8626712560653687</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">221</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">34</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">96</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6"</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Detect and find the bounding boxes for all apparel, accessories and footwear in an image.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">POST /v1/detect_apparel</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td>image/jpeg</td>
<td>(<strong>Required</strong>) The image. The image can be in PNG, JPEG, BMP, or GIF.</td>
<td></td>
</tr>
<tr>
<td>threshold</td>
<td>query</td>
<td>Threshold for detections, ignore entities whose score is below this threshold value.</td>
<td>0.2</td>
</tr>
</tbody></table>

<p>Instead of the posting the image data you can also pass an image url.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>image_url</td>
<td>query</td>
<td>(<strong>Required</strong>) The image url.</td>
</tr>
</tbody></table>

<p>You can also pass the image using multipart/form-data with the fieldname <code class="prettyprint">image</code>.</p>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>image_location</td>
<td>The image location of the uploaded image.</td>
</tr>
<tr>
<td><strong>entities</strong></td>
<td>A list of detected entities. Each element of the list contains the following fields.</td>
</tr>
<tr>
<td><strong>bounding_box</strong></td>
<td>The bounding box for the deteted entity containing the following fields.</td>
</tr>
<tr>
<td>top_left_x</td>
<td>The x co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>top_left_y</td>
<td>The y co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>width</td>
<td>The width of the bounding box.</td>
</tr>
<tr>
<td>height</td>
<td>The height of the bounding box.</td>
</tr>
<tr>
<td>score</td>
<td>The confidence score (between 0 and 1) that the bounding box contains a person.</td>
</tr>
<tr>
<td><strong>category</strong></td>
<td>The category of deteted entity containing the following fields.</td>
</tr>
<tr>
<td>value</td>
<td>The category label.</td>
</tr>
<tr>
<td>score</td>
<td>The confidence score for the category label.</td>
</tr>
<tr>
<td>product_type</td>
<td>Can be either <code class="prettyprint">apparel</code>,<code class="prettyprint">accessories</code>,<code class="prettyprint">footwear</code> or <code class="prettyprint">UNK</code>.</td>
</tr>
<tr>
<td>layer_type</td>
<td>The layer type.</td>
</tr>
<tr>
<td><strong>image_location</strong></td>
<td>The image location of the detected entity.</td>
</tr>
</tbody></table>

          <h1 id="colors">Colors</h1>

<p>These are a few APIs for dealing with color terms. </p>

<p>A <strong>color term</strong>, also known as a color name, is a word or phrase that refers to a specific color. For example <em>red</em> is the color term used for a color with RGB values [255,0,0]. While the number of color terms are quite huge we internally organize our color terms into three color families:</p>

<ul>
<li><strong>universal</strong> Berlin and Kay, in a classic <a href="https://en.wikipedia.org/wiki/Basic_Color_Terms:_Their_Universality_and_Evolution">study</a> of worldwide color naming, postulated the existence of <em>11 universal basic color terms</em> across languages. We have included two more colors(<em>olive</em> and <em>yellow green</em>) as per the <a href="https://en.wikipedia.org/wiki/ISCC%E2%80%93NBS_system">ISCC-NBS system</a>.</li>
<li><strong>entrylevel</strong> A slightly larger curated set of color names which we call <em>entry level</em>. A random person should be able to recognize these color names.</li>
<li><strong>full</strong> The full set of colors available in our color taxonomy including more esoteric color terms.</li>
<li><strong>pantone</strong> The pantone color terms for fashion.</li>
</ul>

<p>Color similarities are computed using the <a href="https://en.wikipedia.org/wiki/Color_difference">Delta E (CIE2000)</a> metric in the LAB space.</p>

<h2 id="get-color-terms">Get color terms</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get color terms. </span>
<span class="c"># GET /v1/colors/color_terms</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/colors/color_terms'</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="c"># Parameters - required</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">params</span><span class="p">[</span><span class="s">'r'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">106</span>
<span class="n">params</span><span class="p">[</span><span class="s">'g'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">103</span>
<span class="n">params</span><span class="p">[</span><span class="s">'b'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">95</span>

<span class="c"># Parameters - optional</span>
<span class="n">params</span><span class="p">[</span><span class="s">'color_count'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">params</span><span class="p">[</span><span class="s">'color_family'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'full'</span>
<span class="c">#params['color_family'] = 'universal'</span>
<span class="c">#params['color_family'] = 'entrylevel'</span>
<span class="c">#params['color_family'] = 'pantone'</span>
<span class="n">params</span><span class="p">[</span><span class="s">'method'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'accurate'</span>
<span class="c">#params['method'] = 'fast'</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                        <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                        <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"234.64"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"color_terms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dim gray"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">104</span><span class="p">,</span><span class="w">
    </span><span class="mi">103</span><span class="p">,</span><span class="w">
    </span><span class="mi">103</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 18-0503 tcx gargoyle"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#696969"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gray"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">105</span><span class="p">,</span><span class="w">
    </span><span class="mi">105</span><span class="p">,</span><span class="w">
    </span><span class="mi">105</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.4117647058823529</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18-0503 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gargoyle"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gray"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"charcoal gray"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">108</span><span class="p">,</span><span class="w">
    </span><span class="mi">104</span><span class="p">,</span><span class="w">
    </span><span class="mi">104</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 18-0601 tcx charcoal gray"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#6c6868"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gray"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">108</span><span class="p">,</span><span class="w">
    </span><span class="mi">104</span><span class="p">,</span><span class="w">
    </span><span class="mi">104</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.03703703703703709</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.4235294117647059</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18-0601 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"charcoal gray"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gray"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gunmetal"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">92</span><span class="p">,</span><span class="w">
    </span><span class="mi">93</span><span class="p">,</span><span class="w">
    </span><span class="mi">91</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 18-0306 tcx gunmetal"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#5c5d5b"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gray"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">92</span><span class="p">,</span><span class="w">
    </span><span class="mi">93</span><span class="p">,</span><span class="w">
    </span><span class="mi">91</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">90.0</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.02150537634408589</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.36470588235294116</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18-0306 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gunmetal"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gray"</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get the closest color term for a given color (specified by <a href="https://en.wikipedia.org/wiki/RGB_color_model">RGB color model</a>).</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/colors/color_terms</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>r</td>
<td>query</td>
<td>(<strong>Required</strong>) The value for the red channel in the RGB color model (in the range 0 to 255).</td>
<td></td>
</tr>
<tr>
<td>g</td>
<td>query</td>
<td>(<strong>Required</strong>) The value for the green channel in the RGB color model (in the range 0 to 255).</td>
<td></td>
</tr>
<tr>
<td>b</td>
<td>query</td>
<td>(<strong>Required</strong>) The value for the blue channel in the RGB color model (in the range 0 to 255).</td>
<td></td>
</tr>
<tr>
<td>color_count</td>
<td>query</td>
<td>the number of similar color terms (maximum value of 10)</td>
<td>5</td>
</tr>
<tr>
<td>color_family</td>
<td>query</td>
<td>the color family, can be either <code class="prettyprint">universal</code>, <code class="prettyprint">entrylevel</code>, <code class="prettyprint">full</code> or <code class="prettyprint">pantone</code></td>
<td><code class="prettyprint">full</code></td>
</tr>
<tr>
<td>method</td>
<td>query</td>
<td>The method to use to get the color names, can be either <code class="prettyprint">accurate</code> (exact but slower) or <code class="prettyprint">fast</code> (approximate but fast)</td>
<td><code class="prettyprint">accurate</code></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>color_terms</td>
<td>A list of five closest color terms. Each field has the following field names.</td>
</tr>
<tr>
<td>rgb</td>
<td>The <a href="https://en.wikipedia.org/wiki/RGB_color_model">RGB</a> values for the color.</td>
</tr>
<tr>
<td>hsv</td>
<td>The <a href="https://en.wikipedia.org/wiki/HSL_and_HSV">HSV</a> values for the color.</td>
</tr>
<tr>
<td>hex</td>
<td>The hex code for the color.</td>
</tr>
<tr>
<td>universal_name</td>
<td>The best matching universal color name. Berlin and Kay, in a classic <a href="https://en.wikipedia.org/wiki/Basic_Color_Terms:_Their_Universality_and_Evolution">study</a> of worldwide color naming, postulated the existence of <em>11 universal basic color terms</em> across languages. We have included two more colors(<em>olive</em> and <em>yellow green</em>) as per the <a href="https://en.wikipedia.org/wiki/ISCC%E2%80%93NBS_system">ISCC-NBS system</a>.</td>
</tr>
<tr>
<td>entrylevel_name</td>
<td>The best matching entry level color name. A slightly larger curated set of color names which we call <em>entry level</em>. A random person should be able to recognize these color names.</td>
</tr>
<tr>
<td>name</td>
<td>The best guess for the color name based on all the colors available in our color taxonomy.</td>
</tr>
</tbody></table>

<h2 id="get-similar-colors">Get similar colors</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get other color terms similar to a given color term.</span>
<span class="c"># GET /v1/colors/similar_colors</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/colors/similar_colors'</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">params</span><span class="p">[</span><span class="s">'color_term'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'purple'</span>

<span class="c"># Optional parameters</span>
<span class="n">params</span><span class="p">[</span><span class="s">'color_count'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="c">#params['color_family'] = 'universal'</span>
<span class="c">#params['color_family'] = 'entrylevel'</span>
<span class="c">#params['color_family'] = 'full'</span>

<span class="c"># To serch within the pantone family</span>
<span class="c">#params['color_term'] = 'pantone 19-3336 tcx sparkling grape'</span>
<span class="c">#params['color_family'] = 'pantone'</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span><span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"similar_colors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"patriarch"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">119</span><span class="p">,</span><span class="w">
    </span><span class="mi">51</span><span class="p">,</span><span class="w">
    </span><span class="mi">118</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 19-3336 tcx sparkling grape"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#800080"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"purple"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">128</span><span class="p">,</span><span class="w">
    </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="mi">128</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">300.0</span><span class="p">,</span><span class="w">
    </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.5019607843137255</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19-3336 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sparkling grape"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"purple"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"violet"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">193</span><span class="p">,</span><span class="w">
    </span><span class="mi">127</span><span class="p">,</span><span class="w">
    </span><span class="mi">181</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 16-3320 tcx violet"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#c17fb5"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pink"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">193</span><span class="p">,</span><span class="w">
    </span><span class="mi">127</span><span class="p">,</span><span class="w">
    </span><span class="mi">181</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">310.9090909090909</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.34196891191709844</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.7568627450980392</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"16-3320 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"violet"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"magenta"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"navy blue"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">64</span><span class="p">,</span><span class="w">
    </span><span class="mi">63</span><span class="p">,</span><span class="w">
    </span><span class="mi">111</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 19-3832 tcx navy blue"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#403f6f"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"purple"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">64</span><span class="p">,</span><span class="w">
    </span><span class="mi">63</span><span class="p">,</span><span class="w">
    </span><span class="mi">111</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">241.25</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.43243243243243246</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.43529411764705883</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19-3832 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"navy blue"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"navy blue"</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">],</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.11"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get other color terms similar to a given color term.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/colors/similar_colors</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>color_term</td>
<td>query</td>
<td>(<strong>Required</strong>) The color term.</td>
<td></td>
</tr>
<tr>
<td>color_count</td>
<td>query</td>
<td>the number of similar color terms (maximum value of 10)</td>
<td>5</td>
</tr>
<tr>
<td>color_family</td>
<td>query</td>
<td>The color family to use to retrieve the similar colors. Can take values <code class="prettyprint">universal</code>, <code class="prettyprint">entrylevel</code> ,<code class="prettyprint">full</code> or <code class="prettyprint">pantone</code></td>
<td><code class="prettyprint">entrylevel</code></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>similar_colors</td>
<td>A list of five closest color terms. Each field has the following field names.</td>
</tr>
<tr>
<td>rgb</td>
<td>The <a href="https://en.wikipedia.org/wiki/RGB_color_model">RGB</a> values for the color.</td>
</tr>
<tr>
<td>hsv</td>
<td>The <a href="https://en.wikipedia.org/wiki/HSL_and_HSV">HSV</a> values for the color.</td>
</tr>
<tr>
<td>hex</td>
<td>The hex code for the color.</td>
</tr>
<tr>
<td>universal_name</td>
<td>The best matching universal color name. Berlin and Kay, in a classic <a href="https://en.wikipedia.org/wiki/Basic_Color_Terms:_Their_Universality_and_Evolution">study</a> of worldwide color naming, postulated the existence of <em>11 universal basic color terms</em> across languages. We have included two more colors(<em>olive</em> and <em>yellow green</em>) as per the <a href="https://en.wikipedia.org/wiki/ISCC%E2%80%93NBS_system">ISCC-NBS system</a>.</td>
</tr>
<tr>
<td>entrylevel_name</td>
<td>The best matching entry level color name. A slightly larger curated set of color names which we call <em>entry level</em>. A random person should be able to recognize these color names.</td>
</tr>
<tr>
<td>name</td>
<td>The best guess for the color name based on all the colors available in our color taxonomy.</td>
</tr>
</tbody></table>

<h2 id="get-color-similarity">Get color similarity</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get similarity score between two color terms. </span>
<span class="c"># GET /v1/colors/color_terms_similarity</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/colors/color_terms_similarity'</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">params</span><span class="p">[</span><span class="s">'color_term_1'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'red'</span>
<span class="n">params</span><span class="p">[</span><span class="s">'color_term_2'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'pink'</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                        <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                        <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"similarity_score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.650632524978343</span><span class="p">,</span><span class="w">
  </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="err">u'</span><span class="mf">22.23</span><span class="err">'</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get similarity score between two color terms (eg. &lsquo;red&rsquo; and &lsquo;pink&rsquo;). </p>

<p>Uses the <a href="https://en.wikipedia.org/wiki/Color_difference">CIEDE2000</a> metric to measure similarity between two color terms. </p>

<aside class="notice">
We internally use our color taxonomy to get the RGB values for the color term. If the color terms are not in our color taxonomy the code defaults to the jaccard similarity between the color terms.
</aside>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/colors/color_terms_similarity</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>color_term_1</td>
<td>query</td>
<td>(<strong>Required</strong>) The first  color term.</td>
</tr>
<tr>
<td>color_term_2</td>
<td>query</td>
<td>(<strong>Required</strong>) The second color term.</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>similarity_score</td>
<td>The similarity score (between 0 and 1) which indicates the similarity between the two color terms. Internally it uses the <a href="https://en.wikipedia.org/wiki/Color_difference">CIEDE2000</a> metric to measure similarity between two color terms.</td>
</tr>
</tbody></table>

          <h1 id="color-search">Color Search</h1>

<p>A collection of APIs for enabling catalog search based on colors.</p>

<h2 id="build-color-search-index">Build color search index</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Build the color search index.</span>
<span class="c"># POST /v1/catalog/{catalog_name}/color_search_index</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c"># Optional parameters.</span>
<span class="n">params</span><span class="p">[</span><span class="s">'color_count'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">params</span><span class="p">[</span><span class="s">'quality'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">params</span><span class="p">[</span><span class="s">'image_max_dimension'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">256</span>
<span class="n">params</span><span class="p">[</span><span class="s">'ignore_background'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'true'</span>
<span class="n">params</span><span class="p">[</span><span class="s">'model'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'person_fast'</span>
<span class="n">params</span><span class="p">[</span><span class="s">'fraction_pixels_threshold'</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.1</span>

<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/color_search_index'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span><span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"done"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"color_computation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_existing"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_processed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"46"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"finish_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-18 04:35:03.112859"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-18 04:34:51.450504"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"224"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"index_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"num_of_products"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"num_of_images"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"color_search_index"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"num_of_images_missing_colors"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_indexed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"46"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14"</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">},</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.97"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Build the color search index.</p>

<p>Before you can start using the color search APIs the color search index has to be built. This API computes the dominant colors for all the uploaded images in the catalog and then builds an index for fast nearest neighbor retrieval.</p>

<aside class="notice">
This is a one time long running operation. Depending on your catalog size you will have to wait till the index creation is completed to start using the color search APIs. You can query the status of the index creation using the GET endpoint. The index is built when the status changes to `done`
</aside>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">POST /v1/catalog/{catalog_name}/color_search_index</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>color_count</td>
<td>query</td>
<td>The maximum number of dominant colors to extract per image.</td>
<td>3</td>
</tr>
<tr>
<td>quality</td>
<td>query</td>
<td>This parameter provides a trade off between the computation time and the quality of the dominant colors. Larger the number faster is the dominant color computation but greater the chance that the colors will be missed. 1 is the highest quality.</td>
<td>1</td>
</tr>
<tr>
<td>image_max_dimension</td>
<td>query</td>
<td>You can set this parameters to resize the image for faster computation of dominant colors. If your images are of very high resolution you can set this parameter to a smaller value (suggested values 256-512) for faster computation. For any image if max(image width,image height) &gt; image_max_dimension resizes the image such that max(image width,image height) = image_max_dimension.</td>
<td>no image resizing</td>
</tr>
<tr>
<td>ignore_background</td>
<td>query</td>
<td>By default we use the entire image to compute the dominant colors. If we set this parameter to <code class="prettyprint">true</code> we internally use some algorithms to ignore the background and mainly focus on the person or apparel.</td>
<td><code class="prettyprint">false</code></td>
</tr>
<tr>
<td>model</td>
<td>query</td>
<td>The model to use to ignore the background. Currently we use person detecors to focus only on the person. The following options are supported <code class="prettyprint">person_fast</code> (faster but slightly less accurate model), <code class="prettyprint">person_accurate</code> (slower but more accurate model) and <code class="prettyprint">person_basic</code> (a basic person detector using standard body proportions).</td>
<td><code class="prettyprint">person_fast</code></td>
</tr>
<tr>
<td>fraction_pixels_threshold</td>
<td>query</td>
<td>Include only those colors whos fraction of pixels is greater than this number.</td>
<td>0.0</td>
</tr>
<tr>
<td>ignore_images_without_person</td>
<td>query</td>
<td>If <code class="prettyprint">true</code> ignore images where person is not detected. If <code class="prettyprint">false</code> and person is not detected then defaults to &lsquo;person_basic&rsquo;</td>
<td><code class="prettyprint">false</code></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td>A json containing various info about the current status of the index building process.</td>
</tr>
<tr>
<td>status</td>
<td>The current status of the index building process. The status can be one of <code class="prettyprint">computing_dominant_color</code>,<code class="prettyprint">building_index</code>,or <code class="prettyprint">done</code>. The index is built when the status becomes <code class="prettyprint">done</code>.</td>
</tr>
<tr>
<td>num_of_products</td>
<td>The number of products in the catalog.</td>
</tr>
<tr>
<td>num_of_images</td>
<td>The total number of images in the catalog.</td>
</tr>
<tr>
<td>start_time</td>
<td>The time when the index building started.</td>
</tr>
<tr>
<td>finish_time</td>
<td>The time when the index building finished.</td>
</tr>
<tr>
<td><strong>color_computation</strong></td>
<td>Info about dominant color computation.</td>
</tr>
<tr>
<td>num_of_images_error</td>
<td>The number of images for which there was some error in dominant color computation.</td>
</tr>
<tr>
<td>num_of_images_ignored</td>
<td>The number of images that were ignored.</td>
</tr>
<tr>
<td>num_of_images_existing</td>
<td>The number of images for which the dominant colors were already computed (in case of building a new index with new products added).</td>
</tr>
<tr>
<td>num_of_images_processed</td>
<td>The total number of images for which the dominant colors were computed.</td>
</tr>
<tr>
<td><strong>color_search_index</strong></td>
<td>Info about the index building.</td>
</tr>
<tr>
<td>num_of_images_missing_colors</td>
<td>The number of images for which there was no dominant color was found.</td>
</tr>
<tr>
<td>num_of_images_ignored</td>
<td>The number of images that were ignored.</td>
</tr>
<tr>
<td>num_of_images_indexed</td>
<td>The total number of images finally indexed.</td>
</tr>
</tbody></table>

<aside class="notice">
Any time you add new images to the catalog you will have to rebuild the index by calling this API again. Note that the dominant colors for the old images will still be saved and we will be computing the dominant colors only for the newly added images.
</aside>

<aside class="warning">
The current version supports building only one index at the same time and does not allow you to build another index when a current index building process in running. Please wait till the current index creation is completed. 
</aside>

<h2 id="get-color-search-index-status">Get color search index status</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get the status of the color search index.</span>
<span class="c"># GET /v1/catalog/{catalog_name}/color_search_index</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/color_search_index'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"done"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"color_computation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_existing"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_processed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"46"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"finish_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-18 04:35:03.112859"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-18 04:34:51.450504"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"224"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"index_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"num_of_products"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"num_of_images"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"color_search_index"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"num_of_images_missing_colors"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_indexed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"46"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14"</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">},</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.97"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get the status of the color search index.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/catalog/{catalog_name}/color_search_index</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td>A json containing various info about the current status of the index building process.</td>
</tr>
<tr>
<td>status</td>
<td>The current status of the index building process. The status can be one of <code class="prettyprint">computing_dominant_color</code>,<code class="prettyprint">building_index</code>,or <code class="prettyprint">done</code>. The index is built when the status becomes <code class="prettyprint">done</code>.</td>
</tr>
<tr>
<td>num_of_products</td>
<td>The number of products in the catalog.</td>
</tr>
<tr>
<td>num_of_images</td>
<td>The total number of images in the catalog.</td>
</tr>
<tr>
<td>start_time</td>
<td>The time when the index building started.</td>
</tr>
<tr>
<td>finish_time</td>
<td>The time when the index building finished.</td>
</tr>
<tr>
<td><strong>color_computation</strong></td>
<td>Info about dominant color computation.</td>
</tr>
<tr>
<td>num_of_images_error</td>
<td>The number of images for which there was some error in dominant color computation.</td>
</tr>
<tr>
<td>num_of_images_ignored</td>
<td>The number of images that were ignored.</td>
</tr>
<tr>
<td>num_of_images_existing</td>
<td>The number of images for which the dominant colors were already computed (in case of building a new index with new products added).</td>
</tr>
<tr>
<td>num_of_images_processed</td>
<td>The total number of images for which the dominant colors were computed.</td>
</tr>
<tr>
<td><strong>color_search_index</strong></td>
<td>Info about the index building.</td>
</tr>
<tr>
<td>num_of_images_missing_colors</td>
<td>The number of images for which there was no dominant color was found.</td>
</tr>
<tr>
<td>num_of_images_ignored</td>
<td>The number of images that were ignored.</td>
</tr>
<tr>
<td>num_of_images_indexed</td>
<td>The total number of images finally indexed.</td>
</tr>
</tbody></table>

<h2 id="delete-the-color-search-index">Delete the color search index</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Delete the color search index.</span>
<span class="c"># DELETE /v1/catalog/{catalog_name}/color_search_index</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/color_search_index'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8.88"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"catalog_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample_catalog"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Delete the color search index.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">DELETE /v1/catalog/{catalog_name}/color_search_index</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>catalog_name</td>
<td>The catalog name.</td>
</tr>
<tr>
<td>deleted</td>
<td>This is <code class="prettyprint">true</code> if the index was successfully deleted.</td>
</tr>
</tbody></table>

<h2 id="color-search-by-rgb">Color Search by RGB</h2>
<pre class="highlight shell tab-shell"><code>http://api_gateway_url/v1/catalog/sample_catalog/color_search?r<span class="o">=</span>255&amp;g<span class="o">=</span>0&amp;b<span class="o">=</span>0m&amp;ax_number_of_results<span class="o">=</span>5&amp;api_key<span class="o">=</span>your_api_key
</code></pre><pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get similar color images in the catalog for a specified RGB value.</span>
<span class="c"># GET /v1/catalog/{catalog_name}/color_search</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c"># Parameters.</span>
<span class="n">params</span><span class="p">[</span><span class="s">'r'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">255</span>
<span class="n">params</span><span class="p">[</span><span class="s">'g'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">params</span><span class="p">[</span><span class="s">'b'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">params</span><span class="p">[</span><span class="s">'max_number_of_results'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>

<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/color_search'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                        <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                        <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>


<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6.13"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"products"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">7.383520126342773</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">197</span><span class="p">,</span><span class="w">
    </span><span class="mi">99</span><span class="p">,</span><span class="w">
    </span><span class="mi">71</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/SHRES16AWFSDR9346B18/Front_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B_5.jpg"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">9.618025779724121</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">196</span><span class="p">,</span><span class="w">
    </span><span class="mi">106</span><span class="p">,</span><span class="w">
    </span><span class="mi">76</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/SHRES16AWFSDR9346B18/Look_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B_1.jpg"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.06448745727539</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">154</span><span class="p">,</span><span class="w">
    </span><span class="mi">46</span><span class="p">,</span><span class="w">
    </span><span class="mi">35</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/SHRES16AWFSDR9346B18/Right_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B_4.jpg"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">19.470752716064453</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">128</span><span class="p">,</span><span class="w">
    </span><span class="mi">41</span><span class="p">,</span><span class="w">
    </span><span class="mi">38</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/SHRES16AWFSDR9346B18/Left_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B_2.jpg"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">20.736268997192383</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">192</span><span class="p">,</span><span class="w">
    </span><span class="mi">126</span><span class="p">,</span><span class="w">
    </span><span class="mi">96</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/SHRES16AWFSDR9346B18/Right_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B_4.jpg"</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get similar color images in the catalog for a specified RGB value.</p>

<aside class="notice">
The color search index has to be built first before you can use this API.  
</aside>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/catalog/{catalog_name}/color_search</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>r</td>
<td>query</td>
<td>(<strong>Required</strong>) The value for the red channel in the RGB color model (in the range 0 to 255).</td>
<td></td>
</tr>
<tr>
<td>g</td>
<td>query</td>
<td>(<strong>Required</strong>) The value for the green channel in the RGB color model (in the range 0 to 255).</td>
<td></td>
</tr>
<tr>
<td>b</td>
<td>query</td>
<td>(<strong>Required</strong>) The value for the blue channel in the RGB color model (in the range 0 to 255).</td>
<td></td>
</tr>
<tr>
<td>max_number_of_results</td>
<td>query</td>
<td>maximum number of results to return</td>
<td>12</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td><strong>products</strong></td>
<td>A sorted list similar color images. Each item in the list has the following fields.</td>
</tr>
<tr>
<td>image_id</td>
<td>The image id.</td>
</tr>
<tr>
<td>id</td>
<td>The product id.</td>
</tr>
<tr>
<td>image_filename</td>
<td>The image filename.</td>
</tr>
<tr>
<td>image_url</td>
<td>The image url</td>
</tr>
<tr>
<td>distance</td>
<td>The euclidean distance (in LAB space)  between the color in the image to the color in the query.</td>
</tr>
<tr>
<td>rgb</td>
<td>The RGB value of the matching color.</td>
</tr>
</tbody></table>

<h2 id="color-search-by-name">Color Search by name</h2>
<pre class="highlight shell tab-shell"><code>http://api_gateway_url/v1/catalog/sample_catalog/color_search?color_term<span class="o">=</span>red&amp;ax_number_of_results<span class="o">=</span>5&amp;api_key<span class="o">=</span>your_api_key
</code></pre><pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get similar color images in the catalog for a specified color name..</span>
<span class="c"># GET /v1/catalog/{catalog_name}/color_search</span>
<span class="c"># params - color_term,max_number_of_results</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="c"># Parameters.</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">params</span><span class="p">[</span><span class="s">'color_term'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'red'</span> 
<span class="n">params</span><span class="p">[</span><span class="s">'max_number_of_results'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>

<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/color_search'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                        <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                        <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>


<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>


</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11.09"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"products"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">51.287628173828125</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">154</span><span class="p">,</span><span class="w">
    </span><span class="mi">46</span><span class="p">,</span><span class="w">
    </span><span class="mi">35</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/SHRES16AWFSDR9346B18/Right_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B_4.jpg"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">53.020751953125</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">197</span><span class="p">,</span><span class="w">
    </span><span class="mi">99</span><span class="p">,</span><span class="w">
    </span><span class="mi">71</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/SHRES16AWFSDR9346B18/Front_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B_5.jpg"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">56.67232894897461</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">196</span><span class="p">,</span><span class="w">
    </span><span class="mi">106</span><span class="p">,</span><span class="w">
    </span><span class="mi">76</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/SHRES16AWFSDR9346B18/Look_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B_1.jpg"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">64.99003601074219</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">128</span><span class="p">,</span><span class="w">
    </span><span class="mi">41</span><span class="p">,</span><span class="w">
    </span><span class="mi">38</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/SHRES16AWFSDR9346B18/Left_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B_2.jpg"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">67.47423553466797</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">210</span><span class="p">,</span><span class="w">
    </span><span class="mi">138</span><span class="p">,</span><span class="w">
    </span><span class="mi">106</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/SHRES16AWFSDR9346B18/Left_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B_2.jpg"</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get similar color images in the catalog for a specified color name.</p>

<aside class="notice">
The color search index has to be built first before you can use this API.  
</aside>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/catalog/{catalog_name}/color_search</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>color_term</td>
<td>query</td>
<td>(<strong>Required</strong>) The color term (e.g. red).</td>
<td></td>
</tr>
<tr>
<td>max_number_of_results</td>
<td>query</td>
<td>maximum number of results to return</td>
<td>12</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td><strong>products</strong></td>
<td>A sorted list similar color images. Each item in the list has the following fields.</td>
</tr>
<tr>
<td>image_id</td>
<td>The image id.</td>
</tr>
<tr>
<td>id</td>
<td>The product id.</td>
</tr>
<tr>
<td>image_filename</td>
<td>The image filename.</td>
</tr>
<tr>
<td>image_url</td>
<td>The image url</td>
</tr>
<tr>
<td>distance</td>
<td>The euclidean distance (in LAB space)  between the color in the image to the color in the query.</td>
</tr>
<tr>
<td>rgb</td>
<td>The RGB value of the matching color.</td>
</tr>
</tbody></table>

<h2 id="color-search-by-id">Color Search by id</h2>
<pre class="highlight shell tab-shell"><code>http://api_gateway_url/v1/catalog/sample_catalog/color_search?id<span class="o">=</span>SHRES16AWFSDR9346B&amp;image_id<span class="o">=</span>1&amp;color_count<span class="o">=</span>1&amp;max_number_of_results<span class="o">=</span>5&amp;api_key<span class="o">=</span>your_api_key
</code></pre><pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get similar color images in the catalog for an existing image.</span>
<span class="c"># GET /v1/catalog/{catalog_name}/color_search</span>
<span class="c"># params - id,image_id,color_count,max_number_of_results</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="c"># Parameters.</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">params</span><span class="p">[</span><span class="s">'id'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'SHRES16AWFSDR9346B'</span> 
<span class="n">params</span><span class="p">[</span><span class="s">'image_id'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'1'</span>
<span class="n">params</span><span class="p">[</span><span class="s">'color_count'</span><span class="p">]</span> <span class="o">=</span>  <span class="mi">1</span>
<span class="n">params</span><span class="p">[</span><span class="s">'max_number_of_results'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>

<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/color_search'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                        <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                        <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>


<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12.31"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"products"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">196</span><span class="p">,</span><span class="w">
    </span><span class="mi">106</span><span class="p">,</span><span class="w">
    </span><span class="mi">76</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/SHRES16AWFSDR9346B18/Look_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B_1.jpg"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">4.095544338226318</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">197</span><span class="p">,</span><span class="w">
    </span><span class="mi">99</span><span class="p">,</span><span class="w">
    </span><span class="mi">71</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/SHRES16AWFSDR9346B18/Front_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B_5.jpg"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.966226577758789</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">192</span><span class="p">,</span><span class="w">
    </span><span class="mi">126</span><span class="p">,</span><span class="w">
    </span><span class="mi">96</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/SHRES16AWFSDR9346B18/Right_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B_4.jpg"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">13.747275352478027</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">210</span><span class="p">,</span><span class="w">
    </span><span class="mi">138</span><span class="p">,</span><span class="w">
    </span><span class="mi">106</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/SHRES16AWFSDR9346B18/Left_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B_2.jpg"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">21.508577346801758</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">154</span><span class="p">,</span><span class="w">
    </span><span class="mi">46</span><span class="p">,</span><span class="w">
    </span><span class="mi">35</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/SHRES16AWFSDR9346B18/Right_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B_4.jpg"</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get similar color images in the catalog for an existing image.</p>

<aside class="notice">
The color search index has to be built first before you can use this API.  
</aside>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/catalog/{catalog_name}/color_search</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>path</td>
<td>(<strong>Required</strong>) The product id.</td>
<td></td>
</tr>
<tr>
<td>image_id</td>
<td>path</td>
<td>(<strong>Required</strong>) The image id.</td>
<td></td>
</tr>
<tr>
<td>color_count</td>
<td>path</td>
<td>The maximum number of dominant colors to search for in an image.</td>
<td>1</td>
</tr>
<tr>
<td>max_number_of_results</td>
<td>query</td>
<td>maximum number of results to return</td>
<td>12</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td><strong>products</strong></td>
<td>A sorted list similar color images. Each item in the list has the following fields.</td>
</tr>
<tr>
<td>image_id</td>
<td>The image id.</td>
</tr>
<tr>
<td>id</td>
<td>The product id.</td>
</tr>
<tr>
<td>image_filename</td>
<td>The image filename.</td>
</tr>
<tr>
<td>image_url</td>
<td>The image url</td>
</tr>
<tr>
<td>distance</td>
<td>The euclidean distance (in LAB space)  between the color in the image to the color in the query.</td>
</tr>
<tr>
<td>rgb</td>
<td>The RGB value of the matching color.</td>
</tr>
</tbody></table>

<h2 id="color-search-by-image">Color Search by image</h2>
<pre class="highlight shell tab-shell"><code></code></pre><pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get similar color images in the catalog for a given uploaded image.</span>
<span class="c"># POST /v1/catalog/{catalog_name}/color_search</span>
<span class="c"># params - color_count,image_max_dimension,max_number_of_results</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="c"># Parameters.</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">params</span><span class="p">[</span><span class="s">'color_count'</span><span class="p">]</span> <span class="o">=</span>  <span class="mi">2</span>
<span class="n">params</span><span class="p">[</span><span class="s">'max_number_of_results'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>

<span class="n">headers</span><span class="p">[</span><span class="s">'Content-Type'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'image/jpeg'</span>

<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/color_search'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                        <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                        <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                        <span class="n">data</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s">'test_image_2.jpeg'</span><span class="p">,</span><span class="s">'rb'</span><span class="p">))</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"689.53"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"products"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.9539705514907837</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">48</span><span class="p">,</span><span class="w">
    </span><span class="mi">48</span><span class="p">,</span><span class="w">
    </span><span class="mi">48</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2016/SKLTS16AMCWSH8SH2005/Look_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SKLTS16AMCWSH8SH20"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SKLTS16AMCWSH8SH20_4.jpg"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">4.879070281982422</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">45</span><span class="p">,</span><span class="w">
    </span><span class="mi">42</span><span class="p">,</span><span class="w">
    </span><span class="mi">45</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2016/SKLTS16AMCWSH8SP0150/Right_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SKLTS16AMCWSH8SP01"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SKLTS16AMCWSH8SP01_5.jpg"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">6.080552577972412</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">42</span><span class="p">,</span><span class="w">
    </span><span class="mi">40</span><span class="p">,</span><span class="w">
    </span><span class="mi">44</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2016/SKLTS16AMCWSH8SP0150/Front_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SKLTS16AMCWSH8SP01"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SKLTS16AMCWSH8SP01_2.jpg"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">6.821847438812256</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">40</span><span class="p">,</span><span class="w">
    </span><span class="mi">38</span><span class="p">,</span><span class="w">
    </span><span class="mi">42</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2016/SKLTS16AMCWSH8SP0150/Left_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SKLTS16AMCWSH8SP01"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SKLTS16AMCWSH8SP01_3.jpg"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">7.602819442749023</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">36</span><span class="p">,</span><span class="w">
    </span><span class="mi">34</span><span class="p">,</span><span class="w">
    </span><span class="mi">34</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2016/SKLTS16AMCWSH8SP0150/Look_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SKLTS16AMCWSH8SP01"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SKLTS16AMCWSH8SP01_4.jpg"</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get similar color images in the catalog for a given uploaded image.</p>

<aside class="notice">
The color search index has to be built first before you can use this API.  
</aside>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">POST /v1/catalog/{catalog_name}/color_search</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>data</td>
<td>image/jpeg</td>
<td>(<strong>Required</strong>) The image. The image can be in PNG, JPEG,</td>
<td></td>
</tr>
<tr>
<td>max_number_of_results</td>
<td>query</td>
<td>maximum number of results to return</td>
<td>12</td>
</tr>
<tr>
<td>color_count</td>
<td>path</td>
<td>The maximum number of dominant colors to search for in an image.</td>
<td>1</td>
</tr>
<tr>
<td>image_max_dimension</td>
<td>query</td>
<td>You can set this parameters to resize the image for faster computation of dominant colors. If your image is of high resolution you can set this parameter to a smaller value (suggested values 256-512) for faster computation. For any image if max(image width,image height) &gt; image_max_dimension resizes the image such that max(image width,image height) = image_max_dimension.</td>
<td>no image resizing</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td><strong>products</strong></td>
<td>A sorted list similar color images. Each item in the list has the following fields.</td>
</tr>
<tr>
<td>image_id</td>
<td>The image id.</td>
</tr>
<tr>
<td>id</td>
<td>The product id.</td>
</tr>
<tr>
<td>image_filename</td>
<td>The image filename.</td>
</tr>
<tr>
<td>image_url</td>
<td>The image url</td>
</tr>
<tr>
<td>distance</td>
<td>The euclidean distance (in LAB space)  between the color in the image to the color in the query.</td>
</tr>
<tr>
<td>rgb</td>
<td>The RGB value of the matching color.</td>
</tr>
</tbody></table>

          <h1 id="dominant-colors">Dominant Colors</h1>

<p>A collection of APIs for computing the dominant colors for an user uploaded image, the entire catalog, and any image in the catalog.</p>

<h2 id="get-dominant-colors-for-an-image">Get dominant colors for an image</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Dominant Colors for an user uploaded image. </span>
<span class="c"># POST /v1/colors/dominant_colors</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># Optional parameters.</span>
<span class="n">params</span><span class="p">[</span><span class="s">'color_count'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">params</span><span class="p">[</span><span class="s">'quality'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="c">#params['image_max_dimension'] = 256</span>
<span class="n">params</span><span class="p">[</span><span class="s">'ignore_background'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'true'</span>
<span class="n">params</span><span class="p">[</span><span class="s">'model'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'person_accurate'</span>
<span class="c">#params['fraction_pixels_threshold'] = 0.1</span>
<span class="n">params</span><span class="p">[</span><span class="s">'color_name_method'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'accurate'</span>
<span class="c">#params['color_name_method'] = 'fast'</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/colors/dominant_colors'</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="c"># Three options to pass the image</span>

<span class="c"># OPTION 1 : Directly post the image</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'Content-Type'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'image/jpeg'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                         <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s">'test_image_2.jpeg'</span><span class="p">,</span><span class="s">'rb'</span><span class="p">))</span>

<span class="s">"""          
# OPTION 2 : Pass the image url
params['image_url'] = 'https://vg-images.condecdn.net/image/oDXPOxw65EZ/crop/405'
response = requests.post(url,
                         headers=headers,
"""</span>

<span class="s">"""
# OPTION 3 : using multipart
image_filename = 'test_image_2.jpeg'
with open(image_filename,'rb') as images_file:
    response = requests.post(url,
                             headers=headers,
                             params=params,
                             files={'image': (image_filename,images_file,'image/jpeg')})   
"""</span> 

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

<span class="c"># Human friendly repsonse.</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="n">image_location</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s?api_key=</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">results</span><span class="p">[</span><span class="s">'image_location'</span><span class="p">]),</span>
                                  <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s">'[original image ] </span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">image_location</span><span class="p">))</span>

<span class="n">image_location</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s&amp;api_key=</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">results</span><span class="p">[</span><span class="s">'bounding_box'</span><span class="p">][</span><span class="s">'image_location'</span><span class="p">]),</span>
                                  <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s">'[bounding box   ] </span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">image_location</span><span class="p">))</span>

<span class="k">for</span> <span class="n">color_info</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="s">'dominant_colors'</span><span class="p">]:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'[dominant colors] </span><span class="si">%</span><span class="s">s - </span><span class="si">%1.2</span><span class="s">f - </span><span class="si">%</span><span class="s">s - </span><span class="si">%</span><span class="s">s - </span><span class="si">%</span><span class="s">s - </span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">color_info</span><span class="p">[</span><span class="s">'hex'</span><span class="p">],</span>
                                  <span class="n">color_info</span><span class="p">[</span><span class="s">'fraction_pixels'</span><span class="p">],</span>
                                  <span class="n">color_info</span><span class="p">[</span><span class="s">'name'</span><span class="p">],</span>
                                  <span class="n">color_info</span><span class="p">[</span><span class="s">'entrylevel_name'</span><span class="p">],</span>
                                  <span class="n">color_info</span><span class="p">[</span><span class="s">'universal_name'</span><span class="p">],</span>
                                  <span class="n">color_info</span><span class="p">[</span><span class="s">'pantone_id'</span><span class="p">]))</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"dominant_colors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tart orange"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">243</span><span class="p">,</span><span class="w">
    </span><span class="mi">91</span><span class="p">,</span><span class="w">
    </span><span class="mi">83</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 17-1656 tcx hot coral"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#f5594b"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"red"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">245</span><span class="p">,</span><span class="w">
    </span><span class="mi">89</span><span class="p">,</span><span class="w">
    </span><span class="mi">75</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">4.941176470588232</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.6938775510204082</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.9607843137254902</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"17-1656 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"fraction_pixels"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5328356594179379</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hot coral"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tomato"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pink lace"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">237</span><span class="p">,</span><span class="w">
    </span><span class="mi">208</span><span class="p">,</span><span class="w">
    </span><span class="mi">221</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 12-2905 tcx cradle pink"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#fae0f3"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pink"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">250</span><span class="p">,</span><span class="w">
    </span><span class="mi">224</span><span class="p">,</span><span class="w">
    </span><span class="mi">243</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">316.1538461538462</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.10399999999999998</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.9803921568627451</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12-2905 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"fraction_pixels"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.23604890187168667</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cradle pink"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pink"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"light hot pink"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">233</span><span class="p">,</span><span class="w">
    </span><span class="mi">173</span><span class="p">,</span><span class="w">
    </span><span class="mi">202</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 14-2710 tcx lilac sachet"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#fbafe3"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pink"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">251</span><span class="p">,</span><span class="w">
    </span><span class="mi">175</span><span class="p">,</span><span class="w">
    </span><span class="mi">227</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">318.94736842105266</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.3027888446215139</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.984313725490196</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14-2710 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"fraction_pixels"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.22574921562263334</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lilac sachet"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pink"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bubblegum"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">230</span><span class="p">,</span><span class="w">
    </span><span class="mi">121</span><span class="p">,</span><span class="w">
    </span><span class="mi">142</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 16-1723 tcx confetti"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#e37687"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pink"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">227</span><span class="p">,</span><span class="w">
    </span><span class="mi">118</span><span class="p">,</span><span class="w">
    </span><span class="mi">135</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">350.64220183486236</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.48017621145374445</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.8901960784313725</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"16-1723 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"fraction_pixels"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0027913015254787408</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"confetti"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pink"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"light salmon pink"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">231</span><span class="p">,</span><span class="w">
    </span><span class="mi">139</span><span class="p">,</span><span class="w">
    </span><span class="mi">144</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 16-1720 tcx strawberry ice"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#e89694"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pink"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">232</span><span class="p">,</span><span class="w">
    </span><span class="mi">150</span><span class="p">,</span><span class="w">
    </span><span class="mi">148</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">1.4285714285714448</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.3620689655172413</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.9098039215686274</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"16-1720 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"fraction_pixels"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0025749215622633344</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"strawberry ice"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pink"</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">],</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13072.34"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/dc3a108d-c4fe-4d15-80fa-1f66518b21e6.jpe?top_left_x=165&amp;top_left_y=24&amp;width=260&amp;height=842"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">165</span><span class="p">,</span><span class="w">
  </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w">
  </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">842</span><span class="p">,</span><span class="w">
  </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">260</span><span class="p">,</span><span class="w">
  </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.841905</span><span class="p">,</span><span class="w">
  </span><span class="s2">"model"</span><span class="p">:</span><span class="w"> </span><span class="s2">"person_accurate"</span><span class="w">
 </span><span class="p">},</span><span class="w">
 </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/dc3a108d-c4fe-4d15-80fa-1f66518b21e6.jpe"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get the dominant colors for an image.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">POST /v1/colors/dominant_colors</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td>image/jpeg</td>
<td>(<strong>Required</strong>) The image. The image can be in PNG, JPEG, BMP, or GIF.</td>
<td></td>
</tr>
<tr>
<td>color_count</td>
<td>query</td>
<td>The maximum number of dominant colors to extract per image.</td>
<td>3</td>
</tr>
<tr>
<td>quality</td>
<td>query</td>
<td>This parameter provides a trade off between the computation time and the quality of the dominant colors. Larger the number faster is the dominant color computation but greater the chance that the colors will be missed. 1 is the highest quality.</td>
<td>1</td>
</tr>
<tr>
<td>image_max_dimension</td>
<td>query</td>
<td>You can set this parameters to resize the image for faster computation of dominant colors. If your images are of very high resolution you can set this parameter to a smaller value (suggested values 256-512) for faster computation. For any image if max(image width,image height) &gt; image_max_dimension resizes the image such that max(image width,image height) = image_max_dimension.</td>
<td>no image resizing</td>
</tr>
<tr>
<td>ignore_background</td>
<td>query</td>
<td>By default we use the entire image to compute the dominant colors. If we set this parameter to <code class="prettyprint">true</code> we internally use some algorithms to ignore the background and mainly focus on the person or apparel.</td>
<td><code class="prettyprint">false</code></td>
</tr>
<tr>
<td>model</td>
<td>query</td>
<td>The model to use to ignore the background. Currently we use person detecors to focus only on the person. The following options are supported <code class="prettyprint">person_fast</code> (faster but slightly less accurate model), <code class="prettyprint">person_accurate</code> (slower but more accurate model) and <code class="prettyprint">person_basic</code> (a basic person detector using standard body proportions).</td>
<td><code class="prettyprint">person_fast</code></td>
</tr>
<tr>
<td>fraction_pixels_threshold</td>
<td>query</td>
<td>Include only those colors whos fraction of pixels is greater than this number.</td>
<td>0.0</td>
</tr>
<tr>
<td>color_name_method</td>
<td>query</td>
<td>The method to use to get the color names, can be either <code class="prettyprint">accurate</code> (exact but slower) or <code class="prettyprint">fast</code> (approximate but fast)</td>
<td><code class="prettyprint">accurate</code></td>
</tr>
</tbody></table>

<p>Instead of the posting the image data you can also pass an image url.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>image_url</td>
<td>query</td>
<td>(<strong>Required</strong>) The image url.</td>
</tr>
</tbody></table>

<p>You can also pass the image using multipart/form-data with the fieldname <code class="prettyprint">image</code>.</p>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>image_location</td>
<td>The uploaded image location.</td>
</tr>
<tr>
<td><strong>dominant_colors</strong></td>
<td>A list of dominant colors for the image sorted in the decreasing order of the fraction of pixels. Each field in the list has the following fieldnames.</td>
</tr>
<tr>
<td>rgb</td>
<td>The <a href="https://en.wikipedia.org/wiki/RGB_color_model">RGB</a> values for the color.</td>
</tr>
<tr>
<td>hsv</td>
<td>The <a href="https://en.wikipedia.org/wiki/HSL_and_HSV">HSV</a> values for the color.</td>
</tr>
<tr>
<td>hex</td>
<td>The hex code for the color.</td>
</tr>
<tr>
<td>universal_name</td>
<td>The best matching universal color name. Berlin and Kay, in a classic <a href="https://en.wikipedia.org/wiki/Basic_Color_Terms:_Their_Universality_and_Evolution">study</a> of worldwide color naming, postulated the existence of <em>11 universal basic color terms</em> across languages. We have included two more colors(<em>olive</em> and <em>yellow green</em>) as per the <a href="https://en.wikipedia.org/wiki/ISCC%E2%80%93NBS_system">ISCC-NBS system</a>.</td>
</tr>
<tr>
<td>entrylevel_name</td>
<td>The best matching entry level color name. A slightly larger curated set of color names which we call <em>entry level</em>. A random person should be able to recognize these color names.</td>
</tr>
<tr>
<td>name</td>
<td>The best guess for the color name based on all the colors available in our color taxonomy.</td>
</tr>
<tr>
<td>fraction_pixels</td>
<td>The fraction of pixels in the bounding box that can be attributed to this color.</td>
</tr>
<tr>
<td><strong>bounding_box</strong></td>
<td>The region in the image used to compute the dominant colors and corresponds to the the bounding box for the central detected person. In case <code class="prettyprint">ignore_background</code> is set to <code class="prettyprint">false</code> this corresponds to the entire image.</td>
</tr>
<tr>
<td>top_left_x</td>
<td>The x co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>top_left_y</td>
<td>The y co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>width</td>
<td>The width of the bounding box.</td>
</tr>
<tr>
<td>height</td>
<td>The height of the bounding box.</td>
</tr>
<tr>
<td>score</td>
<td>The confidence score (between 0 and 1) that the bounding box contains a person.</td>
</tr>
<tr>
<td>model</td>
<td>The person detection model used.</td>
</tr>
</tbody></table>

<aside class="warning">
If the person detector is unable to detect any person in the image then we backoff to the person_basic model. 
</aside>

<h2 id="build-dominant-colors-index">Build dominant colors index</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Build the dominant colors index.</span>
<span class="c"># POST /v1/catalog/{catalog_name}/dominant_colors_index</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c"># Optional parameters.</span>
<span class="n">params</span><span class="p">[</span><span class="s">'colors'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">params</span><span class="p">[</span><span class="s">'max_colors_per_image'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">params</span><span class="p">[</span><span class="s">'fraction_pixels_threshold'</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="n">params</span><span class="p">[</span><span class="s">'embedding'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'true'</span>

<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/dominant_colors_index'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span><span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"done"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"num_of_products"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"results_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-18 17:10:00.141319"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"379"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"dominant_colors"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"num_of_images_missing_colors"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_indexed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"46"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"finish_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-18 17:10:05.956428"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"num_of_images"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60"</span><span class="w">
 </span><span class="p">},</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.51"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Build the dominant colors index.</p>

<p>This loads all the dominant colors for every image in the catalog and then clusters the colors to compute the dominant colors for the entire catalog. Before you can start querying for the dominant colors you need to call this API to start the clustering procedure. </p>

<aside class="notice">
Prior to calling this API the colors search index has to be built, which computes the dominant colors for all the images. 
</aside>

<aside class="notice">
This is a one time long running operation. Depending on your catalog size you will have to wait till the index creation is completed to start using the dominant colors APIs. You can query the status of the index creation using the GET endpoint. The clusteing is completed when the status changes to `done`
</aside>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">POST /v1/catalog/{catalog_name}/dominant_colors_index</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>colors</td>
<td>query</td>
<td>The number of dominant colors to compute.</td>
<td>10</td>
</tr>
<tr>
<td>max_colors_per_image</td>
<td>query</td>
<td>The maximum number of dominant colors to use per image.</td>
<td>all available colors</td>
</tr>
<tr>
<td>fraction_pixels_threshold</td>
<td>query</td>
<td>Include only those colors whos fraction of pixels is greater than this number.</td>
<td>0.0</td>
</tr>
<tr>
<td>embedding</td>
<td>query</td>
<td>If <code class="prettyprint">true</code> embeds the dominant colors in two dimensions using <a href="https://lvdmaaten.github.io/tsne/">t-SNE</a> embedding and returns the embedding as a grid assignment in the results. The optimal gird size is automatically computed based on the number of dominant colors requested.</td>
<td><code class="prettyprint">false</code></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td>A json containing various info about the current status of the index building process.</td>
</tr>
<tr>
<td>status</td>
<td>The current status of the index building process. The status can be one of <code class="prettyprint">clustering</code> or <code class="prettyprint">done</code>. The index is built when the status becomes <code class="prettyprint">done</code>.</td>
</tr>
<tr>
<td>num_of_products</td>
<td>The number of products in the catalog.</td>
</tr>
<tr>
<td>num_of_images</td>
<td>The total number of images in the catalog.</td>
</tr>
<tr>
<td>start_time</td>
<td>The time when the index building started.</td>
</tr>
<tr>
<td>finish_time</td>
<td>The time when the index building finished.</td>
</tr>
<tr>
<td><strong>dominant_colors</strong></td>
<td>Info about dominant color.</td>
</tr>
<tr>
<td>num_of_images_missing_colors</td>
<td>The number of images for which there was no dominant color was found.</td>
</tr>
<tr>
<td>num_of_images_ignored</td>
<td>The number of images that were ignored.</td>
</tr>
<tr>
<td>num_of_images_indexed</td>
<td>The total number of images finally indexed.</td>
</tr>
</tbody></table>

<aside class="warning">
The current version supports building only one index at the same time and does not allow you to build another index when a current index building process in running. Please wait till the current index creation is completed. 
</aside>

<h2 id="get-dominant-colors-index-status">Get dominant colors index status</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get the status of the dominant colors index.</span>
<span class="c"># GET /v1/catalog/{catalog_name}/dominant_colors_index</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/dominant_colors_index'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"done"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"num_of_products"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"results_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-18 17:10:00.141319"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"379"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"dominant_colors"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"num_of_images_missing_colors"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_indexed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"46"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"finish_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-18 17:10:05.956428"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"num_of_images"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60"</span><span class="w">
 </span><span class="p">},</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.51"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get the status of the dominant colors index.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/catalog/{catalog_name}/dominant_colors_index</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td>A json containing various info about the current status of the index building process.</td>
</tr>
<tr>
<td>status</td>
<td>The current status of the index building process. The status can be one of <code class="prettyprint">clustering</code> or <code class="prettyprint">done</code>. The index is built when the status becomes <code class="prettyprint">done</code>.</td>
</tr>
<tr>
<td>num_of_products</td>
<td>The number of products in the catalog.</td>
</tr>
<tr>
<td>num_of_images</td>
<td>The total number of images in the catalog.</td>
</tr>
<tr>
<td>start_time</td>
<td>The time when the index building started.</td>
</tr>
<tr>
<td>finish_time</td>
<td>The time when the index building finished.</td>
</tr>
<tr>
<td><strong>dominant_colors</strong></td>
<td>Info about dominant color.</td>
</tr>
<tr>
<td>num_of_images_missing_colors</td>
<td>The number of images for which there was no dominant color was found.</td>
</tr>
<tr>
<td>num_of_images_ignored</td>
<td>The number of images that were ignored.</td>
</tr>
<tr>
<td>num_of_images_indexed</td>
<td>The total number of images finally indexed.</td>
</tr>
</tbody></table>

<h2 id="delete-the-dominant-colors-index">Delete the dominant colors index</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Delete the dominant colors index.</span>
<span class="c"># DELETE /v1/catalog/{catalog_name}/dominant_colors_index</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/dominant_colors_index'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8.88"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"catalog_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample_catalog"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Delete the dominant colors index.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">DELETE /v1/catalog/{catalog_name}/dominant_colors_index</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>catalog_name</td>
<td>The catalog name.</td>
</tr>
<tr>
<td>deleted</td>
<td>This is <code class="prettyprint">true</code> if the index was successfully deleted.</td>
</tr>
</tbody></table>

<h2 id="get-dominant-colors-for-a-catalog">Get dominant colors for a catalog</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get the dominant colors for all images in the catalog.</span>
<span class="c"># GET /v1/catalog/{catalog_name}/dominant_colors</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">params</span><span class="p">[</span><span class="s">'colors'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">9</span>

<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/dominant_colors'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span><span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"computed_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-01 13:51:12.278474"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.24"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"dominant_colors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"embedding_grid"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.0</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bisque"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">218</span><span class="p">,</span><span class="w">
    </span><span class="mi">192</span><span class="p">,</span><span class="w">
    </span><span class="mi">167</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 13-1011 tcx ivory cream"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1891891891891892</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#dec1aa"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pink"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"lab"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">79.93886694122813</span><span class="p">,</span><span class="w">
    </span><span class="mf">6.754293758508223</span><span class="p">,</span><span class="w">
    </span><span class="mf">15.36922771034137</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"popularity_percentile"</span><span class="p">:</span><span class="w"> </span><span class="mf">100.0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">222</span><span class="p">,</span><span class="w">
    </span><span class="mi">193</span><span class="p">,</span><span class="w">
    </span><span class="mi">170</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"n_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13-1011 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">26.538461538461547</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.23423423423423428</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.8705882352941177</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ivory cream"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tan"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"embedding_grid"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.0</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jet"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">42</span><span class="p">,</span><span class="w">
    </span><span class="mi">43</span><span class="p">,</span><span class="w">
    </span><span class="mi">45</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 19-4004 tcx tap shoe"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.16216216216216217</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#2b2c2d"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"black"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"lab"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">17.93853276291656</span><span class="p">,</span><span class="w">
    </span><span class="mf">-0.2022203751522733</span><span class="p">,</span><span class="w">
    </span><span class="mf">-0.8051385777718023</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"popularity_percentile"</span><span class="p">:</span><span class="w"> </span><span class="mf">83.33333333333334</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">43</span><span class="p">,</span><span class="w">
    </span><span class="mi">44</span><span class="p">,</span><span class="w">
    </span><span class="mi">45</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"n_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19-4004 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">210.0000000000001</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.0444444444444444</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.17647058823529413</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tap shoe"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"black"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"embedding_grid"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">2.0</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.0</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"silver sand"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">197</span><span class="p">,</span><span class="w">
    </span><span class="mi">198</span><span class="p">,</span><span class="w">
    </span><span class="mi">199</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 14-4102 tcx glacier gray"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.16216216216216217</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#c4c6c6"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"white"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"lab"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">79.72810735816829</span><span class="p">,</span><span class="w">
    </span><span class="mf">-0.6892262565815765</span><span class="p">,</span><span class="w">
    </span><span class="mf">-0.24903099362945103</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"popularity_percentile"</span><span class="p">:</span><span class="w"> </span><span class="mf">83.33333333333334</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">196</span><span class="p">,</span><span class="w">
    </span><span class="mi">198</span><span class="p">,</span><span class="w">
    </span><span class="mi">198</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"n_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14-4102 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">180.0</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.010101010101010055</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.7764705882352941</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"glacier gray"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"silver"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"embedding_grid"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="mf">1.0</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"granite gray"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">102</span><span class="p">,</span><span class="w">
    </span><span class="mi">103</span><span class="p">,</span><span class="w">
    </span><span class="mi">109</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 18-4006 tcx quiet shade"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10810810810810811</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#61636a"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gray"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"lab"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">42.0086797684853</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.7439991692389514</span><span class="p">,</span><span class="w">
    </span><span class="mf">-4.226920295539904</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"popularity_percentile"</span><span class="p">:</span><span class="w"> </span><span class="mf">55.55555555555556</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">97</span><span class="p">,</span><span class="w">
    </span><span class="mi">99</span><span class="p">,</span><span class="w">
    </span><span class="mi">106</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"n_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18-4006 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">226.66666666666663</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.08490566037735858</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.41568627450980394</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quiet shade"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gray"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"embedding_grid"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
    </span><span class="mf">1.0</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"copper red"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">209</span><span class="p">,</span><span class="w">
    </span><span class="mi">111</span><span class="p">,</span><span class="w">
    </span><span class="mi">82</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 16-1441 tcx arabesque"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10810810810810811</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#c5694a"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"red"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"lab"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">54.52250103123478</span><span class="p">,</span><span class="w">
    </span><span class="mf">33.8426536300997</span><span class="p">,</span><span class="w">
    </span><span class="mf">33.601454680289436</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"popularity_percentile"</span><span class="p">:</span><span class="w"> </span><span class="mf">55.55555555555556</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">197</span><span class="p">,</span><span class="w">
    </span><span class="mi">105</span><span class="p">,</span><span class="w">
    </span><span class="mi">74</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"n_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"16-1441 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">15.121951219512198</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.6243654822335025</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.7725490196078432</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arabesque"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tomato"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"embedding_grid"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">2.0</span><span class="p">,</span><span class="w">
    </span><span class="mf">1.0</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"steel teal"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">85</span><span class="p">,</span><span class="w">
    </span><span class="mi">143</span><span class="p">,</span><span class="w">
    </span><span class="mi">145</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 17-4818 tcx bristol blue"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10810810810810811</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#54919a"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gray"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"lab"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">56.55290842710919</span><span class="p">,</span><span class="w">
    </span><span class="mf">-17.2649007031071</span><span class="p">,</span><span class="w">
    </span><span class="mf">-10.93920065553089</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"popularity_percentile"</span><span class="p">:</span><span class="w"> </span><span class="mf">55.55555555555556</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">84</span><span class="p">,</span><span class="w">
    </span><span class="mi">145</span><span class="p">,</span><span class="w">
    </span><span class="mi">154</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"n_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"17-4818 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">187.71428571428572</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.4545454545454545</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.6039215686274509</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bristol blue"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"teal"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"embedding_grid"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="mf">2.0</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"platinum"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">239</span><span class="p">,</span><span class="w">
    </span><span class="mi">235</span><span class="p">,</span><span class="w">
    </span><span class="mi">231</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 11-1001 tcx white alyssum"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.08108108108108109</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#ebe5e5"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"white"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"lab"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">91.396105013505</span><span class="p">,</span><span class="w">
    </span><span class="mf">2.0227459343862275</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.7108750672036868</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"popularity_percentile"</span><span class="p">:</span><span class="w"> </span><span class="mf">33.33333333333333</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">235</span><span class="p">,</span><span class="w">
    </span><span class="mi">229</span><span class="p">,</span><span class="w">
    </span><span class="mi">229</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"n_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11-1001 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.025531914893616947</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.9215686274509803</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"white alyssum"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"off white"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"embedding_grid"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
    </span><span class="mf">2.0</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pale turquoise"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">188</span><span class="p">,</span><span class="w">
    </span><span class="mi">227</span><span class="p">,</span><span class="w">
    </span><span class="mi">223</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 12-5410 tcx bleached aqua"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05405405405405406</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#bce9e9"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"white"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"lab"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">89.32296955480805</span><span class="p">,</span><span class="w">
    </span><span class="mf">-14.40754901948721</span><span class="p">,</span><span class="w">
    </span><span class="mf">-4.797498595756533</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"popularity_percentile"</span><span class="p">:</span><span class="w"> </span><span class="mf">22.22222222222222</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">188</span><span class="p">,</span><span class="w">
    </span><span class="mi">233</span><span class="p">,</span><span class="w">
    </span><span class="mi">233</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"n_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12-5410 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">180.0</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.19313304721030033</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.9137254901960784</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bleached aqua"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sky blue"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"embedding_grid"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">2.0</span><span class="p">,</span><span class="w">
    </span><span class="mf">2.0</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"antique brass"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">202</span><span class="p">,</span><span class="w">
    </span><span class="mi">153</span><span class="p">,</span><span class="w">
    </span><span class="mi">120</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 16-1331 tcx toast"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.02702702702702703</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#cc9773"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"orange"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"lab"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">66.68024118683753</span><span class="p">,</span><span class="w">
    </span><span class="mf">15.365610229684856</span><span class="p">,</span><span class="w">
    </span><span class="mf">26.723238983154786</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"popularity_percentile"</span><span class="p">:</span><span class="w"> </span><span class="mf">11.11111111111111</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">204</span><span class="p">,</span><span class="w">
    </span><span class="mi">151</span><span class="p">,</span><span class="w">
    </span><span class="mi">115</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"n_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"16-1331 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">24.2696629213483</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.4362745098039216</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.8</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"toast"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tan"</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">],</span><span class="w">
 </span><span class="s2">"grid_size"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="mi">3</span><span class="w">
 </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get the dominant colors for all images in the catalog.</p>

<p>The dominant colors is to be interpreted as a representative of the cluster of similar colors.</p>

<aside class="notice">
Prior to calling this API the dominant colors index has to be built.
</aside>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/catalog/{catalog_name}/dominant_colors</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>colors</td>
<td>query</td>
<td>The number of dominant colors to return.</td>
<td>10</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>computed_on</td>
<td>The time the dominant colors where computed.</td>
</tr>
<tr>
<td>grid_size</td>
<td>The grid size for the embedding.</td>
</tr>
<tr>
<td><strong>dominant_colors</strong></td>
<td>A list of dominant colors for the catalog sorted in the decreasing order of popularity. Each field in the list has the following fieldnames.</td>
</tr>
<tr>
<td>rgb</td>
<td>The <a href="https://en.wikipedia.org/wiki/RGB_color_model">RGB</a> values for the color.</td>
</tr>
<tr>
<td>hsv</td>
<td>The <a href="https://en.wikipedia.org/wiki/HSL_and_HSV">HSV</a> values for the color.</td>
</tr>
<tr>
<td>hex</td>
<td>The hex code for the color.</td>
</tr>
<tr>
<td>universal_name</td>
<td>The best matching universal color name. Berlin and Kay, in a classic <a href="https://en.wikipedia.org/wiki/Basic_Color_Terms:_Their_Universality_and_Evolution">study</a> of worldwide color naming, postulated the existence of <em>11 universal basic color terms</em> across languages. We have included two more colors(<em>olive</em> and <em>yellow green</em>) as per the <a href="https://en.wikipedia.org/wiki/ISCC%E2%80%93NBS_system">ISCC-NBS system</a>.</td>
</tr>
<tr>
<td>entrylevel_name</td>
<td>The best matching entry level color name. A slightly larger curated set of color names which we call <em>entry level</em>. A random person should be able to recognize these color names.</td>
</tr>
<tr>
<td>name</td>
<td>The best guess for the color name based on all the colors avaialable in our color taxonomy.</td>
</tr>
<tr>
<td>popularity</td>
<td>A score between 0 and 1 indicating the popularity of the color.</td>
</tr>
<tr>
<td>popularity_percentile</td>
<td>The corresponding percentile score.</td>
</tr>
<tr>
<td>n_instances</td>
<td>The number of colors in the cluster.</td>
</tr>
<tr>
<td>embedding_grid</td>
<td>The position in the grid.</td>
</tr>
</tbody></table>

<h2 id="get-dominant-colors-for-a-product">Get dominant colors for a product</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get the dominant colors for an image in the catalog.</span>
<span class="c"># GET /v1/catalog/{catalog_name}/dominant_colors/{id}/{image_id}</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="c"># Query parameters.</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># Optional parameters.</span>
<span class="c">#params['fraction_pixels_threshold'] = 0.1</span>

<span class="c"># Path parameters</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span> 
<span class="nb">id</span> <span class="o">=</span><span class="s">'SHRES16AWFSDR9346B'</span> 
<span class="n">image_id</span> <span class="o">=</span> <span class="s">'1'</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/dominant_colors/</span><span class="si">%</span><span class="s">s/</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">,</span><span class="nb">id</span><span class="p">,</span><span class="n">image_id</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                        <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                        <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

<span class="c"># Human friendly repsonse.</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="s">'[image url      ] </span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="s">'image_url'</span><span class="p">]))</span>

<span class="n">image_location</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s?api_key=</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">results</span><span class="p">[</span><span class="s">'image_location'</span><span class="p">]),</span>
                                  <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s">'[original image ] </span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">image_location</span><span class="p">))</span>

<span class="n">image_location</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s&amp;api_key=</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">results</span><span class="p">[</span><span class="s">'bounding_box'</span><span class="p">][</span><span class="s">'image_location'</span><span class="p">]),</span>
                                  <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s">'[bounding box   ] </span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">image_location</span><span class="p">))</span>

<span class="k">for</span> <span class="n">color_info</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="s">'dominant_colors'</span><span class="p">]:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'[dominant colors] </span><span class="si">%</span><span class="s">s - </span><span class="si">%1.2</span><span class="s">f - </span><span class="si">%</span><span class="s">s - </span><span class="si">%</span><span class="s">s - </span><span class="si">%</span><span class="s">s - </span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">color_info</span><span class="p">[</span><span class="s">'hex'</span><span class="p">],</span>
                                  <span class="n">color_info</span><span class="p">[</span><span class="s">'fraction_pixels'</span><span class="p">],</span>
                                  <span class="n">color_info</span><span class="p">[</span><span class="s">'name'</span><span class="p">],</span>
                                  <span class="n">color_info</span><span class="p">[</span><span class="s">'entrylevel_name'</span><span class="p">],</span>
                                  <span class="n">color_info</span><span class="p">[</span><span class="s">'universal_name'</span><span class="p">],</span>
                                  <span class="n">color_info</span><span class="p">[</span><span class="s">'pantone_id'</span><span class="p">]))</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"dominant_colors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dark coral"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">194</span><span class="p">,</span><span class="w">
    </span><span class="mi">90</span><span class="p">,</span><span class="w">
    </span><span class="mi">60</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 18-1447 tcx orange rust"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#c56143"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"red"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"lab"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">52.760181298097564</span><span class="p">,</span><span class="w">
    </span><span class="mf">37.55416477816376</span><span class="p">,</span><span class="w">
    </span><span class="mf">35.351008096609306</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">197</span><span class="p">,</span><span class="w">
    </span><span class="mi">97</span><span class="p">,</span><span class="w">
    </span><span class="mi">67</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">13.846153846153868</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.6598984771573604</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.7725490196078432</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18-1447 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"fraction_pixels"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.7691573737253264</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"orange rust"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tomato"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nude"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">241</span><span class="p">,</span><span class="w">
    </span><span class="mi">206</span><span class="p">,</span><span class="w">
    </span><span class="mi">179</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 12-0913 tcx alesan"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#eecdb4"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"white"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"lab"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">84.55409785378009</span><span class="p">,</span><span class="w">
    </span><span class="mf">7.834123124968007</span><span class="p">,</span><span class="w">
    </span><span class="mf">16.72944045045519</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">238</span><span class="p">,</span><span class="w">
    </span><span class="mi">205</span><span class="p">,</span><span class="w">
    </span><span class="mi">180</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">25.86206896551721</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.24369747899159655</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.9333333333333333</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12-0913 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"fraction_pixels"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.14824974655614526</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alesan"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peach"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"seal brown"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">67</span><span class="p">,</span><span class="w">
    </span><span class="mi">57</span><span class="p">,</span><span class="w">
    </span><span class="mi">55</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 19-0910 tcx mulch"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#453a39"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"black"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"lab"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">25.523637518334688</span><span class="p">,</span><span class="w">
    </span><span class="mf">4.61600764818082</span><span class="p">,</span><span class="w">
    </span><span class="mf">2.4026609351798234</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">69</span><span class="p">,</span><span class="w">
    </span><span class="mi">58</span><span class="p">,</span><span class="w">
    </span><span class="mi">57</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">5.0</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.17391304347826075</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.27058823529411763</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19-0910 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"fraction_pixels"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.08259287971852823</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mulch"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"black"</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">],</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.74"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/catalog/sample_catalog/images/SHRES16AWFSDR9346B_1.jpg?top_left_x=83&amp;top_left_y=0&amp;width=107&amp;height=365"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">83</span><span class="p">,</span><span class="w">
  </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">365</span><span class="p">,</span><span class="w">
  </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">107</span><span class="p">,</span><span class="w">
  </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.800896</span><span class="w">
 </span><span class="p">},</span><span class="w">
 </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/SHRES16AWFSDR9346B18/Look_Medium.jpg"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/catalog/sample_catalog/images/SHRES16AWFSDR9346B_1.jpg"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get the dominant colors for an image in the catalog.</p>

<aside class="notice">
Prior to calling this API the dominant colors index has to be built.
</aside>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/catalog/{catalog_name}/dominant_colors/{id}/{image_id}</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>path</td>
<td>(<strong>Required</strong>) The product id.</td>
<td></td>
</tr>
<tr>
<td>image_id</td>
<td>path</td>
<td>(<strong>Required</strong>) The image id.</td>
<td></td>
</tr>
<tr>
<td>fraction_pixels_threshold</td>
<td>query</td>
<td>Include only those colors whos fraction of pixels is greater than this number.</td>
<td>0.0</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>computed_on</td>
<td>The time the dominant colors where computed.</td>
</tr>
<tr>
<td><strong>dominant_colors</strong></td>
<td>A list of dominant colors. Each field in the list has the following fieldnames.</td>
</tr>
<tr>
<td>rgb</td>
<td>The <a href="https://en.wikipedia.org/wiki/RGB_color_model">RGB</a> values for the color.</td>
</tr>
<tr>
<td>hsv</td>
<td>The <a href="https://en.wikipedia.org/wiki/HSL_and_HSV">HSV</a> values for the color.</td>
</tr>
<tr>
<td>hex</td>
<td>The hex code for the color.</td>
</tr>
<tr>
<td>universal_name</td>
<td>The best matching universal color name. Berlin and Kay, in a classic <a href="https://en.wikipedia.org/wiki/Basic_Color_Terms:_Their_Universality_and_Evolution">study</a> of worldwide color naming, postulated the existence of <em>11 universal basic color terms</em> across languages. We have included two more colors(<em>olive</em> and <em>yellow green</em>) as per the <a href="https://en.wikipedia.org/wiki/ISCC%E2%80%93NBS_system">ISCC-NBS system</a>.</td>
</tr>
<tr>
<td>entrylevel_name</td>
<td>The best matching entry level color name. A slightly larger curated set of color names which we call <em>entry level</em>. A random person should be able to recognize these color names.</td>
</tr>
<tr>
<td>name</td>
<td>The best guess for the color name based on all the colors avaialable in our color taxonomy.</td>
</tr>
<tr>
<td><strong>bounding_box</strong></td>
<td>The region in the image used to compute the dominant colors and corresponds to the the bounding box for the central detected person.</td>
</tr>
<tr>
<td>top_left_x</td>
<td>The x co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>top_left_y</td>
<td>The y co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>width</td>
<td>The width of the bounding box.</td>
</tr>
<tr>
<td>height</td>
<td>The height of the bounding box.</td>
</tr>
<tr>
<td>score</td>
<td>The confidence score (between 0 and 1) that the bounding box contains a person.</td>
</tr>
</tbody></table>

          <h1 id="color-trends">Color Trends</h1>

<p>Analyze and forecast temporal color trends.</p>

<h2 id="build-color-trend-report">Build color trend report</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Start computing the color trend report.</span>
<span class="c"># POST /v1/color_trends/{report_name}/trend_report</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c"># Pass the catalog names as a comma separated list of names.</span>
<span class="n">catalog_names</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">catalog_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">'vogue-autumn-winter-2014'</span><span class="p">)</span>
<span class="n">catalog_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">'vogue-autumn-winter-2015'</span><span class="p">)</span>
<span class="n">catalog_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">'vogue-autumn-winter-2016'</span><span class="p">)</span>
<span class="n">catalog_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">'vogue-autumn-winter-2017'</span><span class="p">)</span>
<span class="n">params</span><span class="p">[</span><span class="s">'catalog_names'</span><span class="p">]</span> <span class="o">=</span> <span class="s">','</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">catalog_names</span><span class="p">)</span>

<span class="c"># Optional parameters.</span>
<span class="n">params</span><span class="p">[</span><span class="s">'colors'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">params</span><span class="p">[</span><span class="s">'max_colors_per_image'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">report_name</span> <span class="o">=</span> <span class="s">'vogue-autumn-winter'</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/color_trends/</span><span class="si">%</span><span class="s">s/trend_report'</span><span class="o">%</span><span class="p">(</span><span class="n">report_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span><span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"dominant_colors"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"num_of_products"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_missing_colors"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images"</span><span class="p">:</span><span class="w"> </span><span class="s2">"90"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_processed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"90"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"num_of_products"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_missing_colors"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images"</span><span class="p">:</span><span class="w"> </span><span class="s2">"80"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_processed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"80"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"num_of_products"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_missing_colors"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_processed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"num_of_products"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_missing_colors"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images"</span><span class="p">:</span><span class="w"> </span><span class="s2">"85"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_processed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"85"</span><span class="w">
   </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"done"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-27 10:07:01.804707"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"finish_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-27 10:07:09.043789"</span><span class="w">
 </span><span class="p">},</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6.24"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Start computing the color trend report.</p>

<p>This API does color trend analysis and forecasting. The input is a time ordered list of catalogs. This first loads all the dominant colors for every image in the catalog and then clusters the colors. Then for each cluster is computes a popularity score for the cluster for every catalog. Once we have the poularity scores for a color over multiple time points we then apply a regression model to forecast the popularity score for the next year/time point.</p>

<aside class="notice">
Prior to calling this API, the catalog has to be ingested and the colors search index (which computes the dominant colors for all the images) has to be built for all the catalogs.
</aside>

<aside class="notice">
This is a one time long running operation. Depending on your catalog size you will have to wait till the analysis is completed to start querying the trend report. You can query the status of the index creation using the GET endpoint. The analysis is completed when the status changes to `done`
</aside>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">POST /v1/color_trends/{report_name}/trend_report</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>report_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The report name. Every trend analysis is refered by a unique report name.</td>
<td></td>
</tr>
<tr>
<td>catalog_names</td>
<td>query</td>
<td>(<strong>Required</strong>) A time ordered list of catalog names. Pass the catalog names as a comma separated list of names, for example, <code class="prettyprint">catalog_names=vogue-autumn-winter-2014,vogue-autumn-winter-2015,vogue-autumn-winter-2016,vogue-autumn-winter-2017</code>. Note that these catalog have to be ingested and the color search index has to be computed for each of the catalog. It is important to pass the catalog names in the right time order.</td>
<td></td>
</tr>
<tr>
<td>colors</td>
<td>query</td>
<td>The number of clusters to use in the analysis. The poularity sscore is computed for every cluster.</td>
<td>10</td>
</tr>
<tr>
<td>max_colors_per_image</td>
<td>query</td>
<td>The maximum number of dominant colors to use per image.</td>
<td>all available colors</td>
</tr>
<tr>
<td>fraction_pixels_threshold</td>
<td>query</td>
<td>Include only those colors whos fraction of pixels is greater than this number.</td>
<td>0.0</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td>A json containing various info about the current status.</td>
</tr>
<tr>
<td>status</td>
<td>The current status of the trend analysis. The status can be one of <code class="prettyprint">retrieving dominant colors</code>,<code class="prettyprint">clustering</code>,<code class="prettyprint">trend forecasting</code> or <code class="prettyprint">done</code>. The analysis is when the status becomes <code class="prettyprint">done</code>.</td>
</tr>
<tr>
<td>start_time</td>
<td>The time when the trend analysis started.</td>
</tr>
<tr>
<td>finish_time</td>
<td>The time when the trend analysis finished.</td>
</tr>
<tr>
<td><strong>dominant_colors</strong></td>
<td>Info about retrieving dominant colors.</td>
</tr>
<tr>
<td>num_of_products</td>
<td>The number of products in the catalog.</td>
</tr>
<tr>
<td>num_of_images</td>
<td>The total number of images in the catalog.</td>
</tr>
<tr>
<td>num_of_images_missing_colors</td>
<td>The number of images for which there was no dominant color was found.</td>
</tr>
<tr>
<td>num_of_images_ignored</td>
<td>The number of images that were ignored.</td>
</tr>
<tr>
<td>num_of_images_processed</td>
<td>The total number of images processed.</td>
</tr>
</tbody></table>

<aside class="warning">
The current version supports building only one trend report at the same time and does not allow you to build another report when a current report building process in running. Please wait till the current analysis is completed. 
</aside>

<h2 id="get-status-of-color-trend-report">Get status of color trend report</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get the status of the color trend report.</span>
<span class="c"># GET /v1/color_trends/{report_name}/trend_report</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="n">report_name</span> <span class="o">=</span> <span class="s">'vogue-autumn-winter'</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/color_trends/</span><span class="si">%</span><span class="s">s/trend_report'</span><span class="o">%</span><span class="p">(</span><span class="n">report_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"dominant_colors"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"num_of_products"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_missing_colors"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images"</span><span class="p">:</span><span class="w"> </span><span class="s2">"90"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_processed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"90"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"num_of_products"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_missing_colors"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images"</span><span class="p">:</span><span class="w"> </span><span class="s2">"80"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_processed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"80"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"num_of_products"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_missing_colors"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_processed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"num_of_products"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_missing_colors"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images"</span><span class="p">:</span><span class="w"> </span><span class="s2">"85"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"num_of_images_processed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"85"</span><span class="w">
   </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"done"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-27 10:07:01.804707"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"finish_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-27 10:07:09.043789"</span><span class="w">
 </span><span class="p">},</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6.24"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get the status of the color trend report.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/color_trends/{report_name}/trend_report</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>report_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The report name. Every trend analysis is refered by a unique report name.</td>
<td></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td>A json containing various info about the current status.</td>
</tr>
<tr>
<td>status</td>
<td>The current status of the trend analysis. The status can be one of <code class="prettyprint">retrieving dominant colors</code>,<code class="prettyprint">clustering</code>,<code class="prettyprint">trend forecasting</code> or <code class="prettyprint">done</code>. The analysis is when the status becomes <code class="prettyprint">done</code>.</td>
</tr>
<tr>
<td>start_time</td>
<td>The time when the trend analysis started.</td>
</tr>
<tr>
<td>finish_time</td>
<td>The time when the trend analysis finished.</td>
</tr>
<tr>
<td><strong>dominant_colors</strong></td>
<td>Info about retrieving dominant colors.</td>
</tr>
<tr>
<td>num_of_products</td>
<td>The number of products in the catalog.</td>
</tr>
<tr>
<td>num_of_images</td>
<td>The total number of images in the catalog.</td>
</tr>
<tr>
<td>num_of_images_missing_colors</td>
<td>The number of images for which there was no dominant color was found.</td>
</tr>
<tr>
<td>num_of_images_ignored</td>
<td>The number of images that were ignored.</td>
</tr>
<tr>
<td>num_of_images_processed</td>
<td>The total number of images processed.</td>
</tr>
</tbody></table>

<h2 id="delete-color-trend-report">Delete color trend report</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Delete the color trend report.</span>
<span class="c"># DELETE /v1/color_trends/{report_name}/trend_report</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="n">report_name</span> <span class="o">=</span> <span class="s">'vogue-autumn-winter'</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/color_trends/</span><span class="si">%</span><span class="s">s/trend_report'</span><span class="o">%</span><span class="p">(</span><span class="n">report_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"134.87"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"report_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vogue-autumn-winter"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Delete the color trend report.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">DELETE /v1/color_trends/{report_name}/trend_report</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>report_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The report name. Every trend analysis is refered by a unique report name.</td>
<td></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>report_name</td>
<td>The report name.</td>
</tr>
<tr>
<td>deleted</td>
<td>Returns true is the report was successfully deleted.</td>
</tr>
</tbody></table>

<h2 id="forecast-popular-colors">Forecast popular colors</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get the popular colors.</span>
<span class="c"># GET /v1/color_trends/{report_name}/popular_colors</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">params</span><span class="p">[</span><span class="s">'colors'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>
<span class="c"># Optional</span>
<span class="c">#params['catalog_name'] = 'vogue-autumn-winter-2017'</span>

<span class="n">report_name</span> <span class="o">=</span> <span class="s">'vogue-autumn-winter'</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/color_trends/</span><span class="si">%</span><span class="s">s/popular_colors'</span><span class="o">%</span><span class="p">(</span><span class="n">report_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span><span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

<span class="c"># Print the colors.</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="n">years</span> <span class="o">=</span> <span class="p">[</span><span class="s">'2013'</span><span class="p">,</span><span class="s">'2014'</span><span class="p">,</span><span class="s">'2015'</span><span class="p">,</span><span class="s">'2016'</span><span class="p">,</span><span class="s">'2017'</span><span class="p">]</span>
<span class="k">for</span> <span class="n">color_info</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="s">'colors'</span><span class="p">]:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'popularity [</span><span class="si">%</span><span class="s">s] [</span><span class="si">%+1.2</span><span class="s">f] trend [</span><span class="si">%</span><span class="s">s] [</span><span class="si">%+1.2</span><span class="s">f] [</span><span class="si">%</span><span class="s">s]'</span><span class="o">%</span><span class="p">(</span>
                          <span class="s">' '</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s">'</span><span class="si">%1.2</span><span class="s">f'</span><span class="o">%</span><span class="p">(</span><span class="n">color_info</span><span class="p">[</span><span class="s">'popularity_by_id'</span><span class="p">][</span><span class="s">'</span><span class="si">%</span><span class="s">s-</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">report_name</span><span class="p">,</span><span class="n">year</span><span class="p">)])</span> <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">years</span><span class="p">]),</span>
                          <span class="n">color_info</span><span class="p">[</span><span class="s">'popularity_forecast'</span><span class="p">][</span><span class="s">'mean'</span><span class="p">],</span>
                          <span class="s">' '</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s">'</span><span class="si">%+1.2</span><span class="s">f'</span><span class="o">%</span><span class="p">(</span><span class="n">color_info</span><span class="p">[</span><span class="s">'trend_by_id'</span><span class="p">][</span><span class="s">'</span><span class="si">%</span><span class="s">s-</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">report_name</span><span class="p">,</span><span class="n">year</span><span class="p">)])</span> <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">years</span><span class="p">]),</span>
                          <span class="n">color_info</span><span class="p">[</span><span class="s">'trend_forecast'</span><span class="p">][</span><span class="s">'mean'</span><span class="p">],</span>
                          <span class="n">color_info</span><span class="p">[</span><span class="s">'pantone_id'</span><span class="p">]))</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"computed_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-08 08:23:29.263227"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.98"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"colors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"trend_forecast"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"mean"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.11846037510176805</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jet black"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jet"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">45</span><span class="p">,</span><span class="w">
    </span><span class="mi">44</span><span class="p">,</span><span class="w">
    </span><span class="mi">47</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 19-0303 tcx jet black"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"trend_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.27372356393630976</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.08555227333057681</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10808528033524438</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.045649819903448</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.12474437627811862</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#2e2d30"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"black"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity_by_id_predicted"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10106382816649939</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.17857142615067614</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.12121212398756362</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.12999999648153948</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.09183673705739197</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity_percentile"</span><span class="p">:</span><span class="w"> </span><span class="mf">90.0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">46</span><span class="p">,</span><span class="w">
    </span><span class="mi">45</span><span class="p">,</span><span class="w">
    </span><span class="mi">48</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"n_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">122</span><span class="p">,</span><span class="w">
   </span><span class="s2">"lab"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">18.67502318692506</span><span class="p">,</span><span class="w">
    </span><span class="mf">1.1641448868809912</span><span class="p">,</span><span class="w">
    </span><span class="mf">-1.7731775401694017</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19-0303 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"total_instances_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mi">188</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mi">196</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mi">198</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mi">196</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">259.99999999999994</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.06249999999999989</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.18823529411764706</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"n_instances_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mi">19</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mi">35</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"black"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10106382978723404</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.17857142857142858</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.12121212121212122</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.13</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.09183673469387756</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity_forecast"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"confidence_interval_lower_limit"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.030499034528666535</span><span class="p">,</span><span class="w">
    </span><span class="s2">"confidence_interval_upper_limit"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3087030731262529</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mean"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1696010538274597</span><span class="w">
   </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"trend_forecast"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"mean"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.32502210212075666</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deep well"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"raisin black"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">44</span><span class="p">,</span><span class="w">
    </span><span class="mi">42</span><span class="p">,</span><span class="w">
    </span><span class="mi">51</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 19-3713 tcx deep well"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"trend_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.015566962791144334</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.33375267885934234</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.26977967317365265</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.22423467190267088</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1114519427402863</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#22202a"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"black"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity_by_id_predicted"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.21276595355640066</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.09693877266310735</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.060606066963965866</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.07499999163851878</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.11734694598084383</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity_percentile"</span><span class="p">:</span><span class="w"> </span><span class="mf">85.0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">34</span><span class="p">,</span><span class="w">
    </span><span class="mi">32</span><span class="p">,</span><span class="w">
    </span><span class="mi">42</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"n_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">109</span><span class="p">,</span><span class="w">
   </span><span class="s2">"lab"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">12.86179904012861</span><span class="p">,</span><span class="w">
    </span><span class="mf">3.5801169702007196</span><span class="p">,</span><span class="w">
    </span><span class="mf">-6.343380699850043</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19-3713 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"total_instances_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mi">188</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mi">196</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mi">198</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mi">196</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">252.0</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.23809523809523814</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.16470588235294117</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"n_instances_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mi">19</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mi">23</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"black"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2127659574468085</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.09693877551020408</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.06060606060606061</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.075</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.11734693877551021</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity_forecast"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"confidence_interval_lower_limit"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0614139235353279</span><span class="p">,</span><span class="w">
    </span><span class="s2">"confidence_interval_upper_limit"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.24248830328589702</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mean"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.15195111341061246</span><span class="w">
   </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"trend_forecast"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"mean"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.27244798323564934</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"black ink"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"black olive"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">68</span><span class="p">,</span><span class="w">
    </span><span class="mi">65</span><span class="p">,</span><span class="w">
    </span><span class="mi">60</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 19-0506 tcx black ink"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"trend_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.34844147476010096</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.6817749099763932</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.8257142812078491</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.1785714478460592</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.065439672801636</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#444340"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"black"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity_by_id_predicted"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.02127659559146082</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10714285332584271</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.04545454898588769</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0799999966233297</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.07142857173438694</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity_percentile"</span><span class="p">:</span><span class="w"> </span><span class="mf">75.0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">68</span><span class="p">,</span><span class="w">
    </span><span class="mi">67</span><span class="p">,</span><span class="w">
    </span><span class="mi">64</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"n_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="p">,</span><span class="w">
   </span><span class="s2">"lab"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">28.415459788429516</span><span class="p">,</span><span class="w">
    </span><span class="mf">-0.22870650807427229</span><span class="p">,</span><span class="w">
    </span><span class="mf">1.9645499625216334</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19-0506 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"total_instances_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mi">188</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mi">196</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mi">198</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mi">196</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">45.00000000000006</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.05882352941176472</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.26666666666666666</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"n_instances_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mi">21</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"black"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.02127659574468085</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10714285714285714</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.045454545454545456</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.08</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.07142857142857142</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity_forecast"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"confidence_interval_lower_limit"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.0005011718754029948</span><span class="p">,</span><span class="w">
    </span><span class="s2">"confidence_interval_upper_limit"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.19164819507100214</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mean"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.09557351159779957</span><span class="w">
   </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"trend_forecast"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"mean"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5309714246051445</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"heron"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gray blue"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">98</span><span class="p">,</span><span class="w">
    </span><span class="mi">97</span><span class="p">,</span><span class="w">
    </span><span class="mi">126</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 18-3817 tcx heron"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"trend_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.25516862766198656</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.008004838367361827</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.004636694980282223</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1394553051314291</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.019427402862985686</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#5d607d"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gray"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity_by_id_predicted"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.015957453050017</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.030612222082882584</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.015151550242968215</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.01499998395269847</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.02040815601843815</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity_percentile"</span><span class="p">:</span><span class="w"> </span><span class="mf">35.0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">93</span><span class="p">,</span><span class="w">
    </span><span class="mi">96</span><span class="p">,</span><span class="w">
    </span><span class="mi">125</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"n_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">19</span><span class="p">,</span><span class="w">
   </span><span class="s2">"lab"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">41.49038321061422</span><span class="p">,</span><span class="w">
    </span><span class="mf">5.772538816200379</span><span class="p">,</span><span class="w">
    </span><span class="mf">-16.61053151124028</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18-3817 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"total_instances_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mi">188</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mi">196</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mi">198</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mi">196</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">234.375</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.256</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.49019607843137253</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"n_instances_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gray"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.015957446808510637</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.030612244897959183</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.015151515151515152</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.015</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.02040816326530612</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity_forecast"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"confidence_interval_lower_limit"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.03869663665993158</span><span class="p">,</span><span class="w">
    </span><span class="s2">"confidence_interval_upper_limit"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05696091646598237</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mean"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.047828776562956976</span><span class="w">
   </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"trend_forecast"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"mean"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0970617321776512</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"white sand"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"timberwolf"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">219</span><span class="p">,</span><span class="w">
    </span><span class="mi">213</span><span class="p">,</span><span class="w">
    </span><span class="mi">209</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 13-0002 tcx white sand"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"trend_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.20115535841989507</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.07030295267334408</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.16875410705247687</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.16146461244093568</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.07566462167689161</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#d7d1d0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"white"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity_by_id_predicted"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.09042553119131298</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.09183673675117678</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.08585857644650922</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.050000010183979496</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0612244844941708</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity_percentile"</span><span class="p">:</span><span class="w"> </span><span class="mf">80.0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">215</span><span class="p">,</span><span class="w">
    </span><span class="mi">209</span><span class="p">,</span><span class="w">
    </span><span class="mi">208</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"n_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">74</span><span class="p">,</span><span class="w">
   </span><span class="s2">"lab"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">84.27837486243521</span><span class="p">,</span><span class="w">
    </span><span class="mf">1.8817398220458137</span><span class="p">,</span><span class="w">
    </span><span class="mf">1.2191511354760154</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13-0002 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"total_instances_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mi">188</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mi">196</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mi">198</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mi">196</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">8.571428571428555</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.032558139534883734</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.8431372549019608</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"n_instances_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"silver"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.09042553191489362</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.09183673469387756</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.08585858585858586</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.061224489795918366</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity_forecast"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"confidence_interval_lower_limit"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0027438964207623234</span><span class="p">,</span><span class="w">
    </span><span class="s2">"confidence_interval_upper_limit"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.08989843677661184</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mean"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.04632116659868708</span><span class="w">
   </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get the forecast for the popular colors for the next year.</p>

<aside class="notice">
Prior to calling this API the trend report has to be built.
</aside>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/color_trends/{report_name}/popular_colors</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>report_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The report name.</td>
<td></td>
</tr>
<tr>
<td>colors</td>
<td>query</td>
<td>The number of colors.</td>
<td>10</td>
</tr>
<tr>
<td>catalog_name</td>
<td>query</td>
<td>You can optionally specify the catalog name if you want the results from the previous years.</td>
<td></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>computed_on</td>
<td>The time the trend analysis report where computed.</td>
</tr>
<tr>
<td><strong>colors</strong></td>
<td>An ordered list of polular colors. Each field in the list has the following fieldnames.</td>
</tr>
<tr>
<td>rgb</td>
<td>The <a href="https://en.wikipedia.org/wiki/RGB_color_model">RGB</a> values for the color.</td>
</tr>
<tr>
<td>hsv</td>
<td>The <a href="https://en.wikipedia.org/wiki/HSL_and_HSV">HSV</a> values for the color.</td>
</tr>
<tr>
<td>lab</td>
<td>The <a href="https://en.wikipedia.org/wiki/Lab_color_space">LAB</a> values for the color.</td>
</tr>
<tr>
<td>hex</td>
<td>The hex code for the color.</td>
</tr>
<tr>
<td>universal_name</td>
<td>The best matching universal color name. Berlin and Kay, in a classic <a href="https://en.wikipedia.org/wiki/Basic_Color_Terms:_Their_Universality_and_Evolution">study</a> of worldwide color naming, postulated the existence of <em>11 universal basic color terms</em> across languages. We have included two more colors(<em>olive</em> and <em>yellow green</em>) as per the <a href="https://en.wikipedia.org/wiki/ISCC%E2%80%93NBS_system">ISCC-NBS system</a>.</td>
</tr>
<tr>
<td>entrylevel_name</td>
<td>The best matching entry level color name. A slightly larger curated set of color names which we call <em>entry level</em>. A random person should be able to recognize these color names.</td>
</tr>
<tr>
<td>name</td>
<td>The best guess for the color name based on all the colors avaialable in our color taxonomy.</td>
</tr>
<tr>
<td>popularity</td>
<td>A score between 0 and 1 indicating the popularity of the color.</td>
</tr>
<tr>
<td>popularity_percentile</td>
<td>The corresponding percentile score.</td>
</tr>
<tr>
<td>n_instances</td>
<td>The number of colors in the cluster.</td>
</tr>
<tr>
<td>n_instances_by_id</td>
<td>The number of colors in the cluster stratified by the catalog name.</td>
</tr>
<tr>
<td>total_instances_by_id</td>
<td>The total number of colors stratified by the catalog name.</td>
</tr>
<tr>
<td>popularity_by_id</td>
<td>The popularity score for the color stratified by the catalog name.</td>
</tr>
<tr>
<td>popularity_by_id_predicted</td>
<td>The predicted popularity score for the color stratified by the catalog name.</td>
</tr>
<tr>
<td>popularity_forecast</td>
<td>The popularity score forecast (mean and 95% confidence interval) for the color for the next season. The colors are sorted by this value.</td>
</tr>
<tr>
<td>trend_forecast</td>
<td>The trend score forecast (mean) for the color for the next season.</td>
</tr>
</tbody></table>

<h2 id="forecast-trending-colors">Forecast trending colors</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get the trending colors.</span>
<span class="c"># GET /v1/color_trends/{report_name}/trending_colors</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">params</span><span class="p">[</span><span class="s">'colors'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>
<span class="c"># Optional</span>
<span class="c">#params['catalog_name'] = 'vogue-autumn-winter-2017'</span>

<span class="n">report_name</span> <span class="o">=</span> <span class="s">'vogue-autumn-winter'</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/color_trends/</span><span class="si">%</span><span class="s">s/trending_colors'</span><span class="o">%</span><span class="p">(</span><span class="n">report_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span><span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

<span class="c"># Print the colors.</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="n">years</span> <span class="o">=</span> <span class="p">[</span><span class="s">'2013'</span><span class="p">,</span><span class="s">'2014'</span><span class="p">,</span><span class="s">'2015'</span><span class="p">,</span><span class="s">'2016'</span><span class="p">,</span><span class="s">'2017'</span><span class="p">]</span>
<span class="k">for</span> <span class="n">color_info</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="s">'colors'</span><span class="p">]:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'popularity [</span><span class="si">%</span><span class="s">s] [</span><span class="si">%+1.2</span><span class="s">f] trend [</span><span class="si">%</span><span class="s">s] [</span><span class="si">%+1.2</span><span class="s">f] [</span><span class="si">%</span><span class="s">s]'</span><span class="o">%</span><span class="p">(</span>
                          <span class="s">' '</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s">'</span><span class="si">%1.2</span><span class="s">f'</span><span class="o">%</span><span class="p">(</span><span class="n">color_info</span><span class="p">[</span><span class="s">'popularity_by_id'</span><span class="p">][</span><span class="s">'</span><span class="si">%</span><span class="s">s-</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">report_name</span><span class="p">,</span><span class="n">year</span><span class="p">)])</span> <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">years</span><span class="p">]),</span>
                          <span class="n">color_info</span><span class="p">[</span><span class="s">'popularity_forecast'</span><span class="p">][</span><span class="s">'mean'</span><span class="p">],</span>
                          <span class="s">' '</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s">'</span><span class="si">%+1.2</span><span class="s">f'</span><span class="o">%</span><span class="p">(</span><span class="n">color_info</span><span class="p">[</span><span class="s">'trend_by_id'</span><span class="p">][</span><span class="s">'</span><span class="si">%</span><span class="s">s-</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">report_name</span><span class="p">,</span><span class="n">year</span><span class="p">)])</span> <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">years</span><span class="p">]),</span>
                          <span class="n">color_info</span><span class="p">[</span><span class="s">'trend_forecast'</span><span class="p">][</span><span class="s">'mean'</span><span class="p">],</span>
                          <span class="n">color_info</span><span class="p">[</span><span class="s">'pantone_id'</span><span class="p">]))</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"computed_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-08 08:23:29.263227"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3.45"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"colors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"trend_forecast"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"mean"</span><span class="p">:</span><span class="w"> </span><span class="mf">8.235715230566532</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"olivenite"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aztec gold"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">193</span><span class="p">,</span><span class="w">
    </span><span class="mi">166</span><span class="p">,</span><span class="w">
    </span><span class="mi">92</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 15-0732 tcx olivenite"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"trend_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">7.976730869261527</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.25904713834398163</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5923803456031483</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.1785704702543323</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.017382413087934562</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#bc9f52"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"olive"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity_by_id_predicted"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.010638301716580001</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.02551019780659891</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">5.673337612199791e-09</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.01500000029600288</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.03571427823021432</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity_percentile"</span><span class="p">:</span><span class="w"> </span><span class="mf">27.500000000000004</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">188</span><span class="p">,</span><span class="w">
    </span><span class="mi">159</span><span class="p">,</span><span class="w">
    </span><span class="mi">82</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"n_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
   </span><span class="s2">"lab"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">66.59479318367542</span><span class="p">,</span><span class="w">
    </span><span class="mf">1.2071716907996466</span><span class="p">,</span><span class="w">
    </span><span class="mf">43.61008842556798</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15-0732 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"total_instances_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mi">188</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mi">196</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mi">198</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mi">196</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">43.58490566037733</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.5638297872340425</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.7372549019607844</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"n_instances_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tan"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.010638297872340425</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.025510204081632654</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.015</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.03571428571428571</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity_forecast"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"confidence_interval_lower_limit"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.0054111940580404486</span><span class="p">,</span><span class="w">
    </span><span class="s2">"confidence_interval_upper_limit"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.06648021884312591</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mean"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.030534512392542727</span><span class="w">
   </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"trend_forecast"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"mean"</span><span class="p">:</span><span class="w"> </span><span class="mf">7.571549001664395</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carmine"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"carmine"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">188</span><span class="p">,</span><span class="w">
    </span><span class="mi">72</span><span class="p">,</span><span class="w">
    </span><span class="mi">105</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 17-1831 tcx carmine"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"trend_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">8.218867318426964</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">8.084173058429286</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.33332935240964134</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.5000004190614799</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0081799591002045</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#b94668"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"purple"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity_by_id_predicted"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.005319150011365242</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.010204085522693439</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.02525251555530907</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">8.322792285214708e-09</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">-4.458101750498371e-09</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity_percentile"</span><span class="p">:</span><span class="w"> </span><span class="mf">10.0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">185</span><span class="p">,</span><span class="w">
    </span><span class="mi">70</span><span class="p">,</span><span class="w">
    </span><span class="mi">104</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"n_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
   </span><span class="s2">"lab"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">46.573551824894544</span><span class="p">,</span><span class="w">
    </span><span class="mf">49.345973558034494</span><span class="p">,</span><span class="w">
    </span><span class="mf">4.994866094189598</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"17-1831 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"total_instances_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mi">188</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mi">196</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mi">198</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mi">196</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">342.2608695652174</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.6216216216216216</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.7254901960784313</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"n_instances_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"maroon"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.005319148936170213</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.01020408163265306</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.025252525252525252</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity_forecast"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"confidence_interval_lower_limit"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.049635410157543226</span><span class="p">,</span><span class="w">
    </span><span class="s2">"confidence_interval_upper_limit"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.030412093249694426</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mean"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.0096116584539244</span><span class="w">
   </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"trend_forecast"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"mean"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.9002808043760666</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"burgundy"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"burgundy"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="mi">49</span><span class="p">,</span><span class="w">
    </span><span class="mi">62</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 19-1617 tcx burgundy"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"trend_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.49456702511890355</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.1040734357100044</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.3893066120901132</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.8979602872913048</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.014314928425357873</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#5f323d"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"purple"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity_by_id_predicted"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.005319147493313</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">-4.080331614253474e-09</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.005050514716681838</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.03499998777961907</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.025510208902419326</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity_percentile"</span><span class="p">:</span><span class="w"> </span><span class="mf">17.5</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">95</span><span class="p">,</span><span class="w">
    </span><span class="mi">50</span><span class="p">,</span><span class="w">
    </span><span class="mi">61</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"n_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w">
   </span><span class="s2">"lab"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">26.880879480444015</span><span class="p">,</span><span class="w">
    </span><span class="mf">21.737230131132435</span><span class="p">,</span><span class="w">
    </span><span class="mf">2.138083288990311</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19-1617 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"total_instances_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mi">188</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mi">196</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mi">198</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mi">196</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">345.3333333333333</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.4736842105263158</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.37254901960784315</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"n_instances_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"maroon"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.005319148936170213</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.005050505050505051</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.035</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.025510204081632654</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity_forecast"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"confidence_interval_lower_limit"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.025658486147475734</span><span class="p">,</span><span class="w">
    </span><span class="s2">"confidence_interval_upper_limit"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.04677156348715779</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mean"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.010556538669841027</span><span class="w">
   </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"trend_forecast"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"mean"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.8642376911307246</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"valiant poppy"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"firebrick"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">188</span><span class="p">,</span><span class="w">
    </span><span class="mi">50</span><span class="p">,</span><span class="w">
    </span><span class="mi">44</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 18-1549 tcx valiant poppy"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"trend_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.693773482978249</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.010100475412465</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.3333322551535562</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.4999999533767581</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.022494887525562373</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#be1f24"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"red"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity_by_id_predicted"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.015957445073912335</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.07653060568321701</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.015151517728698292</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.004999998160189827</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.4879756417621442e-09</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity_percentile"</span><span class="p">:</span><span class="w"> </span><span class="mf">40.0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">190</span><span class="p">,</span><span class="w">
    </span><span class="mi">31</span><span class="p">,</span><span class="w">
    </span><span class="mi">36</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"n_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="w">
   </span><span class="s2">"lab"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">41.30704144641319</span><span class="p">,</span><span class="w">
    </span><span class="mf">60.19009061985351</span><span class="p">,</span><span class="w">
    </span><span class="mf">39.52332046616106</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18-1549 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"total_instances_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mi">188</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mi">196</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mi">198</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mi">196</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">358.1132075471698</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.8368421052631578</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.7450980392156863</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"n_instances_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"red"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.015957446808510637</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.07653061224489796</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.015151515151515152</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.005</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity_forecast"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"confidence_interval_lower_limit"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.024902090520356926</span><span class="p">,</span><span class="w">
    </span><span class="s2">"confidence_interval_upper_limit"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10317595574874246</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mean"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.039136932614192765</span><span class="w">
   </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"trend_forecast"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"mean"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.7906371620551244</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"pantone_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"astral aura"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"grape"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"pantone_rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">54</span><span class="p">,</span><span class="w">
    </span><span class="mi">49</span><span class="p">,</span><span class="w">
    </span><span class="mi">81</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pantone 19-3830 tcx astral aura"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"trend_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.668688540385415</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.20100251734269106</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.45016069962896715</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.818877437721917</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.03374233128834356</span><span class="p">,</span><span class="w">
   </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#322e4b"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"black"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity_by_id_predicted"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.02127659660718742</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0408163201213404</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.010101016968916778</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.03999999541935249</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05612244643346036</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity_percentile"</span><span class="p">:</span><span class="w"> </span><span class="mf">55.00000000000001</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">50</span><span class="p">,</span><span class="w">
    </span><span class="mi">46</span><span class="p">,</span><span class="w">
    </span><span class="mi">75</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"n_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">33</span><span class="p">,</span><span class="w">
   </span><span class="s2">"lab"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">20.596319430718573</span><span class="p">,</span><span class="w">
    </span><span class="mf">9.582459495460604</span><span class="p">,</span><span class="w">
    </span><span class="mf">-17.306983424884383</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"pantone_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19-3830 tcx"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"total_instances_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mi">188</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mi">196</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mi">198</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mi">196</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mf">248.27586206896552</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.3866666666666667</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.29411764705882354</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"n_instances_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"navy blue"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2013"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.02127659574468085</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.04081632653061224</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.010101010101010102</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.04</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05612244897959184</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"popularity_forecast"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"confidence_interval_lower_limit"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.004410300375401743</span><span class="p">,</span><span class="w">
    </span><span class="s2">"confidence_interval_upper_limit"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.09245706928045698</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mean"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.04402338445252762</span><span class="w">
   </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get the forecast for the trending colors for the next year.</p>

<p>This reflects the color which had the maximum increase in popularity over the past three years. These are the colors which may not be that popular but there is sharp increase in its popularity compared to the last few years.</p>

<aside class="notice">
Prior to calling this API the trend report has to be built.
</aside>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/color_trends/{report_name}/trending_colors</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>report_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The report name.</td>
<td></td>
</tr>
<tr>
<td>colors</td>
<td>query</td>
<td>The number of colors.</td>
<td>10</td>
</tr>
<tr>
<td>catalog_name</td>
<td>query</td>
<td>You can optionally specify the catalog name if you want the results from the previous years.</td>
<td></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>computed_on</td>
<td>The time the trend analysis report where computed.</td>
</tr>
<tr>
<td><strong>colors</strong></td>
<td>An ordered list of polular colors. Each field in the list has the following fieldnames.</td>
</tr>
<tr>
<td>rgb</td>
<td>The <a href="https://en.wikipedia.org/wiki/RGB_color_model">RGB</a> values for the color.</td>
</tr>
<tr>
<td>hsv</td>
<td>The <a href="https://en.wikipedia.org/wiki/HSL_and_HSV">HSV</a> values for the color.</td>
</tr>
<tr>
<td>lab</td>
<td>The <a href="https://en.wikipedia.org/wiki/Lab_color_space">LAB</a> values for the color.</td>
</tr>
<tr>
<td>hex</td>
<td>The hex code for the color.</td>
</tr>
<tr>
<td>universal_name</td>
<td>The best matching universal color name. Berlin and Kay, in a classic <a href="https://en.wikipedia.org/wiki/Basic_Color_Terms:_Their_Universality_and_Evolution">study</a> of worldwide color naming, postulated the existence of <em>11 universal basic color terms</em> across languages. We have included two more colors(<em>olive</em> and <em>yellow green</em>) as per the <a href="https://en.wikipedia.org/wiki/ISCC%E2%80%93NBS_system">ISCC-NBS system</a>.</td>
</tr>
<tr>
<td>entrylevel_name</td>
<td>The best matching entry level color name. A slightly larger curated set of color names which we call <em>entry level</em>. A random person should be able to recognize these color names.</td>
</tr>
<tr>
<td>name</td>
<td>The best guess for the color name based on all the colors avaialable in our color taxonomy.</td>
</tr>
<tr>
<td>popularity</td>
<td>A score between 0 and 1 indicating the popularity of the color.</td>
</tr>
<tr>
<td>popularity_percentile</td>
<td>The corresponding percentile score.</td>
</tr>
<tr>
<td>n_instances</td>
<td>The number of colors in the cluster.</td>
</tr>
<tr>
<td>n_instances_by_id</td>
<td>The number of colors in the cluster stratified by the catalog name.</td>
</tr>
<tr>
<td>total_instances_by_id</td>
<td>The total number of colors stratified by the catalog name.</td>
</tr>
<tr>
<td>popularity_by_id</td>
<td>The popularity score for the color stratified by the catalog name.</td>
</tr>
<tr>
<td>popularity_by_id_predicted</td>
<td>The predicted popularity score for the color stratified by the catalog name.</td>
</tr>
<tr>
<td>popularity_forecast</td>
<td>The popularity score forecast (mean and 95% confidence interval) for the color for the next season.</td>
</tr>
<tr>
<td>trend_forecast</td>
<td>The trend score forecast (mean) for the color for the next season. The colors are sorted by this value.</td>
</tr>
</tbody></table>

<h2 id="get-trend-report-by-rgb">Get trend report by RGB</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get the color trend graph by RGB value.</span>
<span class="c"># GET /v1/color_trends/{report_name}/trend_graph</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">params</span><span class="p">[</span><span class="s">'r'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">188</span>
<span class="n">params</span><span class="p">[</span><span class="s">'g'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">89</span>
<span class="n">params</span><span class="p">[</span><span class="s">'b'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">84</span>

<span class="n">report_name</span> <span class="o">=</span> <span class="s">'vogue-autumn-winter'</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/color_trends/</span><span class="si">%</span><span class="s">s/trend_graph'</span><span class="o">%</span><span class="p">(</span><span class="n">report_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span><span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"computed_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-27 10:37:36.358990"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"36.29"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">4.14258845017703</span><span class="p">,</span><span class="w">
 </span><span class="s2">"trend_graph"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"trend_forecast"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"mean"</span><span class="p">:</span><span class="w"> </span><span class="mf">18452119.817761216</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"indian red"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"popularity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.01971830985915493</span><span class="p">,</span><span class="w">
  </span><span class="s2">"hex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#c46463"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"universal_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"red"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lab"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
   </span><span class="mf">53.76430408872871</span><span class="p">,</span><span class="w">
   </span><span class="mf">38.108463259306944</span><span class="p">,</span><span class="w">
   </span><span class="mf">18.279605679684895</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"popularity_percentile"</span><span class="p">:</span><span class="w"> </span><span class="mf">10.0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"rgb"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
   </span><span class="mi">196</span><span class="p">,</span><span class="w">
   </span><span class="mi">100</span><span class="p">,</span><span class="w">
   </span><span class="mi">99</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"hsv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
   </span><span class="mf">0.6185567010309114</span><span class="p">,</span><span class="w">
   </span><span class="mf">0.4948979591836735</span><span class="p">,</span><span class="w">
   </span><span class="mf">0.7686274509803922</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"n_instances_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
   </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
   </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"popularity_by_id_predicted"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.02777777496324953</span><span class="p">,</span><span class="w">
   </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">5.017991386996323e-10</span><span class="p">,</span><span class="w">
   </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.03999999598475976</span><span class="p">,</span><span class="w">
   </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.005882352647930724</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"n_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w">
  </span><span class="s2">"total_instances_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mi">180</span><span class="p">,</span><span class="w">
   </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mi">160</span><span class="p">,</span><span class="w">
   </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
   </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mi">170</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"entrylevel_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tomato"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"popularity_by_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"vogue-autumn-winter-2017"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.027777777777777776</span><span class="p">,</span><span class="w">
   </span><span class="s2">"vogue-autumn-winter-2016"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"vogue-autumn-winter-2015"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.04</span><span class="p">,</span><span class="w">
   </span><span class="s2">"vogue-autumn-winter-2014"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0058823529411764705</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"popularity_forecast"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"confidence_interval_lower_limit"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.05974450566166774</span><span class="p">,</span><span class="w">
   </span><span class="s2">"confidence_interval_upper_limit"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.06387994327947344</span><span class="p">,</span><span class="w">
   </span><span class="s2">"mean"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0020677188089028493</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get the color trend graph by RGB value.</p>

<p>This retrieves the trend report for a particular color by RGB value. </p>

<aside class="notice">
Prior to calling this API the trend report has to be built.
</aside>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/color_trends/{report_name}/trend_graph</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>r</td>
<td>query</td>
<td>(<strong>Required</strong>) The value for the red channel in the RGB color model (in the range 0 to 255).</td>
<td></td>
</tr>
<tr>
<td>g</td>
<td>query</td>
<td>(<strong>Required</strong>) The value for the green channel in the RGB color model (in the range 0 to 255).</td>
<td></td>
</tr>
<tr>
<td>b</td>
<td>query</td>
<td>(<strong>Required</strong>) The value for the blue channel in the RGB color model (in the range 0 to 255).</td>
<td></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>computed_on</td>
<td>The time the trend analysis report where computed.</td>
</tr>
<tr>
<td>distance</td>
<td>The distance between the RGB value and the closest cluster center in the trend analysis.</td>
</tr>
<tr>
<td><strong>trend_graph</strong></td>
<td>Each field has the following fieldnames.</td>
</tr>
<tr>
<td>rgb</td>
<td>The <a href="https://en.wikipedia.org/wiki/RGB_color_model">RGB</a> values for the color.</td>
</tr>
<tr>
<td>hsv</td>
<td>The <a href="https://en.wikipedia.org/wiki/HSL_and_HSV">HSV</a> values for the color.</td>
</tr>
<tr>
<td>lab</td>
<td>The <a href="https://en.wikipedia.org/wiki/Lab_color_space">LAB</a> values for the color.</td>
</tr>
<tr>
<td>hex</td>
<td>The hex code for the color.</td>
</tr>
<tr>
<td>universal_name</td>
<td>The best matching universal color name. Berlin and Kay, in a classic <a href="https://en.wikipedia.org/wiki/Basic_Color_Terms:_Their_Universality_and_Evolution">study</a> of worldwide color naming, postulated the existence of <em>11 universal basic color terms</em> across languages. We have included two more colors(<em>olive</em> and <em>yellow green</em>) as per the <a href="https://en.wikipedia.org/wiki/ISCC%E2%80%93NBS_system">ISCC-NBS system</a>.</td>
</tr>
<tr>
<td>entrylevel_name</td>
<td>The best matching entry level color name. A slightly larger curated set of color names which we call <em>entry level</em>. A random person should be able to recognize these color names.</td>
</tr>
<tr>
<td>name</td>
<td>The best guess for the color name based on all the colors avaialable in our color taxonomy.</td>
</tr>
<tr>
<td>popularity</td>
<td>A score between 0 and 1 indicating the popularity of the color.</td>
</tr>
<tr>
<td>popularity_percentile</td>
<td>The corresponding percentile score.</td>
</tr>
<tr>
<td>n_instances</td>
<td>The number of colors in the cluster.</td>
</tr>
<tr>
<td>n_instances_by_id</td>
<td>The number of colors in the cluster stratified by the catalog name.</td>
</tr>
<tr>
<td>total_instances_by_id</td>
<td>The total number of colors stratified by the catalog name.</td>
</tr>
<tr>
<td>popularity_by_id</td>
<td>The popularity score for the color stratified by the catalog name.</td>
</tr>
<tr>
<td>popularity_by_id_predicted</td>
<td>The predicted popularity score for the color stratified by the catalog name.</td>
</tr>
<tr>
<td>popularity_forecast</td>
<td>The popularity score forecast (mean and 95% confidence interval) for the color for the next season.</td>
</tr>
<tr>
<td>trend_forecast</td>
<td>The trend score forecast (mean) for the color for the next season. The colors are sorted by this value.</td>
</tr>
</tbody></table>

          <h1 id="print-search">Print Search</h1>

<p>A collection of APIs for enabling catalog search based on prints.</p>

<h2 id="build-print-search-index">Build print search index</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Build the print search index.</span>
<span class="c"># POST /v1/catalog/{catalog_name}/print_search_index</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="c"># Query paarameters.</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># Optional parameters.</span>
<span class="n">params</span><span class="p">[</span><span class="s">'print_count'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="c">#params['image_max_dimension'] = 512</span>
<span class="n">params</span><span class="p">[</span><span class="s">'ignore_background'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'true'</span>
<span class="n">params</span><span class="p">[</span><span class="s">'model'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'person_fast'</span>
<span class="n">params</span><span class="p">[</span><span class="s">'fraction_boxes_threshold'</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="c">#params['ignore_images_without_person'] = 'true'</span>

<span class="c"># Path paarameters.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/print_search_index'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span><span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"done"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"finish_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-25 17:21:50.924603"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-25 17:20:05.733959"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"139"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"print_search_index"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"num_of_images_missing_prints"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_indexed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"28"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"index_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"print_computation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_existing"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_processed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"28"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"num_of_products"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"num_of_images"</span><span class="p">:</span><span class="w"> </span><span class="s2">"38"</span><span class="w">
 </span><span class="p">},</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15.24"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Build the print search index.</p>

<p>Before you can start using the print search or dominant prints APIs the print search index has to be built. This API pre-computes the dominant prints for all the uploaded images in the catalog and then builds an index for fast nearest neighbor retrieval. A <strong>dominant print</strong> is a representative 64x64 print swatch that occurs most frequently in the image.</p>

<aside class="notice">
This is a one time long running operation. Depending on your catalog size you will have to wait till the index creation is completed to start using the print search or dominant print APIs. You can query the status of the index creation using the GET endpoint. The index is built when the status changes to `done`
</aside>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">POST /v1/catalog/{catalog_name}/print_search_index</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>print_count</td>
<td>query</td>
<td>The number of dominant prints to extract per image.</td>
<td>3</td>
</tr>
<tr>
<td>image_max_dimension</td>
<td>query</td>
<td>You can set this parameters to resize the image for faster computation of dominant prints. If your images are of very high resolution you can set this parameter to a smaller value (suggested values 256-512) for faster computation. For any image if max(image width,image height) &gt; image_max_dimension resizes the image such that max(image width,image height) = image_max_dimension.</td>
<td>no image resizing</td>
</tr>
<tr>
<td>ignore_background</td>
<td>query</td>
<td>By default we use the entire image to compute the dominant prints. If we set this parameter to <code class="prettyprint">true</code> we internally use some algorithms to ignore the background and mainly focus on the person or apparel.</td>
<td><code class="prettyprint">false</code></td>
</tr>
<tr>
<td>model</td>
<td>query</td>
<td>The model to use to ignore the background. Currently we use person detecors to focus only on the person. The following options are supported <code class="prettyprint">person_fast</code> (faster but slightly less accurate model), <code class="prettyprint">person_accurate</code> (slower but more accurate model) and <code class="prettyprint">person_basic</code> (a basic person detector using standard body proportions).</td>
<td><code class="prettyprint">person_fast</code></td>
</tr>
<tr>
<td>fraction_boxes_threshold</td>
<td>query</td>
<td>Include only those prints whos fraction of boxes is greater than this number.</td>
<td>0.0</td>
</tr>
<tr>
<td>ignore_images_without_person</td>
<td>query</td>
<td>If <code class="prettyprint">true</code> ignore images where person is not detected. If <code class="prettyprint">false</code> and person is not detected then defaults to &lsquo;person_basic&rsquo;</td>
<td><code class="prettyprint">false</code></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td>A json containing various info about the current status of the index building process.</td>
</tr>
<tr>
<td>status</td>
<td>The current status of the index building process. The status can be one of <code class="prettyprint">computing_dominant_prints</code>,<code class="prettyprint">building_index</code>,or <code class="prettyprint">done</code>. The index is built when the status becomes <code class="prettyprint">done</code>.</td>
</tr>
<tr>
<td>num_of_products</td>
<td>The number of products in the catalog.</td>
</tr>
<tr>
<td>num_of_images</td>
<td>The total number of images in the catalog.</td>
</tr>
<tr>
<td>start_time</td>
<td>The time when the index building started.</td>
</tr>
<tr>
<td>finish_time</td>
<td>The time when the index building finished.</td>
</tr>
<tr>
<td><strong>print_computation</strong></td>
<td>Info about dominant print computation.</td>
</tr>
<tr>
<td>num_of_images_error</td>
<td>The number of images for which there was some error in dominant print computation.</td>
</tr>
<tr>
<td>num_of_images_ignored</td>
<td>The number of images that were ignored.</td>
</tr>
<tr>
<td>num_of_images_existing</td>
<td>The number of images for which the dominant prints were already computed (in case of building a new index with new products added).</td>
</tr>
<tr>
<td>num_of_images_processed</td>
<td>The total number of images for which the dominant prints were computed.</td>
</tr>
<tr>
<td><strong>print_search_index</strong></td>
<td>Info about the index building.</td>
</tr>
<tr>
<td>num_of_images_missing_prints</td>
<td>The number of images for which there was no dominant print was found.</td>
</tr>
<tr>
<td>num_of_images_ignored</td>
<td>The number of images that were ignored.</td>
</tr>
<tr>
<td>num_of_images_indexed</td>
<td>The total number of images finally indexed.</td>
</tr>
</tbody></table>

<aside class="notice">
Any time you add new images to the catalog you will have to rebuild the index by calling this API again. Note that the dominant prints for the old images will still be saved and we will be computing the dominant prints only for the newly added images.
</aside>

<aside class="warning">
The current version supports building only one index at the same time and does not allow you to build another index when a current index building process in running. Please wait till the current index creation is completed. 
</aside>

<h2 id="get-print-search-index-status">Get print search index status</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get the status of the print search index.</span>
<span class="c"># GET /v1/catalog/{catalog_name}/print_search_index</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/print_search_index'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"computing_dominant_prints"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"num_of_products"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-25 17:20:05.733959"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"139"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"print_search_index"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"num_of_images_missing_prints"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_indexed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"finish_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"print_computation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"num_of_images_error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_existing"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_processed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"num_of_images"</span><span class="p">:</span><span class="w"> </span><span class="s2">"38"</span><span class="w">
 </span><span class="p">},</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8.30"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get the status of the print search index.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/catalog/{catalog_name}/print_search_index</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td>A json containing various info about the current status of the index building process.</td>
</tr>
<tr>
<td>status</td>
<td>The current status of the index building process. The status can be one of <code class="prettyprint">computing_dominant_prints</code>,<code class="prettyprint">building_index</code>,or <code class="prettyprint">done</code>. The index is built when the status becomes <code class="prettyprint">done</code>.</td>
</tr>
<tr>
<td>num_of_products</td>
<td>The number of products in the catalog.</td>
</tr>
<tr>
<td>num_of_images</td>
<td>The total number of images in the catalog.</td>
</tr>
<tr>
<td>start_time</td>
<td>The time when the index building started.</td>
</tr>
<tr>
<td>finish_time</td>
<td>The time when the index building finished.</td>
</tr>
<tr>
<td><strong>print_computation</strong></td>
<td>Info about dominant print computation.</td>
</tr>
<tr>
<td>num_of_images_error</td>
<td>The number of images for which there was some error in dominant print computation.</td>
</tr>
<tr>
<td>num_of_images_ignored</td>
<td>The number of images that were ignored.</td>
</tr>
<tr>
<td>num_of_images_existing</td>
<td>The number of images for which the dominant prints were already computed (in case of building a new index with new products added).</td>
</tr>
<tr>
<td>num_of_images_processed</td>
<td>The total number of images for which the dominant prints were computed.</td>
</tr>
<tr>
<td><strong>print_search_index</strong></td>
<td>Info about the index building.</td>
</tr>
<tr>
<td>num_of_images_missing_prints</td>
<td>The number of images for which there was no dominant print was found.</td>
</tr>
<tr>
<td>num_of_images_ignored</td>
<td>The number of images that were ignored.</td>
</tr>
<tr>
<td>num_of_images_indexed</td>
<td>The total number of images finally indexed.</td>
</tr>
</tbody></table>

<h2 id="delete-the-print-search-index">Delete the print search index</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Delete the print search index.</span>
<span class="c"># DELETE /v1/catalog/{catalog_name}/print_search_index</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/print_search_index'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8.88"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"catalog_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample_catalog"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Delete the print search index.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">DELETE /v1/catalog/{catalog_name}/print_search_index</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>catalog_name</td>
<td>The catalog name.</td>
</tr>
<tr>
<td>deleted</td>
<td>This is <code class="prettyprint">true</code> if the index was successfully deleted.</td>
</tr>
</tbody></table>

<h2 id="print-search-by-id">Print Search by id</h2>
<pre class="highlight shell tab-shell"><code>http://localhost:9080/v1/catalog/sample_catalog/print_search?max_number_of_results<span class="o">=</span>3&amp;image_id<span class="o">=</span>1&amp;id<span class="o">=</span>SHRES16AWFSDR9346A&amp;print_count<span class="o">=</span>1&amp;print_id<span class="o">=</span>1&amp;api_key<span class="o">=</span>your_api_key
</code></pre><pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------ </span>
<span class="c"># Get similar image/print swatches in the catalog for an existing image/print swatch.</span>
<span class="c"># GET /v1/catalog/{catalog_name}/print_search</span>
<span class="c"># params - id,image_id,print_id,print_count,max_number_of_results</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="c"># Parameters.</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">params</span><span class="p">[</span><span class="s">'id'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'SHRES16AWFSDR9346A'</span> 
<span class="n">params</span><span class="p">[</span><span class="s">'image_id'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'1'</span>
<span class="n">params</span><span class="p">[</span><span class="s">'print_id'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'1'</span>
<span class="n">params</span><span class="p">[</span><span class="s">'print_count'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">params</span><span class="p">[</span><span class="s">'max_number_of_results'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>

<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/print_search'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                        <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                        <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>


<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"17.92"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"products"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/catalog/sample_catalog/images/SHRES16AWFSDR9346A_1.jpg?top_left_x=97&amp;top_left_y=169&amp;width=64&amp;height=64"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">97</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">169</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/SHRES16AWFSDR9346A54/Look_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"print_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346A"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346A_1.jpg"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.023897528648376465</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/catalog/sample_catalog/images/SHRES16AWFSDR9346B_4.jpg?top_left_x=129&amp;top_left_y=205&amp;width=54&amp;height=54"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">54</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">129</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">205</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">54</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/SHRES16AWFSDR9346B18/Right_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"print_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B_4.jpg"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.024179430678486824</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/catalog/sample_catalog/images/SHRES16AWFSDR9346B_2.jpg?top_left_x=115&amp;top_left_y=191&amp;width=45&amp;height=45"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">45</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">115</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">191</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">45</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/SHRES16AWFSDR9346B18/Left_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"print_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B_2.jpg"</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get similar image/print swatches in the catalog for an existing image/print swatch.</p>

<aside class="notice">
The print search index has to be built first before you can use this API.  
</aside>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/catalog/{catalog_name}/print_search</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>query</td>
<td>(<strong>Required</strong>) The product id.</td>
<td></td>
</tr>
<tr>
<td>image_id</td>
<td>query</td>
<td>(<strong>Required</strong>) The image id.</td>
<td></td>
</tr>
<tr>
<td>print_id</td>
<td>query</td>
<td>The print id.</td>
<td>Searches for <code class="prettyprint">print_count</code> number of prints in the image.</td>
</tr>
<tr>
<td>print_count</td>
<td>query</td>
<td>The maximum number of dominant prints to search for in an image.</td>
<td>1</td>
</tr>
<tr>
<td>max_number_of_results</td>
<td>query</td>
<td>maximum number of results to return.</td>
<td>12</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td><strong>products</strong></td>
<td>A sorted list similar print images. Each item in the list has the following fields.</td>
</tr>
<tr>
<td>id</td>
<td>The product id.</td>
</tr>
<tr>
<td>image_id</td>
<td>The image id.</td>
</tr>
<tr>
<td>print_id</td>
<td>The print id.</td>
</tr>
<tr>
<td>image_filename</td>
<td>The image filename.</td>
</tr>
<tr>
<td>image_url</td>
<td>The image url.</td>
</tr>
<tr>
<td>distance</td>
<td>The euclidean distance between the print in the image to the print in the query.</td>
</tr>
<tr>
<td>image_location</td>
<td>The resource location of the dominant print swatch.</td>
</tr>
<tr>
<td>bounding_box</td>
<td>The bounding box of the dominant print in the image.</td>
</tr>
<tr>
<td>top_left_x</td>
<td>The x co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>top_left_y</td>
<td>The y co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>width</td>
<td>The width of the bounding box.</td>
</tr>
<tr>
<td>height</td>
<td>The height of the bounding box.</td>
</tr>
</tbody></table>

<h2 id="print-search-by-image">Print Search by image</h2>
<pre class="highlight shell tab-shell"><code></code></pre><pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get similar image/print swatches in the catalog for a user uploaded image.</span>
<span class="c"># POST /v1/catalog/{catalog_name}/print_search</span>
<span class="c"># params - print_count,image_max_dimension,max_number_of_results</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="c"># Parameters.</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">params</span><span class="p">[</span><span class="s">'print_count'</span><span class="p">]</span> <span class="o">=</span>  <span class="mi">1</span>
<span class="n">params</span><span class="p">[</span><span class="s">'max_number_of_results'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="c">#params['image_max_dimension'] = 512</span>

<span class="n">headers</span><span class="p">[</span><span class="s">'Content-Type'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'image/jpeg'</span>

<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/print_search'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                        <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                        <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                        <span class="n">data</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s">'test_image_1.jpeg'</span><span class="p">,</span><span class="s">'rb'</span><span class="p">))</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"245.13"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"products"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3300967216491699</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/94571cf2-f376-4325-9305-c4973df05e38.jpe?top_left_x=116&amp;top_left_y=272&amp;width=64&amp;height=64"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">116</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">272</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/ABOFA15AMCWJG1044801/Front_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"print_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABOFA15AMCWJG10448"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABOFA15AMCWJG10448_5.jpg"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.33134496212005615</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/94571cf2-f376-4325-9305-c4973df05e38.jpe?top_left_x=118&amp;top_left_y=264&amp;width=64&amp;height=64"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">118</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">264</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/ABOFA15AMCWJG1044901/Front_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"print_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABOFA15AMCWJG10449"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABOFA15AMCWJG10449_2.jpg"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3329866826534271</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/94571cf2-f376-4325-9305-c4973df05e38.jpe?top_left_x=136&amp;top_left_y=272&amp;width=64&amp;height=64"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">136</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">272</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/ABOFA15AMCWJG1044901/Right_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"print_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABOFA15AMCWJG10449"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABOFA15AMCWJG10449_1.jpg"</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">],</span><span class="w">
 </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/94571cf2-f376-4325-9305-c4973df05e38.jpe"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get similar image/print swatches in the catalog for a user uploaded image.</p>

<aside class="notice">
The print search index has to be built first before you can use this API.  
</aside>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">POST /v1/catalog/{catalog_name}/print_search</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>data</td>
<td>image/jpeg</td>
<td>(<strong>Required</strong>) The image. The image can be in PNG, JPEG,</td>
<td></td>
</tr>
<tr>
<td>max_number_of_results</td>
<td>query</td>
<td>maximum number of results to return</td>
<td>12</td>
</tr>
<tr>
<td>print_count</td>
<td>path</td>
<td>The maximum number of dominant prints to search for in an image.</td>
<td>1</td>
</tr>
<tr>
<td>image_max_dimension</td>
<td>query</td>
<td>You can set this parameters to resize the image for faster computation of dominant prints. If your image is of high resolution you can set this parameter to a smaller value (suggested values 256-512) for faster computation. For any image if max(image width,image height) &gt; image_max_dimension resizes the image such that max(image width,image height) = image_max_dimension.</td>
<td>no image resizing</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>image_location</td>
<td>The resource location of the uploaded image.</td>
</tr>
<tr>
<td><strong>products</strong></td>
<td>A sorted list similar print images. Each item in the list has the following fields.</td>
</tr>
<tr>
<td>id</td>
<td>The product id.</td>
</tr>
<tr>
<td>image_id</td>
<td>The image id.</td>
</tr>
<tr>
<td>print_id</td>
<td>The print id.</td>
</tr>
<tr>
<td>image_filename</td>
<td>The image filename.</td>
</tr>
<tr>
<td>image_url</td>
<td>The image url.</td>
</tr>
<tr>
<td>distance</td>
<td>The euclidean distance between the print in the image to the print in the query.</td>
</tr>
<tr>
<td>image_location</td>
<td>The resource location of the dominant print swatch.</td>
</tr>
<tr>
<td>bounding_box</td>
<td>The bounding box of the dominant print in the image.</td>
</tr>
<tr>
<td>top_left_x</td>
<td>The x co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>top_left_y</td>
<td>The y co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>width</td>
<td>The width of the bounding box.</td>
</tr>
<tr>
<td>height</td>
<td>The height of the bounding box.</td>
</tr>
</tbody></table>

          <h1 id="dominant-prints">Dominant Prints</h1>

<p>A collection of APIs for computing the dominant prints for an user uploaded image, the entire catalog, and any image in the catalog.</p>

<h2 id="get-dominant-prints-for-an-image">Get dominant prints for an image</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Dominant prints for an image. </span>
<span class="c"># POST /v1/prints/dominant_prints</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># Optional parameters.</span>
<span class="n">params</span><span class="p">[</span><span class="s">'count'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="c">#params['image_max_dimension'] = 512</span>
<span class="n">params</span><span class="p">[</span><span class="s">'ignore_background'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'true'</span>
<span class="n">params</span><span class="p">[</span><span class="s">'model'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'person_fast'</span>
<span class="c">#params['fraction_boxes_threshold'] = 0.3</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/prints/dominant_prints'</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="c"># Three options to pass the image</span>

<span class="c"># OPTION 1 : Directly post the image</span>
<span class="n">headers</span><span class="p">[</span><span class="s">'Content-Type'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'image/jpeg'</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                         <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                         <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                         <span class="n">data</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s">'test_image_2.jpeg'</span><span class="p">,</span><span class="s">'rb'</span><span class="p">))</span>

<span class="s">"""          
# OPTION 2 : Pass the image url
params['image_url'] = 'https://vg-images.condecdn.net/image/oDXPOxw65EZ/crop/405'
response = requests.post(url,
                         headers=headers,


# OPTION 3 : using multipart
image_filename = 'test_image_2.jpeg'
with open(image_filename,'rb') as images_file:
    response = requests.post(url,
                             headers=headers,
                             params=params,
                             files={'image': (image_filename,images_file,'image/jpeg')})   
"""</span> 

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>


<span class="c"># Human friendly repsonse.</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="n">image_location</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s?api_key=</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">results</span><span class="p">[</span><span class="s">'image_location'</span><span class="p">]),</span>
                                  <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s">'[original image ] </span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">image_location</span><span class="p">))</span>

<span class="n">image_location</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s&amp;api_key=</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">results</span><span class="p">[</span><span class="s">'bounding_box'</span><span class="p">][</span><span class="s">'image_location'</span><span class="p">]),</span>
                                  <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s">'[bounding box   ] </span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">image_location</span><span class="p">))</span>

<span class="k">for</span> <span class="n">print_info</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="s">'dominant_prints'</span><span class="p">]:</span>
    <span class="n">print_swatch</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s&amp;api_key=</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">print_info</span><span class="p">[</span><span class="s">'image_location'</span><span class="p">]),</span>
                                    <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">])</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'[dominant prints] </span><span class="si">%1.2</span><span class="s">f </span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">print_info</span><span class="p">[</span><span class="s">'fraction_boxes'</span><span class="p">],</span><span class="n">print_swatch</span><span class="p">))</span> 
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">
 </span><span class="s2">"dominant_prints"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/2568a1e8-1993-40e0-9d5f-78c33666e876.jpe?top_left_x=256&amp;top_left_y=402&amp;width=64&amp;height=64"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">256</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">402</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"fraction_boxes"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.388</span><span class="p">,</span><span class="w">
   </span><span class="s2">"print_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/2568a1e8-1993-40e0-9d5f-78c33666e876.jpe?top_left_x=239&amp;top_left_y=372&amp;width=64&amp;height=64"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">239</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">372</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"fraction_boxes"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.332</span><span class="p">,</span><span class="w">
   </span><span class="s2">"print_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/2568a1e8-1993-40e0-9d5f-78c33666e876.jpe?top_left_x=225&amp;top_left_y=210&amp;width=64&amp;height=64"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">225</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">210</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"fraction_boxes"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.28</span><span class="p">,</span><span class="w">
   </span><span class="s2">"print_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">],</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2136.32"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/2568a1e8-1993-40e0-9d5f-78c33666e876.jpe?top_left_x=158&amp;top_left_y=0&amp;width=259&amp;height=640"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">158</span><span class="p">,</span><span class="w">
  </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w">
  </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">259</span><span class="p">,</span><span class="w">
  </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.819546</span><span class="p">,</span><span class="w">
  </span><span class="s2">"model"</span><span class="p">:</span><span class="w"> </span><span class="s2">"person_fast"</span><span class="w">
 </span><span class="p">},</span><span class="w">
 </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/2568a1e8-1993-40e0-9d5f-78c33666e876.jpe"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get the dominant prints for an image.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">POST /v1/prints/dominant_prints</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td>image/jpeg</td>
<td>(<strong>Required</strong>) The image. The image can be in PNG, JPEG, BMP, or GIF.</td>
<td></td>
</tr>
<tr>
<td>count</td>
<td>query</td>
<td>The number of dominant prints to extract per image.</td>
<td>3</td>
</tr>
<tr>
<td>image_max_dimension</td>
<td>query</td>
<td>You can set this parameters to resize the image for faster computation of dominant prints. If your images are of very high resolution you can set this parameter to a smaller value (suggested values 256-512) for faster computation. For any image if max(image width,image height) &gt; image_max_dimension resizes the image such that max(image width,image height) = image_max_dimension.</td>
<td>no image resizing</td>
</tr>
<tr>
<td>ignore_background</td>
<td>query</td>
<td>By default we use the entire image to compute the dominant prints. If we set this parameter to <code class="prettyprint">true</code> we internally use some algorithms to ignore the background and mainly focus on the person or apparel.</td>
<td><code class="prettyprint">false</code></td>
</tr>
<tr>
<td>model</td>
<td>query</td>
<td>The model to use to ignore the background. Currently we use person detecors to focus only on the person. The following options are supported <code class="prettyprint">person_fast</code> (faster but slightly less accurate model), <code class="prettyprint">person_accurate</code> (slower but more accurate model) and <code class="prettyprint">person_basic</code> (a basic person detector using standard body proportions).</td>
<td><code class="prettyprint">person_fast</code></td>
</tr>
<tr>
<td>fraction_boxes_threshold</td>
<td>query</td>
<td>Include only those prints whos fraction of boxes is greater than this number.</td>
<td>0.0</td>
</tr>
</tbody></table>

<p>Instead of the posting the image data you can also pass an image url.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>image_url</td>
<td>query</td>
<td>(<strong>Required</strong>) The image url.</td>
</tr>
</tbody></table>

<p>You can also pass the image using multipart/form-data with the fieldname <code class="prettyprint">image</code>.</p>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>image_url</td>
<td>The image url.</td>
</tr>
<tr>
<td>image_location</td>
<td>The image location.</td>
</tr>
<tr>
<td><strong>dominant_prints</strong></td>
<td>A list of dominant prints for the image sorted in the decreasing order of the fraction of boxes. Each field in the list has the following fieldnames.</td>
</tr>
<tr>
<td><strong>bounding_box</strong></td>
<td>The bounding box of the print swatch.</td>
</tr>
<tr>
<td>top_left_x</td>
<td>The x co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>top_left_y</td>
<td>The y co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>width</td>
<td>The width of the bounding box.</td>
</tr>
<tr>
<td>height</td>
<td>The height of the bounding box.</td>
</tr>
<tr>
<td>fraction_boxes</td>
<td>The fraction of swatches in the bounding box that can be attributed to this print.</td>
</tr>
<tr>
<td>print_id</td>
<td>The print id.</td>
</tr>
<tr>
<td>image_location</td>
<td>The image location of the print swatch.</td>
</tr>
<tr>
<td><strong>bounding_box</strong></td>
<td>The region in the image used to compute the dominant prints and corresponds to the the bounding box for the central detected person. In case <code class="prettyprint">ignore_background</code> is set to <code class="prettyprint">false</code> this corresponds to the entire image.</td>
</tr>
<tr>
<td>top_left_x</td>
<td>The x co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>top_left_y</td>
<td>The y co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>width</td>
<td>The width of the bounding box.</td>
</tr>
<tr>
<td>height</td>
<td>The height of the bounding box.</td>
</tr>
<tr>
<td>score</td>
<td>The confidence score (between 0 and 1) that the bounding box contains a person.</td>
</tr>
<tr>
<td>model</td>
<td>The person detection model used.</td>
</tr>
<tr>
<td>image_location</td>
<td>The image location of the bounding box.</td>
</tr>
</tbody></table>

<aside class="warning">
If the person detector is unable to detect any person in the image then we backoff to the person_basic model. 
</aside>

<h2 id="build-dominant-prints-index">Build dominant prints index</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Build the dominant prints index.</span>
<span class="c"># POST /v1/catalog/{catalog_name}/dominant_prints_index</span>
<span class="c"># params - prints,max_prints_per_image,fraction_boxes_threshold</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c"># Optional parameters.</span>
<span class="n">params</span><span class="p">[</span><span class="s">'prints'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">params</span><span class="p">[</span><span class="s">'max_prints_per_image'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">params</span><span class="p">[</span><span class="s">'fraction_boxes_threshold'</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.1</span>

<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/dominant_prints_index'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span><span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"dominant_prints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"num_of_images_missing_prints"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_indexed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"28"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"done"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"num_of_products"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"results_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-25 18:01:16.941760"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"218"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"finish_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-25 18:01:17.188224"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"num_of_images"</span><span class="p">:</span><span class="w"> </span><span class="s2">"38"</span><span class="w">
 </span><span class="p">},</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.31"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Build the dominant prints index.</p>

<p>This loads all the dominant prints for every image in the catalog and then clusters the prints to compute the dominant prints for the entire catalog. Before you can start querying for the dominant prints you need to call this API to start the clustering procedure. </p>

<aside class="notice">
Prior to calling this API the prints search index has to be built, which computes the dominant prints for all the images. 
</aside>

<aside class="notice">
This is a one time long running operation. Depending on your catalog size you will have to wait till the index creation is completed to start using the dominant prints APIs. You can query the status of the index creation using the GET endpoint. The clusteing is completed when the status changes to `done`
</aside>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">POST /v1/catalog/{catalog_name}/dominant_prints_index</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>prints</td>
<td>query</td>
<td>The number of dominant prints to compute.</td>
<td>10</td>
</tr>
<tr>
<td>max_prints_per_image</td>
<td>query</td>
<td>The maximum number of dominant prints to use per image.</td>
<td>all available prints</td>
</tr>
<tr>
<td>fraction_boxes_threshold</td>
<td>query</td>
<td>Include only those prints whos fraction of boxes is greater than this number.</td>
<td>0.0</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td>A json containing various info about the current status of the index building process.</td>
</tr>
<tr>
<td>status</td>
<td>The current status of the index building process. The status can be one of <code class="prettyprint">clustering</code> or <code class="prettyprint">done</code>. The index is built when the status becomes <code class="prettyprint">done</code>.</td>
</tr>
<tr>
<td>num_of_products</td>
<td>The number of products in the catalog.</td>
</tr>
<tr>
<td>num_of_images</td>
<td>The total number of images in the catalog.</td>
</tr>
<tr>
<td>start_time</td>
<td>The time when the index building started.</td>
</tr>
<tr>
<td>finish_time</td>
<td>The time when the index building finished.</td>
</tr>
<tr>
<td><strong>dominant_prints</strong></td>
<td>Info about dominant color.</td>
</tr>
<tr>
<td>num_of_images_missing_prints</td>
<td>The number of images for which there was no dominant color was found.</td>
</tr>
<tr>
<td>num_of_images_ignored</td>
<td>The number of images that were ignored.</td>
</tr>
<tr>
<td>num_of_images_indexed</td>
<td>The total number of images finally indexed.</td>
</tr>
</tbody></table>

<aside class="warning">
The current version supports building only one index at the same time and does not allow you to build another index when a current index building process in running. Please wait till the current index creation is completed. 
</aside>

<h2 id="get-dominant-prints-index-status">Get dominant prints index status</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get the status of the dominant prints index.</span>
<span class="c"># GET /v1/catalog/{catalog_name}/dominant_prints_index</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/dominant_prints_index'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"dominant_prints"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"num_of_images_missing_prints"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_indexed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"28"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"done"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"num_of_products"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"results_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-25 18:01:16.941760"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"218"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"finish_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-25 18:01:17.188224"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"num_of_images"</span><span class="p">:</span><span class="w"> </span><span class="s2">"38"</span><span class="w">
 </span><span class="p">},</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.31"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get the status of the dominant prints index.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/catalog/{catalog_name}/dominant_prints_index</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td>A json containing various info about the current status of the index building process.</td>
</tr>
<tr>
<td>status</td>
<td>The current status of the index building process. The status can be one of <code class="prettyprint">clustering</code> or <code class="prettyprint">done</code>. The index is built when the status becomes <code class="prettyprint">done</code>.</td>
</tr>
<tr>
<td>num_of_products</td>
<td>The number of products in the catalog.</td>
</tr>
<tr>
<td>num_of_images</td>
<td>The total number of images in the catalog.</td>
</tr>
<tr>
<td>start_time</td>
<td>The time when the index building started.</td>
</tr>
<tr>
<td>finish_time</td>
<td>The time when the index building finished.</td>
</tr>
<tr>
<td><strong>dominant_prints</strong></td>
<td>Info about dominant color.</td>
</tr>
<tr>
<td>num_of_images_missing_prints</td>
<td>The number of images for which there was no dominant color was found.</td>
</tr>
<tr>
<td>num_of_images_ignored</td>
<td>The number of images that were ignored.</td>
</tr>
<tr>
<td>num_of_images_indexed</td>
<td>The total number of images finally indexed.</td>
</tr>
</tbody></table>

<h2 id="delete-the-dominant-prints-index">Delete the dominant prints index</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Delete the dominant prints index.</span>
<span class="c"># DELETE /v1/catalog/{catalog_name}/dominant_prints_index</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/dominant_prints_index'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8.88"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"catalog_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample_catalog"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Delete the dominant prints index.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">DELETE /v1/catalog/{catalog_name}/dominant_prints_index</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>catalog_name</td>
<td>The catalog name.</td>
</tr>
<tr>
<td>deleted</td>
<td>This is <code class="prettyprint">true</code> if the index was successfully deleted.</td>
</tr>
</tbody></table>

<h2 id="get-dominant-prints-for-a-product">Get dominant prints for a product</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get the dominant prints for an image in the catalog.</span>
<span class="c"># GET /v1/catalog/{catalog_name}/dominant_prints/{id}/{image_id}</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="c"># Query parameters.</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># Optional parameters.</span>
<span class="c">#params['fraction_boxes_threshold'] = 0.1</span>

<span class="c"># Path parameters</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>
<span class="nb">id</span> <span class="o">=</span><span class="s">'SHRES16AWFSDR9346B'</span>
<span class="n">image_id</span> <span class="o">=</span> <span class="s">'1'</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/dominant_prints/</span><span class="si">%</span><span class="s">s/</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">,</span><span class="nb">id</span><span class="p">,</span><span class="n">image_id</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                        <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                        <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

<span class="c"># Human friendly repsonse.</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="s">'[image url      ] </span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="s">'image_url'</span><span class="p">]))</span>

<span class="n">image_location</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s?api_key=</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">results</span><span class="p">[</span><span class="s">'image_location'</span><span class="p">]),</span>
                                  <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s">'[original image ] </span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">image_location</span><span class="p">))</span>

<span class="n">image_location</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s&amp;api_key=</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">results</span><span class="p">[</span><span class="s">'bounding_box'</span><span class="p">][</span><span class="s">'image_location'</span><span class="p">]),</span>
                                  <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s">'[bounding box   ] </span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">image_location</span><span class="p">))</span>

<span class="k">for</span> <span class="n">print_info</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="s">'dominant_prints'</span><span class="p">]:</span>
    <span class="n">print_swatch</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s&amp;api_key=</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">print_info</span><span class="p">[</span><span class="s">'image_location'</span><span class="p">]),</span>
                                    <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">])</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'[dominant prints] </span><span class="si">%1.2</span><span class="s">f </span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">print_info</span><span class="p">[</span><span class="s">'fraction_boxes'</span><span class="p">],</span><span class="n">print_swatch</span><span class="p">))</span> 
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"dominant_prints"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/catalog/sample_catalog/images/SHRES16AWFSDR9346B_1.jpg?top_left_x=104&amp;top_left_y=136&amp;width=64&amp;height=64"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">104</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">136</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"fraction_boxes"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.528</span><span class="p">,</span><span class="w">
   </span><span class="s2">"print_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/catalog/sample_catalog/images/SHRES16AWFSDR9346B_1.jpg?top_left_x=104&amp;top_left_y=194&amp;width=64&amp;height=64"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">104</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">194</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"fraction_boxes"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.26</span><span class="p">,</span><span class="w">
   </span><span class="s2">"print_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/catalog/sample_catalog/images/SHRES16AWFSDR9346B_1.jpg?top_left_x=104&amp;top_left_y=243&amp;width=64&amp;height=64"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">104</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">243</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"fraction_boxes"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.212</span><span class="p">,</span><span class="w">
   </span><span class="s2">"print_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">],</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.71"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/catalog/sample_catalog/images/SHRES16AWFSDR9346B_1.jpg?top_left_x=83&amp;top_left_y=0&amp;width=107&amp;height=365"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">83</span><span class="p">,</span><span class="w">
  </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">365</span><span class="p">,</span><span class="w">
  </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">107</span><span class="p">,</span><span class="w">
  </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.800896</span><span class="w">
 </span><span class="p">},</span><span class="w">
 </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/SHRES16AWFSDR9346B18/Look_Medium.jpg"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/catalog/sample_catalog/images/SHRES16AWFSDR9346B_1.jpg"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get the dominant prints for an image in the catalog.</p>

<aside class="notice">
Prior to calling this API the dominant prints index has to be built.
</aside>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/catalog/{catalog_name}/dominant_prints/{id}/{image_id}</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>path</td>
<td>(<strong>Required</strong>) The product id.</td>
<td></td>
</tr>
<tr>
<td>image_id</td>
<td>path</td>
<td>(<strong>Required</strong>) The image id.</td>
<td></td>
</tr>
<tr>
<td>fraction_boxes_threshold</td>
<td>query</td>
<td>Include only those prints whos fraction of boxes is greater than this number.</td>
<td>0.0</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>image_url</td>
<td>The image url.</td>
</tr>
<tr>
<td>image_location</td>
<td>The image location.</td>
</tr>
<tr>
<td><strong>dominant_prints</strong></td>
<td>A list of dominant prints for the image sorted in the decreasing order of the fraction of boxes. Each field in the list has the following fieldnames.</td>
</tr>
<tr>
<td><strong>bounding_box</strong></td>
<td>The bounding box of the print swatch.</td>
</tr>
<tr>
<td>top_left_x</td>
<td>The x co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>top_left_y</td>
<td>The y co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>width</td>
<td>The width of the bounding box.</td>
</tr>
<tr>
<td>height</td>
<td>The height of the bounding box.</td>
</tr>
<tr>
<td>fraction_boxes</td>
<td>The fraction of swatches in the bounding box that can be attributed to this print.</td>
</tr>
<tr>
<td>print_id</td>
<td>The print id.</td>
</tr>
<tr>
<td>image_location</td>
<td>The image location of the print swatch.</td>
</tr>
<tr>
<td><strong>bounding_box</strong></td>
<td>The region in the image used to compute the dominant prints and corresponds to the the bounding box for the central detected person. In case <code class="prettyprint">ignore_background</code> is set to <code class="prettyprint">false</code> this corresponds to the entire image.</td>
</tr>
<tr>
<td>top_left_x</td>
<td>The x co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>top_left_y</td>
<td>The y co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>width</td>
<td>The width of the bounding box.</td>
</tr>
<tr>
<td>height</td>
<td>The height of the bounding box.</td>
</tr>
<tr>
<td>score</td>
<td>The confidence score (between 0 and 1) that the bounding box contains a person.</td>
</tr>
<tr>
<td>model</td>
<td>The person detection model used.</td>
</tr>
<tr>
<td>image_location</td>
<td>The image location of the bounding box.</td>
</tr>
</tbody></table>

<h2 id="get-dominant-prints-for-a-catalog">Get dominant prints for a catalog</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get the dominant prints for all images in the catalog.</span>
<span class="c"># GET /v1/catalog/{catalog_name}/dominant_prints</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">params</span><span class="p">[</span><span class="s">'prints'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>

<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/dominant_prints'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span><span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

<span class="c"># Here is how you can serve the print swatches</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="k">for</span> <span class="n">print_info</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="s">'dominant_prints'</span><span class="p">]:</span>
    <span class="n">print_swatch</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s&amp;api_key=</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">print_info</span><span class="p">[</span><span class="s">'image_location'</span><span class="p">]),</span>
                                    <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">])</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'[print swatch] </span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">print_swatch</span><span class="p">))</span> 
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"computed_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-25 18:01:17.184551"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.40"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"dominant_prints"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/catalog/sample_catalog/images/ABOFA15AMCWJG10448_3.jpg?top_left_x=128&amp;top_left_y=147&amp;width=64&amp;height=64"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.25</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">128</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">147</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"n_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/ABOFA15AMCWJG1044801/Left_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABOFA15AMCWJG10448_3.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABOFA15AMCWJG10448"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"print_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/catalog/sample_catalog/images/SKLTS16AMCWSH8SP01_3.jpg?top_left_x=104&amp;top_left_y=133&amp;width=64&amp;height=64"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.14285714285714285</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">104</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">133</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"n_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2016/SKLTS16AMCWSH8SP0150/Left_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SKLTS16AMCWSH8SP01_3.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SKLTS16AMCWSH8SP01"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"print_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/catalog/sample_catalog/images/SKLTS16AMCWSH8SP01_5.jpg?top_left_x=136&amp;top_left_y=198&amp;width=64&amp;height=64"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10714285714285714</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">136</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">198</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"n_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2016/SKLTS16AMCWSH8SP0150/Right_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SKLTS16AMCWSH8SP01_5.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SKLTS16AMCWSH8SP01"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"print_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/catalog/sample_catalog/images/SHRES16AWFSDR9346B_5.jpg?top_left_x=121&amp;top_left_y=149&amp;width=64&amp;height=64"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10714285714285714</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">121</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">149</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"n_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/SHRES16AWFSDR9346B18/Front_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B_5.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"print_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/catalog/sample_catalog/images/SKLTS16AMCWSH8SH20_1.jpg?top_left_x=117&amp;top_left_y=186&amp;width=64&amp;height=64"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.08928571428571429</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">117</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">186</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"n_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2016/SKLTS16AMCWSH8SH2005/Right_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SKLTS16AMCWSH8SH20_1.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SKLTS16AMCWSH8SH20"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"print_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get the dominant prints for all images in the catalog.</p>

<p>The dominant prints is to be interpreted as a representative of the cluster of similar prints.</p>

<aside class="notice">
Prior to calling this API the dominant prints index has to be built.
</aside>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/catalog/{catalog_name}/dominant_prints</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>prints</td>
<td>query</td>
<td>The number of dominant prints to return.</td>
<td>10</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>image_url</td>
<td>The image url.</td>
</tr>
<tr>
<td>image_location</td>
<td>The image location.</td>
</tr>
<tr>
<td><strong>dominant_prints</strong></td>
<td>A list of dominant prints for the catalog sorted in the decreasing order of popularity. Each field in the list has the following fieldnames.</td>
</tr>
<tr>
<td>id</td>
<td>The product id.</td>
</tr>
<tr>
<td>image_id</td>
<td>The image id.</td>
</tr>
<tr>
<td>print_id</td>
<td>The print id.</td>
</tr>
<tr>
<td>image_url</td>
<td>The image url.</td>
</tr>
<tr>
<td>image_filename</td>
<td>The image filename.</td>
</tr>
<tr>
<td>image_location</td>
<td>The image location of the print swatch.</td>
</tr>
<tr>
<td>popularity</td>
<td>A score between 0 and 1 indicating the popularity of the print.</td>
</tr>
<tr>
<td>n_instances</td>
<td>The number of prints in the cluster.</td>
</tr>
<tr>
<td><strong>bounding_box</strong></td>
<td>The bounding box of the print swatch.</td>
</tr>
<tr>
<td>top_left_x</td>
<td>The x co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>top_left_y</td>
<td>The y co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>width</td>
<td>The width of the bounding box.</td>
</tr>
<tr>
<td>height</td>
<td>The height of the bounding box.</td>
</tr>
</tbody></table>

          <h1 id="looks-search">Looks Search</h1>

<p>A collection of APIs for enabling catalog search based on looks.</p>

<h2 id="build-look-search-index">Build look search index</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Build the looks search index.</span>
<span class="c"># POST /v1/catalog/{catalog_name}/looks_search_index</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="c"># Query parameters.</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># Optional parameters.</span>
<span class="c">#params['image_max_dimension'] = 512</span>
<span class="n">params</span><span class="p">[</span><span class="s">'ignore_background'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'true'</span>
<span class="n">params</span><span class="p">[</span><span class="s">'model'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'person_fast'</span>
<span class="c">#params['ignore_images_without_person'] = 'true'</span>

<span class="c"># Path paarameters.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/looks_search_index'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span><span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"computing_features"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"looks_search_index"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"num_of_images_missing_features"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_indexed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-28 15:05:30.654530"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1229"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"num_of_products"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"finish_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"num_of_images"</span><span class="p">:</span><span class="w"> </span><span class="s2">"38"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"feature_computation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"num_of_images_error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_existing"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_processed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">},</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8.29"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Build the looks search index.</p>

<p>Before you can start using the looks search or dominant looks APIs the looks search index has to be built. This API computes the features for all the uploaded images in the catalog and then builds an index for fast nearest neighbor retrieval.</p>

<aside class="notice">
This is a one time long running operation. Depending on your catalog size you will have to wait till the index creation is completed to start using the looks search or dominant looks APIs. You can query the status of the index creation using the GET endpoint. The index is built when the status changes to `done`
</aside>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">POST /v1/catalog/{catalog_name}/looks_search_index</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>image_max_dimension</td>
<td>query</td>
<td>You can set this parameters to resize the image for faster computation of dominant prints. If your images are of very high resolution you can set this parameter to a smaller value (suggested values 256-512) for faster computation. For any image if max(image width,image height) &gt; image_max_dimension resizes the image such that max(image width,image height) = image_max_dimension.</td>
<td>no image resizing</td>
</tr>
<tr>
<td>ignore_background</td>
<td>query</td>
<td>By default we use the entire image to compute the dominant prints. If we set this parameter to <code class="prettyprint">true</code> we internally use some algorithms to ignore the background and mainly focus on the person or apparel.</td>
<td><code class="prettyprint">false</code></td>
</tr>
<tr>
<td>model</td>
<td>query</td>
<td>The model to use to ignore the background. Currently we use person detecors to focus only on the person. The following options are supported <code class="prettyprint">person_fast</code> (faster but slightly less accurate model), <code class="prettyprint">person_accurate</code> (slower but more accurate model) and <code class="prettyprint">person_basic</code> (a basic person detector using standard body proportions).</td>
<td><code class="prettyprint">person_fast</code></td>
</tr>
<tr>
<td>ignore_images_without_person</td>
<td>query</td>
<td>If <code class="prettyprint">true</code> ignore images where person is not detected. If <code class="prettyprint">false</code> and person is not detected then defaults to using the entire image.</td>
<td><code class="prettyprint">false</code></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td>A json containing various info about the current status of the index building process.</td>
</tr>
<tr>
<td>status</td>
<td>The current status of the index building process. The status can be one of <code class="prettyprint">computing_features</code>,<code class="prettyprint">building_index</code>,or <code class="prettyprint">done</code>. The index is built when the status becomes <code class="prettyprint">done</code>.</td>
</tr>
<tr>
<td>num_of_products</td>
<td>The number of products in the catalog.</td>
</tr>
<tr>
<td>num_of_images</td>
<td>The total number of images in the catalog.</td>
</tr>
<tr>
<td>start_time</td>
<td>The time when the index building started.</td>
</tr>
<tr>
<td>finish_time</td>
<td>The time when the index building finished.</td>
</tr>
<tr>
<td><strong>feature_computation</strong></td>
<td>Info about feature computation.</td>
</tr>
<tr>
<td>num_of_images_error</td>
<td>The number of images for which there was some error in features computation.</td>
</tr>
<tr>
<td>num_of_images_ignored</td>
<td>The number of images that were ignored.</td>
</tr>
<tr>
<td>num_of_images_existing</td>
<td>The number of images for which the features were already computed (in case of building a new index with new products added).</td>
</tr>
<tr>
<td>num_of_images_processed</td>
<td>The total number of images for which the features were computed.</td>
</tr>
<tr>
<td><strong>looks_search_index</strong></td>
<td>Info about the index building.</td>
</tr>
<tr>
<td>num_of_images_missing_feature</td>
<td>The number of images for which there was no features.</td>
</tr>
<tr>
<td>num_of_images_ignored</td>
<td>The number of images that were ignored.</td>
</tr>
<tr>
<td>num_of_images_indexed</td>
<td>The total number of images finally indexed.</td>
</tr>
</tbody></table>

<aside class="notice">
Any time you add new images to the catalog you will have to rebuild the index by calling this API again. Note that the features for the old images will still be saved and we will be computing the features only for the newly added images.
</aside>

<aside class="warning">
The current version supports building only one index at the same time and does not allow you to build another index when a current index building process in running. Please wait till the current index creation is completed. 
</aside>

<h2 id="get-looks-search-index-status">Get looks search index status</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get the status of the looks search index.</span>
<span class="c"># GET /v1/catalog/{catalog_name}/looks_search_index</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/looks_search_index'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"done"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"index_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"looks_search_index"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"num_of_images_missing_features"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_indexed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"28"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-28 15:05:30.654530"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1229"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"finish_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-28 15:06:37.109888"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"num_of_products"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"num_of_images"</span><span class="p">:</span><span class="w"> </span><span class="s2">"38"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"feature_computation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"num_of_images_error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_existing"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_processed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"28"</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">},</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8.54"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get the status of the looks search index.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/catalog/{catalog_name}/looks_search_index</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td>A json containing various info about the current status of the index building process.</td>
</tr>
<tr>
<td>status</td>
<td>The current status of the index building process. The status can be one of <code class="prettyprint">computing_features</code>,<code class="prettyprint">building_index</code>,or <code class="prettyprint">done</code>. The index is built when the status becomes <code class="prettyprint">done</code>.</td>
</tr>
<tr>
<td>num_of_products</td>
<td>The number of products in the catalog.</td>
</tr>
<tr>
<td>num_of_images</td>
<td>The total number of images in the catalog.</td>
</tr>
<tr>
<td>start_time</td>
<td>The time when the index building started.</td>
</tr>
<tr>
<td>finish_time</td>
<td>The time when the index building finished.</td>
</tr>
<tr>
<td><strong>feature_computation</strong></td>
<td>Info about feature computation.</td>
</tr>
<tr>
<td>num_of_images_error</td>
<td>The number of images for which there was some error in features computation.</td>
</tr>
<tr>
<td>num_of_images_ignored</td>
<td>The number of images that were ignored.</td>
</tr>
<tr>
<td>num_of_images_existing</td>
<td>The number of images for which the features were already computed (in case of building a new index with new products added).</td>
</tr>
<tr>
<td>num_of_images_processed</td>
<td>The total number of images for which the features were computed.</td>
</tr>
<tr>
<td><strong>looks_search_index</strong></td>
<td>Info about the index building.</td>
</tr>
<tr>
<td>num_of_images_missing_feature</td>
<td>The number of images for which there was no features.</td>
</tr>
<tr>
<td>num_of_images_ignored</td>
<td>The number of images that were ignored.</td>
</tr>
<tr>
<td>num_of_images_indexed</td>
<td>The total number of images finally indexed.</td>
</tr>
</tbody></table>

<h2 id="delete-the-looks-search-index">Delete the looks search index</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Delete the looks search index.</span>
<span class="c"># DELETE /v1/catalog/{catalog_name}/looks_search_index</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/looks_search_index'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8.88"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"catalog_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample_catalog"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Delete the looks search index.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">DELETE /v1/catalog/{catalog_name}/looks_search_index</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>catalog_name</td>
<td>The catalog name.</td>
</tr>
<tr>
<td>deleted</td>
<td>This is <code class="prettyprint">true</code> if the index was successfully deleted.</td>
</tr>
</tbody></table>

<h2 id="looks-search-by-id">Looks Search by id</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------ </span>
<span class="c"># Get similar looks in the catalog for an existing image.</span>
<span class="c"># GET /v1/catalog/{catalog_name}/looks_search</span>
<span class="c"># params - id,image_id,max_number_of_results</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="c"># Parameters.</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">params</span><span class="p">[</span><span class="s">'id'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'SHRES16AWFSDR9346A'</span> 
<span class="n">params</span><span class="p">[</span><span class="s">'image_id'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'1'</span>
<span class="n">params</span><span class="p">[</span><span class="s">'max_number_of_results'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>

<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/looks_search'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                        <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                        <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>


<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

<span class="c"># Human friendly repsonse.</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="k">for</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="s">'products'</span><span class="p">]:</span>
    <span class="n">person_image</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s&amp;api_key=</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">info</span><span class="p">[</span><span class="s">'image_location'</span><span class="p">]),</span>
                                    <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">])</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'[</span><span class="si">%1.2</span><span class="s">f] </span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="s">'similarity'</span><span class="p">],</span><span class="n">person_image</span><span class="p">))</span> 
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.32"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"products"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/catalog/sample_catalog/images/SHRES16AWFSDR9346A_1.jpg?top_left_x=68&amp;top_left_y=0&amp;width=119&amp;height=323"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"similarity"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">119</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.701361</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">68</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">323</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/SHRES16AWFSDR9346A54/Look_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346A"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346A_1.jpg"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/catalog/sample_catalog/images/SHRES16AWFSDR9346A_4.jpg?top_left_x=51&amp;top_left_y=0&amp;width=163&amp;height=347"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"similarity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.6284968256950378</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">163</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.702937</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">51</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">347</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/SHRES16AWFSDR9346A54/Front_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346A"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346A_4.jpg"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/catalog/sample_catalog/images/SHRES16AWFSDR9346B_5.jpg?top_left_x=95&amp;top_left_y=0&amp;width=119&amp;height=324"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"similarity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5597510933876038</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">119</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.629143</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">95</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">324</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/SHRES16AWFSDR9346B18/Front_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B_5.jpg"</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get similar looks in the catalog for an existing image.</p>

<aside class="notice">
The looks search index has to be built first before you can use this API.  
</aside>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/catalog/{catalog_name}/looks_search</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>query</td>
<td>(<strong>Required</strong>) The product id.</td>
<td></td>
</tr>
<tr>
<td>image_id</td>
<td>query</td>
<td>(<strong>Required</strong>) The image id.</td>
<td></td>
</tr>
<tr>
<td>max_number_of_results</td>
<td>query</td>
<td>maximum number of results to return.</td>
<td>12</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td><strong>products</strong></td>
<td>A sorted list similar images. Each item in the list has the following fields.</td>
</tr>
<tr>
<td>id</td>
<td>The product id.</td>
</tr>
<tr>
<td>image_id</td>
<td>The image id.</td>
</tr>
<tr>
<td>image_filename</td>
<td>The image filename.</td>
</tr>
<tr>
<td>image_url</td>
<td>The image url.</td>
</tr>
<tr>
<td>similariy</td>
<td>The similarity score.</td>
</tr>
<tr>
<td>image_location</td>
<td>The resource location of the bounding box for the detected person.</td>
</tr>
<tr>
<td>bounding_box</td>
<td>The bounding box of the dominant person in the image.</td>
</tr>
<tr>
<td>top_left_x</td>
<td>The x co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>top_left_y</td>
<td>The y co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>width</td>
<td>The width of the bounding box.</td>
</tr>
<tr>
<td>height</td>
<td>The height of the bounding box.</td>
</tr>
</tbody></table>

<h2 id="looks-search-by-image">Looks Search by image</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get similar looks in the catalog for a user uploaded image.</span>
<span class="c"># POST /v1/catalog/{catalog_name}/looks_search</span>
<span class="c"># params - max_number_of_results,ignore_background,model,image_max_dimension</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="c"># Parameters.</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">params</span><span class="p">[</span><span class="s">'max_number_of_results'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>
<span class="c">#params['image_max_dimension'] = 512</span>
<span class="n">params</span><span class="p">[</span><span class="s">'ignore_background'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'true'</span>
<span class="n">params</span><span class="p">[</span><span class="s">'model'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'person_fast'</span>

<span class="n">headers</span><span class="p">[</span><span class="s">'Content-Type'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'image/jpeg'</span>

<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/looks_search'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span>
                        <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                        <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                        <span class="n">data</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s">'test_image_3.jpeg'</span><span class="p">,</span><span class="s">'rb'</span><span class="p">))</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

<span class="c"># Human friendly repsonse.</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="n">image_location</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s?api_key=</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">results</span><span class="p">[</span><span class="s">'image_location'</span><span class="p">]),</span>
                                  <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s">'[original image ] </span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">image_location</span><span class="p">))</span>

<span class="n">image_location</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s&amp;api_key=</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">results</span><span class="p">[</span><span class="s">'bounding_box'</span><span class="p">][</span><span class="s">'image_location'</span><span class="p">]),</span>
                                  <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s">'[bounding box   ] </span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">image_location</span><span class="p">))</span>

<span class="k">for</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="s">'products'</span><span class="p">]:</span>
    <span class="n">person_image</span> <span class="o">=</span> <span class="s">'</span><span class="si">%</span><span class="s">s&amp;api_key=</span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">info</span><span class="p">[</span><span class="s">'image_location'</span><span class="p">]),</span>
                                    <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">])</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'[</span><span class="si">%1.2</span><span class="s">f] </span><span class="si">%</span><span class="s">s'</span><span class="o">%</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="s">'similarity'</span><span class="p">],</span><span class="n">person_image</span><span class="p">))</span> 
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2158.11"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/61e16e38-bb3e-4779-baf8-748491ca6162.jpe?top_left_x=177&amp;top_left_y=27&amp;width=170&amp;height=541"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">177</span><span class="p">,</span><span class="w">
  </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">27</span><span class="p">,</span><span class="w">
  </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">541</span><span class="p">,</span><span class="w">
  </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">170</span><span class="p">,</span><span class="w">
  </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.889102</span><span class="w">
 </span><span class="p">},</span><span class="w">
 </span><span class="s2">"products"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/catalog/sample_catalog/images/SHRES16AWFSDR9346A_5.jpg?top_left_x=54&amp;top_left_y=0&amp;width=154&amp;height=343"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"similarity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.41838812828063965</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">154</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.575364</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">54</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">343</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/SHRES16AWFSDR9346A54/Left_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346A"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346A_5.jpg"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/catalog/sample_catalog/images/SHRES16AWFSDR9346B_2.jpg?top_left_x=101&amp;top_left_y=0&amp;width=74&amp;height=303"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"similarity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.404349684715271</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">74</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.307322</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">101</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">303</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/SHRES16AWFSDR9346B18/Left_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B_2.jpg"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/catalog/sample_catalog/images/ABOFA15AMCWJG10448_5.jpg?top_left_x=0&amp;top_left_y=0&amp;width=313&amp;height=417"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"similarity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.40286576747894287</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">313</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">417</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/ABOFA15AMCWJG1044801/Front_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABOFA15AMCWJG10448"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABOFA15AMCWJG10448_5.jpg"</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">],</span><span class="w">
 </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/images/61e16e38-bb3e-4779-baf8-748491ca6162.jpe"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get similar looks in the catalog for a user uploaded image.</p>

<aside class="notice">
The looks search index has to be built first before you can use this API.  
</aside>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">POST /v1/catalog/{catalog_name}/looks_search</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>data</td>
<td>image/jpeg</td>
<td>(<strong>Required</strong>) The image. The image can be in PNG, JPEG,</td>
<td></td>
</tr>
<tr>
<td>max_number_of_results</td>
<td>query</td>
<td>maximum number of results to return</td>
<td>12</td>
</tr>
<tr>
<td>print_count</td>
<td>path</td>
<td>The maximum number of dominant prints to search for in an image.</td>
<td>1</td>
</tr>
<tr>
<td>image_max_dimension</td>
<td>query</td>
<td>You can set this parameters to resize the image for faster computation of dominant prints. If your image is of high resolution you can set this parameter to a smaller value (suggested values 256-512) for faster computation. For any image if max(image width,image height) &gt; image_max_dimension resizes the image such that max(image width,image height) = image_max_dimension.</td>
<td>no image resizing</td>
</tr>
<tr>
<td>ignore_background</td>
<td>query</td>
<td>By default we use the entire image to compute the dominant prints. If we set this parameter to <code class="prettyprint">true</code> we internally use some algorithms to ignore the background and mainly focus on the person or apparel.</td>
<td><code class="prettyprint">false</code></td>
</tr>
<tr>
<td>model</td>
<td>query</td>
<td>The model to use to ignore the background. Currently we use person detecors to focus only on the person. The following options are supported <code class="prettyprint">person_fast</code> (faster but slightly less accurate model), <code class="prettyprint">person_accurate</code> (slower but more accurate model) and <code class="prettyprint">person_basic</code> (a basic person detector using standard body proportions).</td>
<td><code class="prettyprint">person_fast</code></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>image_location</td>
<td>The image location.</td>
</tr>
<tr>
<td><strong>products</strong></td>
<td>A sorted list similar images. Each item in the list has the following fields.</td>
</tr>
<tr>
<td>id</td>
<td>The product id.</td>
</tr>
<tr>
<td>image_id</td>
<td>The image id.</td>
</tr>
<tr>
<td>image_filename</td>
<td>The image filename.</td>
</tr>
<tr>
<td>image_url</td>
<td>The image url.</td>
</tr>
<tr>
<td>similarity</td>
<td>The similarity score.</td>
</tr>
<tr>
<td>image_location</td>
<td>The resource location of the bounding box for the detected person.</td>
</tr>
<tr>
<td>bounding_box</td>
<td>The bounding box of the dominant person in the image.</td>
</tr>
<tr>
<td>top_left_x</td>
<td>The x co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>top_left_y</td>
<td>The y co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>width</td>
<td>The width of the bounding box.</td>
</tr>
<tr>
<td>height</td>
<td>The height of the bounding box.</td>
</tr>
<tr>
<td><strong>bounding_box</strong></td>
<td>The bounding box for the detected person.</td>
</tr>
<tr>
<td>top_left_x</td>
<td>The x co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>top_left_y</td>
<td>The y co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>width</td>
<td>The width of the bounding box.</td>
</tr>
<tr>
<td>height</td>
<td>The height of the bounding box.</td>
</tr>
<tr>
<td>score</td>
<td>The confidence score (between 0 and 1) that the bounding box contains a person.</td>
</tr>
<tr>
<td>image_location</td>
<td>The image location of the bounding box.</td>
</tr>
</tbody></table>

          <h1 id="dominant-looks">Dominant Looks</h1>

<p>A collection of APIs for computing the dominant looks for a catalog.</p>

<h2 id="build-dominant-looks-index">Build dominant looks index</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Build the dominant looks index.</span>
<span class="c"># POST /v1/catalog/{catalog_name}/dominant_looks_index</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c"># Optional parameters.</span>
<span class="n">params</span><span class="p">[</span><span class="s">'looks'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>

<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/dominant_looks_index'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span><span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"done"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"dominant_looks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"num_of_images_missing_features"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_indexed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"28"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"num_of_products"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"results_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-29 11:56:41.883208"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2067"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"finish_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-29 11:56:42.170910"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"num_of_images"</span><span class="p">:</span><span class="w"> </span><span class="s2">"38"</span><span class="w">
 </span><span class="p">},</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.16"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Build the dominant looks index.</p>

<p>Before you can start querying for the dominant looks you need to call this API to start the clustering procedure. </p>

<aside class="notice">
Prior to calling this API the looks search index has to be built.
</aside>

<aside class="notice">
This is a one time long running operation. Depending on your catalog size you will have to wait till the index creation is completed to start using the dominant looks APIs. You can query the status of the index creation using the GET endpoint. The clusteing is completed when the status changes to `done`
</aside>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">POST /v1/catalog/{catalog_name}/dominant_looks_index</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>looks</td>
<td>query</td>
<td>The number of dominant looks to compute.</td>
<td>10</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td>A json containing various info about the current status of the index building process.</td>
</tr>
<tr>
<td>status</td>
<td>The current status of the index building process. The status can be one of <code class="prettyprint">clustering</code> or <code class="prettyprint">done</code>. The index is built when the status becomes <code class="prettyprint">done</code>.</td>
</tr>
<tr>
<td>num_of_products</td>
<td>The number of products in the catalog.</td>
</tr>
<tr>
<td>num_of_images</td>
<td>The total number of images in the catalog.</td>
</tr>
<tr>
<td>start_time</td>
<td>The time when the index building started.</td>
</tr>
<tr>
<td>finish_time</td>
<td>The time when the index building finished.</td>
</tr>
<tr>
<td><strong>dominant_looks</strong></td>
<td>Info about dominant looks.</td>
</tr>
<tr>
<td>num_of_images_missing_features</td>
<td>The number of images for which there was no feature was found.</td>
</tr>
<tr>
<td>num_of_images_ignored</td>
<td>The number of images that were ignored.</td>
</tr>
<tr>
<td>num_of_images_indexed</td>
<td>The total number of images finally indexed.</td>
</tr>
</tbody></table>

<aside class="warning">
The current version supports building only one index at the same time and does not allow you to build another index when a current index building process in running. Please wait till the current index creation is completed. 
</aside>

<h2 id="get-dominant-looks-index-status">Get dominant looks index status</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get the status of the dominant looks index.</span>
<span class="c"># GET /v1/catalog/{catalog_name}/dominant_looks_index</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/dominant_looks_index'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"done"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"dominant_looks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="s2">"num_of_images_missing_features"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_indexed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"28"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"num_of_images_ignored"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"num_of_products"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"results_updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-29 11:56:41.883208"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2067"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"finish_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-29 11:56:42.170910"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"num_of_images"</span><span class="p">:</span><span class="w"> </span><span class="s2">"38"</span><span class="w">
 </span><span class="p">},</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.45"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get the status of the dominant looks index.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/catalog/{catalog_name}/dominant_looks_index</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td>A json containing various info about the current status of the index building process.</td>
</tr>
<tr>
<td>status</td>
<td>The current status of the index building process. The status can be one of <code class="prettyprint">clustering</code> or <code class="prettyprint">done</code>. The index is built when the status becomes <code class="prettyprint">done</code>.</td>
</tr>
<tr>
<td>num_of_products</td>
<td>The number of products in the catalog.</td>
</tr>
<tr>
<td>num_of_images</td>
<td>The total number of images in the catalog.</td>
</tr>
<tr>
<td>start_time</td>
<td>The time when the index building started.</td>
</tr>
<tr>
<td>finish_time</td>
<td>The time when the index building finished.</td>
</tr>
<tr>
<td><strong>dominant_looks</strong></td>
<td>Info about dominant looks.</td>
</tr>
<tr>
<td>num_of_images_missing_features</td>
<td>The number of images for which there was no feature was found.</td>
</tr>
<tr>
<td>num_of_images_ignored</td>
<td>The number of images that were ignored.</td>
</tr>
<tr>
<td>num_of_images_indexed</td>
<td>The total number of images finally indexed.</td>
</tr>
</tbody></table>

<h2 id="delete-the-dominant-looks-index">Delete the dominant looks index</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Delete the dominant looks index.</span>
<span class="c"># DELETE /v1/catalog/{catalog_name}/dominant_looks_index</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/dominant_looks_index'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
 </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8.88"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"catalog_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample_catalog"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Delete the dominant looks index.</p>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">DELETE /v1/catalog/{catalog_name}/dominant_looks_index</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>catalog_name</td>
<td>The catalog name.</td>
</tr>
<tr>
<td>deleted</td>
<td>This is <code class="prettyprint">true</code> if the index was successfully deleted.</td>
</tr>
</tbody></table>

<h2 id="get-dominant-looks-for-a-catalog">Get dominant looks for a catalog</h2>
<pre class="highlight python tab-python"><code><span class="c">#------------------------------------------------------------------------------</span>
<span class="c"># Get the dominant looks for all images in the catalog.</span>
<span class="c"># GET /v1/catalog/{catalog_name}/dominant_looks</span>
<span class="c"># params - looks</span>
<span class="c">#------------------------------------------------------------------------------</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="c"># Replace 'your_api_key' with your API key.</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">params</span><span class="p">[</span><span class="s">'looks'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>

<span class="c"># Catalog name.</span>
<span class="n">catalog_name</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'catalog_name'</span><span class="p">]</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/catalog/</span><span class="si">%</span><span class="s">s/dominant_looks'</span><span class="o">%</span><span class="p">(</span><span class="n">catalog_name</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span><span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">
 </span><span class="s2">"computed_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-29 11:56:42.162979"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"time_ms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.24"</span><span class="p">,</span><span class="w">
 </span><span class="s2">"dominant_looks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/catalog/sample_catalog/images/LPJNA16AMDMTE91662_2.jpg?top_left_x=57&amp;top_left_y=0&amp;width=197&amp;height=351"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.14285714285714285</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">197</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.530316</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">57</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">351</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"n_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2016/LPJNA16AMDMTE9166200/Right_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LPJNA16AMDMTE91662"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LPJNA16AMDMTE91662_2.jpg"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/catalog/sample_catalog/images/SHRES16AWFSDR9346B_4.jpg?top_left_x=111&amp;top_left_y=0&amp;width=91&amp;height=326"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.14285714285714285</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">91</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.538281</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">111</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">326</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"n_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/SHRES16AWFSDR9346B18/Right_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHRES16AWFSDR9346B_4.jpg"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
   </span><span class="s2">"image_location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/v1/catalog/sample_catalog/images/ABOFA15AMCWJG10449_4.jpg?top_left_x=119&amp;top_left_y=0&amp;width=114&amp;height=360"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"popularity"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.14285714285714285</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bounding_box"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">114</span><span class="p">,</span><span class="w">
    </span><span class="s2">"score"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.76403</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_x"</span><span class="p">:</span><span class="w"> </span><span class="mi">119</span><span class="p">,</span><span class="w">
    </span><span class="s2">"top_left_y"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">360</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"n_instances"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://images.abofcdn.com/catalog/images/2015/ABOFA15AMCWJG1044901/Look_Medium.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABOFA15AMCWJG10449"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"image_filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABOFA15AMCWJG10449_4.jpg"</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get the dominant looks for all images in the catalog.</p>

<p>The dominant looks is to be interpreted as a representative of the cluster of similar looks.</p>

<aside class="notice">
Prior to calling this API the dominant looks index has to be built.
</aside>

<h3 id="end-point">End point</h3>

<p><code class="prettyprint">GET /v1/catalog/{catalog_name}/dominant_looks</code></p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>catalog_name</td>
<td>path</td>
<td>(<strong>Required</strong>) The catalog name.</td>
<td></td>
</tr>
<tr>
<td>looks</td>
<td>query</td>
<td>The number of dominant looks to return.</td>
<td>10</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken in milliseconds.</td>
</tr>
<tr>
<td>image_url</td>
<td>The image url.</td>
</tr>
<tr>
<td>image_location</td>
<td>The image location.</td>
</tr>
<tr>
<td><strong>dominant_looks</strong></td>
<td>A list of dominant looks for the catalog sorted in the decreasing order of popularity. Each field in the list has the following fieldnames.</td>
</tr>
<tr>
<td>id</td>
<td>The product id.</td>
</tr>
<tr>
<td>image_id</td>
<td>The image id.</td>
</tr>
<tr>
<td>image_url</td>
<td>The image url.</td>
</tr>
<tr>
<td>image_filename</td>
<td>The image filename.</td>
</tr>
<tr>
<td>image_location</td>
<td>The image location of the person in the image.</td>
</tr>
<tr>
<td>popularity</td>
<td>A score between 0 and 1 indicating the popularity of the print.</td>
</tr>
<tr>
<td>n_instances</td>
<td>The number of looks in the cluster.</td>
</tr>
<tr>
<td><strong>bounding_box</strong></td>
<td>The bounding box of the person.</td>
</tr>
<tr>
<td>top_left_x</td>
<td>The x co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>top_left_y</td>
<td>The y co-ordinate of the top left corner of the bounding box.</td>
</tr>
<tr>
<td>width</td>
<td>The width of the bounding box.</td>
</tr>
<tr>
<td>height</td>
<td>The height of the bounding box.</td>
</tr>
</tbody></table>

          <h1 id="complete-the-look">Complete the Look</h1>

<p>Given a fashion apparel suggest another apparel/accessory that goes well with it. The API also returns a natural language style tip along with the products.</p>

<p>Some use cases for visual attributes include:
- recommendation of apparels based on style rules
- aids in curating fashion outfits by bloggers, designers</p>

<aside class="notice">
We differentiate between two kinds of usecase. Complete the look using the meta data of the product of interest. Complete the look using the image of the product of interest.
</aside>

<h2 id="complete-the-look-using-meta-data-of-the-product-of-interest">Complete the Look using meta data of the product of interest</h2>

<p>Given a fashion apparel suggest another apparel/accessory that goes well with it using the meta data of the product</p>
<pre class="highlight python tab-python"><code>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">urljoin</span>
<span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="kn">from</span> <span class="nn">props</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Replace this with the custom url generated for you.</span>
<span class="n">api_gateway_url</span> <span class="o">=</span> <span class="n">props</span><span class="p">[</span><span class="s">'api_gateway_url'</span><span class="p">]</span>

<span class="c"># Pass the api key into the header</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'X-Api-Key'</span><span class="p">:</span> <span class="n">props</span><span class="p">[</span><span class="s">'X-Api-Key'</span><span class="p">]}</span>

<span class="c"># Parameters.</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">params</span><span class="p">[</span><span class="s">'query_text'</span><span class="p">]</span> <span class="o">=</span> <span class="s">"red floral dress"</span>
<span class="n">params</span><span class="p">[</span><span class="s">'gender'</span><span class="p">]</span> <span class="o">=</span> <span class="s">"female"</span>

<span class="n">api_endpoint</span> <span class="o">=</span> <span class="s">'/v1/complete_the_look/text/'</span>
<span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="n">api_gateway_url</span><span class="p">,</span><span class="n">api_endpoint</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span><span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
<span class="k">print</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

</code></pre>
<blockquote>
<p>Sample json response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">
</span><span class="p">{</span><span class="err">u'recommendation'</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">u'heels'</span><span class="p">,</span><span class="w"> </span><span class="err">u'sling</span><span class="w"> </span><span class="err">bag'</span><span class="p">,</span><span class="w"> </span><span class="err">u'earrings'</span><span class="p">],</span><span class="w">
 </span><span class="err">u'style_tip'</span><span class="p">:</span><span class="w"> </span><span class="err">u'style</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">dress</span><span class="w"> </span><span class="err">by</span><span class="w"> </span><span class="err">teaming</span><span class="w"> </span><span class="err">it</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">pair</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">black</span><span class="w"> </span><span class="err">heels</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">sling</span><span class="w"> </span><span class="err">bag</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">pair</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">earrings</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">sling</span><span class="w"> </span><span class="err">bag.</span><span class="w"> </span><span class="err">'</span><span class="p">,</span><span class="w">
 </span><span class="err">u'time_ms'</span><span class="p">:</span><span class="w"> </span><span class="mf">0.45203208923339844</span><span class="p">}</span><span class="w">

</span></code></pre>
<h3 id="end-point">End point</h3>

<p>`GET /v1/complete_the_look/text/</p>

<h3 id="request">Request</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td>query_text</td>
<td>query</td>
<td>(<strong>Required</strong>) The query text</td>
<td></td>
</tr>
<tr>
<td>gender</td>
<td>query</td>
<td>gender for the query text</td>
<td></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>time_ms</td>
<td>The time taken for generating the response in milliseconds.</td>
</tr>
<tr>
<td><strong>style_tip</strong></td>
<td>The style tip for the query fashion item</td>
</tr>
<tr>
<td><strong>recommendation</strong></td>
<td>List of fashion items which would go well with the query fashion item</td>
</tr>
</tbody></table>

<h2 id="complete-the-look-using-the-image-of-the-product-of-interest">Complete the Look using the image of the product of interest</h2>

<p>Coming soon &hellip;</p>

          <h1 id="errors">Errors</h1>

<p>The Cogntive Fashion API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; Your API key is wrong</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; The product is not in the catalog.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable &ndash; You requested a format that isn&rsquo;t json</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; We&rsquo;re temporarially offline for maintanance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="python">python</a>
          </div>
      </div>
    </div>
  </body>
</html>
